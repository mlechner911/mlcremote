const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./PdfPreview-CMjkD-yP.js","./vendor-react-fUBbVULr.js","./vendor-scheduler-DYLXRpC5.js","./vendor-devlop-Cl3hj7Sz.js","./vendor-extend-BByqELpg.js","./vendor-unified-CN3Pc_0x.js","./vendor-bail-FqpXQuLt.js","./vendor-is-plain-obj-C1gvLhAf.js","./vendor-trough-B_b8ryxu.js","./vendor-vfile-BCWrK60u.js","./vendor-vfile-message-DqhD22jI.js","./vendor-unist-util-stringify-position-Ch_qCilz.js","./vendor-remark-parse-CNDkPE6C.js","./vendor-mdast-util-from-markdown-CHHsmDpx.js","./vendor-micromark-util-decode-numeric-character-reference-CNs1qBpV.js","./vendor-micromark-util-decode-string-fHsnqYdj.js","./vendor-decode-named-character-reference-C3-224fz.js","./vendor-micromark-util-normalize-identifier-C9ANKk3v.js","./vendor-micromark-Dc687xHH.js","./vendor-micromark-util-combine-extensions-d8XJZrgA.js","./vendor-micromark-util-chunked-DrRIdSP-.js","./vendor-micromark-factory-space-BM4zcA-B.js","./vendor-micromark-util-character-Cn8n62xE.js","./vendor-micromark-core-commonmark-BEN53qso.js","./vendor-micromark-util-classify-character-Bc1Mydac.js","./vendor-micromark-util-resolve-all-PQCKh0dx.js","./vendor-micromark-util-subtokenize-BF1Jf29a.js","./vendor-micromark-factory-destination-QK-4WEtY.js","./vendor-micromark-factory-label-Bo_B4AwM.js","./vendor-micromark-factory-title-D-E2MfTG.js","./vendor-micromark-factory-whitespace-D8F2YPRT.js","./vendor-micromark-util-html-tag-name-DbKNfynz.js","./vendor-mdast-util-to-string-C_aolqmU.js","./vendor-remark-rehype-Eq-g-hA4.js","./vendor-mdast-util-to-hast-B4KFU5Q1.js","./vendor-ungap--gfxRhYI.js","./vendor-micromark-util-sanitize-uri-B-zxHmez.js","./vendor-unist-util-position-60F3QETU.js","./vendor-trim-lines-D8znQY54.js","./vendor-unist-util-visit-DyPrGnGc.js","./vendor-unist-util-visit-parents-CHe-IBUw.js","./vendor-unist-util-is-D9KQvrmg.js","./vendor-hast-util-to-jsx-runtime-48tnp6nG.js","./vendor-comma-separated-tokens-xMQ5YY98.js","./vendor-property-information-Bx45xMUt.js","./vendor-space-separated-tokens-DD3iYX1K.js","./vendor-style-to-js-CGcDVYOI.js","./vendor-style-to-object-COD_8__P.js","./vendor-inline-style-parser-CWBJcU5N.js","./vendor-hast-util-whitespace-D4Wp6AEg.js","./vendor-estree-util-is-identifier-name-BgBfM8ME.js","./vendor-html-url-attributes-D46m5wfe.js","./vendor-prism-DmEJSkZI.js","./vendor-html2canvas-BfYXEYrK.js","./vendor-xterm-DOcMqDAd.js","./vendor-xterm-DYP7pi_n.css","./vendor-i18next-BnqEsHlA.js","./vendor-i18next-browser-languagedetector-ClvlpAgo.js","./ShellView-cA8sWHF0.js","./TerminalTab-hhvhRXlX.js","./MarkdownPreview-CKEzdQXT.js","./vendor-remark-gfm-uw-dc7IP.js","./vendor-micromark-extension-gfm-CZUPGk5O.js","./vendor-micromark-extension-gfm-autolink-literal-zrBeIzAz.js","./vendor-micromark-extension-gfm-footnote-DC8zpk-O.js","./vendor-micromark-extension-gfm-strikethrough-r4kRFlAf.js","./vendor-micromark-extension-gfm-table-B99Gg4C5.js","./vendor-micromark-extension-gfm-task-list-item-BZuxQwYN.js","./vendor-mdast-util-gfm-BVgF6PCq.js","./vendor-mdast-util-gfm-autolink-literal-DosrCWU3.js","./vendor-ccount-c2V3InAJ.js","./vendor-mdast-util-find-and-replace-BiKHlny_.js","./vendor-escape-string-regexp-BaJN9MlJ.js","./vendor-mdast-util-gfm-footnote-eRUj3PhO.js","./vendor-mdast-util-gfm-strikethrough-Cj9qKt6Q.js","./vendor-mdast-util-gfm-table-C80Z1anG.js","./vendor-markdown-table-DvhhVmnL.js","./vendor-mdast-util-to-markdown-CY_ELGXh.js","./vendor-longest-streak-CtXnX3Xp.js","./vendor-mdast-util-phrasing-GiRy56vE.js","./vendor-mdast-util-gfm-task-list-item-BI7eeOYA.js","./MarkdownPreview-C8dKPotk.css","./ArchiveViewer-gfLwUr8B.js"])))=>i.map(i=>d[i]);
var Lt=Object.defineProperty;var zt=(t,n,s)=>n in t?Lt(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s;var ot=(t,n,s)=>zt(t,typeof n!="symbol"?n+"":n,s);import{r as Q,R as i,j as e,u as B,P as it,a as Ce,b as He,i as Nt,c as Rt}from"./vendor-react-fUBbVULr.js";import{P as Ke}from"./vendor-prism-DmEJSkZI.js";import{h as Dt}from"./vendor-html2canvas-BfYXEYrK.js";import"./vendor-xterm-DOcMqDAd.js";import{i as dt}from"./vendor-i18next-BnqEsHlA.js";import{B as Pt}from"./vendor-i18next-browser-languagedetector-ClvlpAgo.js";import"./vendor-scheduler-DYLXRpC5.js";import"./vendor-devlop-Cl3hj7Sz.js";import"./vendor-extend-BByqELpg.js";import"./vendor-unified-CN3Pc_0x.js";import"./vendor-bail-FqpXQuLt.js";import"./vendor-is-plain-obj-C1gvLhAf.js";import"./vendor-trough-B_b8ryxu.js";import"./vendor-vfile-BCWrK60u.js";import"./vendor-vfile-message-DqhD22jI.js";import"./vendor-unist-util-stringify-position-Ch_qCilz.js";import"./vendor-remark-parse-CNDkPE6C.js";import"./vendor-mdast-util-from-markdown-CHHsmDpx.js";import"./vendor-micromark-util-decode-numeric-character-reference-CNs1qBpV.js";import"./vendor-micromark-util-decode-string-fHsnqYdj.js";import"./vendor-decode-named-character-reference-C3-224fz.js";import"./vendor-micromark-util-normalize-identifier-C9ANKk3v.js";import"./vendor-micromark-Dc687xHH.js";import"./vendor-micromark-util-combine-extensions-d8XJZrgA.js";import"./vendor-micromark-util-chunked-DrRIdSP-.js";import"./vendor-micromark-factory-space-BM4zcA-B.js";import"./vendor-micromark-util-character-Cn8n62xE.js";import"./vendor-micromark-core-commonmark-BEN53qso.js";import"./vendor-micromark-util-classify-character-Bc1Mydac.js";import"./vendor-micromark-util-resolve-all-PQCKh0dx.js";import"./vendor-micromark-util-subtokenize-BF1Jf29a.js";import"./vendor-micromark-factory-destination-QK-4WEtY.js";import"./vendor-micromark-factory-label-Bo_B4AwM.js";import"./vendor-micromark-factory-title-D-E2MfTG.js";import"./vendor-micromark-factory-whitespace-D8F2YPRT.js";import"./vendor-micromark-util-html-tag-name-DbKNfynz.js";import"./vendor-mdast-util-to-string-C_aolqmU.js";import"./vendor-remark-rehype-Eq-g-hA4.js";import"./vendor-mdast-util-to-hast-B4KFU5Q1.js";import"./vendor-ungap--gfxRhYI.js";import"./vendor-micromark-util-sanitize-uri-B-zxHmez.js";import"./vendor-unist-util-position-60F3QETU.js";import"./vendor-trim-lines-D8znQY54.js";import"./vendor-unist-util-visit-DyPrGnGc.js";import"./vendor-unist-util-visit-parents-CHe-IBUw.js";import"./vendor-unist-util-is-D9KQvrmg.js";import"./vendor-hast-util-to-jsx-runtime-48tnp6nG.js";import"./vendor-comma-separated-tokens-xMQ5YY98.js";import"./vendor-property-information-Bx45xMUt.js";import"./vendor-space-separated-tokens-DD3iYX1K.js";import"./vendor-style-to-js-CGcDVYOI.js";import"./vendor-style-to-object-COD_8__P.js";import"./vendor-inline-style-parser-CWBJcU5N.js";import"./vendor-hast-util-whitespace-D4Wp6AEg.js";import"./vendor-estree-util-is-identifier-name-BgBfM8ME.js";import"./vendor-html-url-attributes-D46m5wfe.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function s(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerPolicy&&(u.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?u.credentials="include":r.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(r){if(r.ep)return;r.ep=!0;const u=s(r);fetch(r.href,u)}})();const It="modulepreload",At=function(t,n){return new URL(t,n).href},rt={},ge=function(n,s,o){let r=Promise.resolve();if(s&&s.length>0){const c=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),h=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));r=Promise.allSettled(s.map(l=>{if(l=At(l,o),l in rt)return;rt[l]=!0;const _=l.endsWith(".css"),y=_?'[rel="stylesheet"]':"";if(!!o)for(let b=c.length-1;b>=0;b--){const I=c[b];if(I.href===l&&(!_||I.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${y}`))return;const v=document.createElement("link");if(v.rel=_?"stylesheet":It,_||(v.as="script"),v.crossOrigin="",v.href=l,h&&v.setAttribute("nonce",h),document.head.appendChild(v),_)return new Promise((b,I)=>{v.addEventListener("load",b),v.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${l}`)))})}))}function u(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return r.then(c=>{for(const d of c||[])d.status==="rejected"&&u(d.reason);return n().catch(u)})},Ot=200,Te=[],Le=[];function ut(t,n){const s={ts:new Date().toISOString(),level:t,msg:n};for(Te.push(s);Te.length>Ot;)Te.shift();Le.forEach(o=>o())}function W(t){ut("info",t)}function ze(t){ut("warn",t)}function Mt(){return Te.slice().reverse()}function Ft(t){return Le.push(t),()=>{const n=Le.indexOf(t);n>=0&&Le.splice(n,1)}}function Ut(){Te.length=0,Le.forEach(t=>t())}function Oe(){try{return localStorage.getItem("mlcremote_token")}catch{return null}}function We(t){try{localStorage.setItem("mlcremote_token",t)}catch{}}let fe="";function at(t){fe=t.replace(/\/$/,"")}function Ah(){return fe}function _e(t){if(!fe||typeof t!="string"||t.startsWith("http"))return t;if(fe.includes("?")){const[n,s]=fe.split("?"),o=`${n.replace(/\/$/,"")}${t}`;return o.includes("?")?`${o}&${s}`:`${o}?${s}`}return`${fe}${t}`}async function J(t,n){const s=Oe(),o=new Headers(n==null?void 0:n.headers);s&&o.set("X-Auth-Token",s);const r={...n||{},headers:o};let u=t;typeof t=="string"&&t.startsWith("/")&&(u=_e(t));const c=await fetch(u,r);if(c.status===401){try{localStorage.removeItem("mlcremote_token")}catch{}try{window.dispatchEvent(new CustomEvent("mlcremote:auth-failed",{detail:{url:typeof t=="string"?t:t.url}}))}catch{}}return c}async function Bt(t){W("POST /api/login");const n=await fetch(_e("/api/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:t})});if(W(`/api/login => ${n.status}`),!n.ok)throw new Error("login failed");const s=await n.json();if(s&&s.token)return We(s.token),s.token;throw new Error("no token in response")}async function Ht(){W("GET /health");const t=await J("/health");if(W(`/health => ${t.status}`),!t.ok)throw ze("/health not ok"),new Error("health failed");return t.json()}function ct(){try{const t=new URLSearchParams(window.location.search),n=t.get("token");n&&We(n);const s=t.get("api");if(s)try{const o=new URL(s);let r=o.origin+o.pathname;r.endsWith("/")&&(r=r.slice(0,-1)),at(r);const u=o.searchParams.get("token");u&&We(u)}catch{at(s)}return!!n}catch{}return!1}async function Wt(){try{return(await J("/api/auth/check")).status===200}catch{return!1}}async function Ze(t="",n){const s=new URLSearchParams;t&&s.set("path",t),n!=null&&n.showHidden&&s.set("showHidden","1"),s.set("_",Date.now().toString());const o=s.toString()?`?${s.toString()}`:"";W(`GET /api/tree${o}`);const r=await J(`/api/tree${o}`);if(W(`/api/tree${o} => ${r.status}`),r.status===403)throw new Error("Permission denied");if(!r.ok)throw ze("/api/tree not ok"),new Error("tree failed");return r.json()}async function Vt(t){W(`GET /api/file?path=${t}`);const n=await J(`/api/file?path=${encodeURIComponent(t)}`);if(W(`/api/file?path=${t} => ${n.status}`),n.status===403)throw new Error("Permission denied");if(!n.ok)throw ze("/api/file read failed"),new Error("read failed");return n.text()}async function Ne(t){W(`GET /api/stat?path=${t}`);const n=await J(`/api/stat?path=${encodeURIComponent(t)}`);if(W(`/api/stat?path=${t} => ${n.status}`),n.status===403)throw new Error("Permission denied");if(!n.ok)throw new Error("stat failed");return n.json()}async function qt(t,n){W(`POST /api/file path=${t} size=${n.length}`);const s=await J("/api/file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:t,content:n})});if(W(`/api/file POST => ${s.status}`),!s.ok)throw ze("/api/file save failed"),new Error("save failed")}async function ht(t,n){const s=new FormData;s.append("file",n),W(`POST /api/upload path=${t} filename=${n.name} size=${n.size}`);const o=await J(`/api/upload?path=${encodeURIComponent(t)}`,{method:"POST",body:s});if(W(`/api/upload POST => ${o.status}`),!o.ok)throw ze("/api/upload failed"),new Error("upload failed")}async function Oh(t){const n=`?path=${encodeURIComponent(t)}`;W(`GET /api/archive/list${n}`);const s=await J(`/api/archive/list${n}`);if(W(`/api/archive/list${n} => ${s.status}`),!s.ok)throw new Error("archive list failed");return s.json()}async function Kt(){const t=await J("/api/settings");if(!t.ok)throw new Error("Failed to load settings");return t.json()}async function ie(t){const n=await J("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error("Failed to save settings");return n.json()}const mt=Q.createContext(null);function Zt({children:t}){const[n,s]=Q.useState(null),[o,r]=Q.useState(null),[u,c]=Q.useState(navigator.onLine),[d,h]=Q.useState(!1),[l,_]=Q.useState(!1),[y,x]=Q.useState(!1);i.useState(()=>{if(typeof window>"u")return;const P=new URLSearchParams(window.location.search).get("token");if(P){localStorage.setItem("mlcremote_token",P);const p=window.location.protocol+"//"+window.location.host+window.location.pathname;window.history.replaceState({path:p},"",p)}});const v=Q.useCallback(async()=>{if(navigator.onLine)try{const f=await Ht();s(f),r(Date.now()),await Wt()||(localStorage.removeItem("mlcremote_token"),f.password_auth?h(!0):f.auth_required&&_(!0))}catch{s(null)}},[]);Q.useEffect(()=>{const f=()=>{c(!0),v()},P=()=>{c(!1),s(null)};window.addEventListener("online",f),window.addEventListener("offline",P);const p=setInterval(v,60*1e3);v();const a=()=>x(!0);return window.addEventListener("mlcremote:auth-failed",a),()=>{window.removeEventListener("online",f),window.removeEventListener("offline",P),window.removeEventListener("mlcremote:auth-failed",a),clearInterval(p)}},[v]),Q.useEffect(()=>{if(!n){x(!1);return}const f=!!n.password_auth,P=!!n.auth_required&&!n.password_auth,p=localStorage.getItem("mlcremote_token");x(!!((f||P)&&!p))},[n]);const b=async f=>{await Bt(f),await v(),h(!1),x(!1)},I=f=>{localStorage.setItem("mlcremote_token",f),v(),_(!1),x(!1)},M=()=>{localStorage.removeItem("mlcremote_token"),v()};return e.jsx(mt.Provider,{value:{health:n,isOnline:u,lastHealthAt:o,refreshHealth:v,login:b,setToken:I,logout:M,showLogin:d,setShowLogin:h,showTokenInput:l,setShowTokenInput:_,showAuthChooser:y,setShowAuthChooser:x},children:t})}function pt(){const t=Q.useContext(mt);if(!t)throw new Error("useAuth must be used within AuthProvider");return t}function Yt(){const{i18n:t}=B(),[n,s]=i.useState(null),[o,r]=i.useState(!1),[u,c]=i.useState("dark"),[d,h]=i.useState(!0),[l,_]=i.useState(!1),[y,x]=i.useState(!1),[v,b]=i.useState(!1),[I,M]=i.useState(0),[f,P]=i.useState(!1),[p,a]=i.useState("classic"),w=g=>{h(g),ie({autoOpen:g}).catch(console.error)},k=g=>{_(g),ie({showHidden:g}).catch(console.error)},j=g=>{x(g),ie({showLogs:g}).catch(console.error)},$=g=>{b(g),ie({hideMemoryUsage:g}).catch(console.error)},C=g=>{M(g),ie({maxEditorSize:g}).catch(console.error),localStorage.setItem("mlc_max_editor_size",g.toString())},N=g=>{a(g),ie({uiMode:g}).catch(console.error)};return i.useEffect(()=>{Kt().then(g=>{s(g),typeof g.allowDelete<"u"&&P(!!g.allowDelete),g.theme&&c(g.theme),typeof g.autoOpen<"u"&&h(g.autoOpen),typeof g.showHidden<"u"&&_(g.showHidden),typeof g.showLogs<"u"&&x(g.showLogs),g.hideMemoryUsage&&b(g.hideMemoryUsage),g.maxEditorSize&&(M(g.maxEditorSize),localStorage.setItem("mlc_max_editor_size",g.maxEditorSize.toString())),g.uiMode&&a(g.uiMode);const V=new URLSearchParams(window.location.search),q=V.get("theme");q==="light"||q==="dark"?(c(q),q==="light"?document.documentElement.classList.add("theme-light"):document.documentElement.classList.remove("theme-light")):g.theme==="light"?document.documentElement.classList.add("theme-light"):document.documentElement.classList.remove("theme-light");const Y=V.get("lng")||V.get("lang");Y&&Y!==g.language?(ie({language:Y}).catch(console.error),t.language!==Y&&t.changeLanguage(Y)):g.language&&t.language!==g.language&&t.changeLanguage(g.language),r(!0)}).catch(()=>{s({allowDelete:!1,defaultShell:"bash"}),r(!0)})},[]),i.useEffect(()=>{u==="light"?document.documentElement.classList.add("theme-light"):document.documentElement.classList.remove("theme-light")},[u]),{settings:n,loadedSettings:o,theme:u,setTheme:c,autoOpen:d,setAutoOpen:w,showHidden:l,setShowHidden:k,showLogs:y,toggleLogs:j,hideMemoryUsage:v,toggleHideMemoryUsage:$,maxEditorSize:I,updateMaxEditorSize:C,canChangeRoot:f,uiMode:p,setUiMode:N,i18n:t}}function Jt(t=8){var p;const[n,s]=i.useState({root:{tabs:[],activeTabId:""}}),[o,r]=i.useState({type:"leaf",paneId:"root"}),[u,c]=i.useState("root"),[d,h]=i.useState({}),[l,_]=i.useState("");i.useEffect(()=>{const a=n[u];_((a==null?void 0:a.activeTabId)||"")},[n,u]);const y=((p=n[u])==null?void 0:p.tabs)||[],x=a=>{s(w=>{const k=w[u];if(!k)return w;const j=a(k.tabs);return{...w,[u]:{...k,tabs:j}}})},v=a=>{s(w=>{const k=w[u];return k?{...w,[u]:{...k,activeTabId:a}}:w})};function b(a,w,k,j,$){let C=w||"editor",N=k||a.split("/").pop()||a;return a==="metadata"?(C="custom",N="Details"):a==="binary"?(C="binary",N="Binary View"):a==="trash"&&(C="custom",N="Trash"),w||(a.startsWith("shell-")?(C="terminal",N="Terminal"):a.endsWith(".png")||a.endsWith(".jpg")||a.endsWith(".jpeg")),{id:a,path:a,label:N,type:C,icon:C==="terminal"?"terminal":void 0,intent:j,...$}}function I(a,w,k,j,$){x(C=>C.find(N=>N.id===a&&N.intent===j)?C:[...C.filter(N=>N.id!==a),b(a,w,k,j,$)]),v(a),!a.startsWith("shell-")&&a!=="metadata"&&a!=="binary"&&a!=="trash"&&Ne(a).then(C=>{h(N=>({...N,[a]:C}))}).catch(()=>{})}const M=(a,w)=>{const k=`pane-${Date.now()}`,j=n[u];let $;if(w&&($=j==null?void 0:j.tabs.find(C=>C.id===w)),!$){const C=j==null?void 0:j.activeTabId;$=j==null?void 0:j.tabs.find(N=>N.id===C)}s(C=>({...C,[k]:{tabs:$?[$]:[],activeTabId:$?$.id:""}})),r(C=>{const N=g=>g.type==="leaf"?g.paneId===u?{type:"branch",direction:a,size:50,children:[g,{type:"leaf",paneId:k}]}:g:{...g,children:[N(g.children[0]),N(g.children[1])]};return N(C)}),c(k)},f=a=>{a==="root"&&o.type==="leaf"||(r(w=>{const k=$=>{if($.type==="leaf")return $.paneId===a?null:$;const C=k($.children[0]),N=k($.children[1]);return!C&&!N?null:C?N?{...$,children:[C,N]}:C:N};return k(w)||{type:"leaf",paneId:"root"}}),s(w=>{const k={...w};return delete k[a],k}),u===a&&c("root"))},P=(a,w)=>{r(k=>{const j=$=>$===a?{...$,size:w}:$.type==="branch"?{...$,children:[j($.children[0]),j($.children[1])]}:$;return j(k)})};return i.useEffect(()=>{const w=new URLSearchParams(window.location.search).get("profileId");if(w){const k={panes:n,layout:o,activePaneId:u};localStorage.setItem(`workspace_state_${w}`,JSON.stringify(k))}},[n,o,u]),i.useEffect(()=>{const w=new URLSearchParams(window.location.search).get("profileId");if(w)try{const k=localStorage.getItem(`workspace_state_${w}`);if(k){const j=JSON.parse(k);if(j.panes){const $={};for(const[C,N]of Object.entries(j.panes)){const g=N;if(g.files&&Array.isArray(g.files)){const V=g.files.map(Y=>b(Y));let q=g.activeFile||"";V.find(Y=>Y.id===q)||(q=V.length>0?V[V.length-1].id:""),$[C]={tabs:V,activeTabId:q}}else if(g.tabs&&Array.isArray(g.tabs)){const V=g.tabs.map(q=>({...q,dirty:!1}));$[C]={...g,tabs:V}}else $[C]={tabs:[],activeTabId:""}}s($)}j.layout&&r(j.layout),j.activePaneId&&c(j.activePaneId)}}catch(k){console.error("Failed to restore workspace state",k)}},[]),{panes:n,setPanes:s,layout:o,setLayout:r,activePaneId:u,setActivePaneId:c,openTabs:y,setOpenTabs:x,activeTabId:l,setActiveTab:v,openFile:I,splitPane:M,closePane:f,handleLayoutResize:P,fileMetas:d,setFileMetas:h}}function Gt(){const{t}=B(),{showAuthChooser:n,setShowAuthChooser:s,showLogin:o,setShowLogin:r,showTokenInput:u,setShowTokenInput:c,login:d,setToken:h}=pt(),[l,_]=i.useState(""),[y,x]=i.useState("");return!n&&!o&&!u?null:e.jsxs(e.Fragment,{children:[n&&e.jsx("div",{className:"login-overlay",children:e.jsxs("div",{className:"login-box",children:[e.jsx("h3",{children:t("auth_not_authenticated","Not Authenticated")}),e.jsx("p",{children:t("auth_required_msg","You need to sign in or provide an access key to continue.")}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[e.jsxs("button",{className:"btn",onClick:()=>{s(!1),r(!0)},children:[t("open")," (",t("password","password"),")"]}),e.jsx("button",{className:"btn",onClick:()=>{s(!1),c(!0)},children:t("auth_have_key","I have an access key")})]})]})}),o&&e.jsx("div",{className:"login-overlay",children:e.jsxs("div",{className:"login-box",children:[e.jsx("h3",{children:t("sign_in","Sign in")}),e.jsx("p",{children:t("auth_enter_password","Please enter the server password to obtain an access token.")}),e.jsx("input",{type:"password",placeholder:t("password","Password"),value:l,onChange:v=>_(v.target.value),onKeyDown:v=>{v.key==="Enter"&&d(l).catch(b=>alert(t("login_failed","Login failed")+": "+((b==null?void 0:b.message)||b)))}}),e.jsxs("div",{style:{marginTop:8},children:[e.jsx("button",{className:"btn",onClick:async()=>{try{await d(l)}catch(v){alert(t("login_failed","Login failed")+": "+((v==null?void 0:v.message)||v))}},children:t("open")}),e.jsx("button",{className:"btn link",style:{marginLeft:8},onClick:()=>{r(!1),s(!0)},children:t("back","Back")})]})]})}),u&&e.jsx("div",{className:"login-overlay",children:e.jsxs("div",{className:"login-box",children:[e.jsx("h3",{children:t("auth_enter_token","Enter Access Token")}),e.jsx("p",{children:t("auth_token_msg","The server requires an access token. Paste it here to continue.")}),e.jsx("input",{type:"text",placeholder:t("token","token"),value:y,onChange:v=>x(v.target.value),onKeyDown:v=>{if(v.key==="Enter")try{h(y.trim())}catch(b){alert(t("token_failed","Failed to store token")+": "+((b==null?void 0:b.message)||b))}}}),e.jsxs("div",{style:{marginTop:8},children:[e.jsx("button",{className:"btn",onClick:async()=>{try{h(y.trim())}catch(v){alert(t("token_failed","Failed to store token")+": "+((v==null?void 0:v.message)||v))}},children:t("use_token","Use token")}),e.jsx("button",{className:"btn link",style:{marginLeft:8},onClick:()=>{c(!1),s(!0)},children:t("back","Back")})]})]})})]})}const D=({name:t,className:n,title:s,size:o=16})=>{if(!t)return null;const r=`#${t}`;return e.jsxs("svg",{className:n,width:o,height:o,"aria-hidden":s?void 0:"true",role:s?"img":void 0,children:[s?e.jsx("title",{children:s}):null,e.jsx("use",{href:r})]})},Xt={moon:"icon-moon",md:"icon-markdown",jpeg:"icon-image",mjs:"icon-js",info:"icon-info",plus:"icon-plus",screenshot:"icon-screenshot",link:"icon-link",jpg:"icon-image",trash:"icon-trash",txt:"icon-text",js:"icon-js",cfg:"icon-settings",shell:"icon-terminal",stop:"icon-stop",copy:"icon-copy",paste:"icon-paste",dir:"icon-folder",pdf:"icon-pdf",markdown:"icon-markdown",tar:"icon-archive",gz:"icon-archive",settings:"icon-settings",user:"icon-user",server:"icon-server","flag-es":"icon-flag-es",png:"icon-image",x:"icon-close",sh:"icon-terminal",search:"icon-search",cr:"icon-chevron-right",minus:"icon-minus",log:"icon-log","flag-de":"icon-flag-de",bz2:"icon-archive",download:"icon-download",refresh:"icon-refresh",cl:"icon-chevron-left",sun:"icon-sun",close:"icon-close","flag-gb":"icon-flag-gb",gif:"icon-image",zip:"icon-archive",json:"icon-json",upload:"icon-upload",warn:"icon-warning",run:"icon-play","flag-fr":"icon-flag-fr",svg:"icon-image",home:"icon-home",up:"icon-up",view:"icon-view"};function ae(t){if(t)return Xt[t.toLowerCase()]}function ft(t,n){if(n){const s=n.lastIndexOf(".");if(s>=0&&s<n.length-1){const o=n.slice(s+1).toLowerCase();return ae(o)}}}function ne(t){if(!t||t<=0)return"0 B";const n=1024,s=n*1024,o=s*1024;return t>=o?`${(t/o).toFixed(2)} GB`:t>=s?`${(t/s).toFixed(2)} MB`:t>=n?`${(t/n).toFixed(2)} KB`:`${t} B`}function Qt({onClose:t,health:n,lastHealthAt:s}){const{t:o}=B();return e.jsx("div",{className:"about-backdrop",onClick:t,children:e.jsxs("div",{className:"about-modal",onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h3",{style:{margin:0},children:o("app_title","MLCRemote")}),e.jsx("button",{"aria-label":o("close"),title:o("close"),onClick:t,style:{background:"transparent",border:"none",cursor:"pointer"},children:e.jsx(D,{name:"icon-close",size:16})})]}),e.jsxs("div",{style:{marginBottom:8},children:[o("copyright")," © ",new Date().getFullYear()," Michael Lechner"]}),e.jsxs("div",{style:{marginBottom:8},children:[o("version"),": ",n?`${n.status}@${n.version}`:o("unknown")]}),n&&e.jsxs("div",{style:{maxHeight:"40vh",overflow:"auto",background:"#0b0b0b",color:"white",padding:12,borderRadius:6},children:[e.jsxs("div",{children:[e.jsxs("strong",{children:[o("host"),":"]})," ",n.host]}),e.jsxs("div",{children:[e.jsxs("strong",{children:[o("pid"),":"]})," ",n.pid]}),e.jsxs("div",{children:[e.jsxs("strong",{children:[o("version"),":"]})," ",n.version]}),e.jsxs("div",{children:[e.jsxs("strong",{children:[o("app_memory"),":"]})," ",ne(n.go_alloc_bytes)," (",o("alloc"),") / ",ne(n.go_sys_bytes)," (",o("sys"),")"]}),e.jsxs("div",{children:[e.jsxs("strong",{children:[o("system_memory"),":"]})," ",ne((n.sys_mem_total_bytes||0)-(n.sys_mem_free_bytes||0))," / ",ne(n.sys_mem_total_bytes||0)," ",o("used")]}),e.jsxs("div",{children:[e.jsxs("strong",{children:[o("cpu"),":"]})," ",Math.round((n.cpu_percent||0)*10)/10,"%"]}),e.jsxs("div",{style:{marginTop:8},children:[e.jsxs("strong",{children:[o("server_time"),":"]})," ",n.server_time]}),e.jsxs("div",{style:{marginTop:4},children:[e.jsxs("strong",{children:[o("timezone"),":"]})," ",n.timezone]}),e.jsxs("div",{className:"muted",style:{marginTop:8,fontSize:12},children:[o("last_refresh"),": ",s?new Date(s).toLocaleString():"n/a"]})]})]})})}const U=t=>"icon-"+t,Mh=()=>"icon-folder",gt=({entry:t,depth:n,onToggle:s,onSelect:o,onOpen:r,selectedPath:u,showHidden:c,onContextMenu:d,refreshSignal:h})=>{const[l,_]=i.useState(null),[y,x]=i.useState(!1),[v,b]=i.useState(!1);i.useEffect(()=>{y&&(_(null),I())},[c]),i.useEffect(()=>{h&&h.path===t.path&&y&&I()},[h]);const I=async()=>{b(!0);try{const f=await Ze(t.path,{showHidden:c});f.sort((P,p)=>P.isDir===p.isDir?P.name.localeCompare(p.name):P.isDir?-1:1),_(f)}catch(f){console.error(f)}b(!1)},M=async f=>{y?x(!1):(x(!0),l||I())};return t.path,e.jsxs("div",{className:"tree-item-container",children:[e.jsxs("div",{className:`tree-node ${u===t.path?"selected":""}`,style:{paddingLeft:n*12+8},onClick:f=>{f.stopPropagation(),o(t.path,t.isDir),t.isDir&&M(t.path)},onDoubleClick:f=>{f.stopPropagation(),!t.isDir&&r&&r(t.path)},onContextMenu:f=>{f.preventDefault(),f.stopPropagation(),d==null||d(t,f.clientX,f.clientY)},children:[e.jsx("div",{className:"tree-arrow",children:t.isDir&&e.jsx("div",{className:y?"rotate-90":"",children:e.jsx(D,{name:U("chevron-right"),size:14})})}),e.jsx("div",{className:"tree-icon",children:e.jsx(D,{name:t.isDir?U("folder"):ft(void 0,t.name)||ae(t.name.split(".").pop()||"")||U("view")})}),e.jsx("div",{className:"tree-label",children:t.name})]}),y&&e.jsxs("div",{children:[v&&e.jsx("div",{style:{paddingLeft:(n+1)*12+8,fontStyle:"italic",opacity:.5},children:"Loading..."}),l&&l.map(f=>e.jsx(gt,{entry:f,depth:n+1,onToggle:s,onSelect:o,onOpen:r,selectedPath:u,showHidden:c,onContextMenu:d,refreshSignal:h},f.path))]})]})};function en({selectedPath:t,onSelect:n,onOpen:s,root:o="/",showHidden:r,onContextMenu:u,refreshSignal:c}){const{t:d}=B(),[h,l]=i.useState([]),[_,y]=i.useState(!1),x=()=>{y(!0),Ze(o,{showHidden:r}).then(v=>{v.sort((b,I)=>b.isDir===I.isDir?b.name.localeCompare(I.name):b.isDir?-1:1),l(v)}).catch(console.error).finally(()=>y(!1))};return i.useEffect(()=>{x()},[o,r]),i.useEffect(()=>{c&&c.path===o&&x()},[c]),_?e.jsxs("div",{className:"muted",style:{padding:10},children:[d("loading"),"..."]}):e.jsx("div",{className:"file-tree",style:{paddingBottom:20},children:h.map(v=>e.jsx(gt,{entry:v,depth:0,onToggle:()=>{},onSelect:n,onOpen:s,selectedPath:t,showHidden:r,onContextMenu:u,refreshSignal:c},v.path))})}function tn(t){const{t:n}=B(),{isExpanded:s=!0,onToggleSidebar:o,onActivityChange:r,onOpenTerminal:u,onOpenTrash:c,onToggleSettings:d}=t,[h,l]=i.useState("files"),_=y=>{h==="files"&&s?o(!1):(l("files"),s||o(!0))};return e.jsxs("div",{className:"activity-bar",style:{display:"flex",flexDirection:"column",width:48,background:"var(--bg-activity)",height:"100%",borderRight:"1px solid var(--border)",padding:"8px 0",alignItems:"center"},children:[e.jsx("div",{className:`activity-icon ${h==="files"&&s?"active":""}`,onClick:()=>_(),title:"Explorer",children:e.jsx(D,{name:U("folder"),size:24})}),t.quickTasks.map((y,x)=>e.jsx("div",{"mlc-test":"a",className:"activity-icon",onClick:()=>t.onRunTask(y),title:y.name,children:e.jsx("div",{style:{color:y.color,display:"flex"},children:e.jsx(D,{name:"icon-"+y.icon,size:24})})},x)),(t.quickTasks===void 0||t.quickTasks.length===0)&&e.jsx("div",{style:{fontSize:8,opacity:.3},title:"No tasks",children:"."}),e.jsx("div",{className:"activity-icon",onClick:()=>u(),title:n("new_terminal"),children:e.jsx(D,{name:U("shell")||"icon-shell",size:24})}),e.jsx("div",{className:"activity-icon",onClick:()=>c(),title:n("trash"),children:e.jsx(D,{name:"icon-trash",size:24})}),e.jsx("div",{style:{flex:1}}),e.jsx("div",{className:`activity-icon ${h==="settings"?"active":""}`,onClick:()=>d(),title:"Settings",children:e.jsx(D,{name:U("settings"),size:24})})]})}function nn(t){const{t:n}=B(),{showHidden:s,selectedPath:o,onSelect:r,root:u="/",onRefresh:c,onOpen:d,onContextMenu:h,refreshSignal:l}=t,[_,y]=i.useState(!1),[x,v]=i.useState(!1),b=f=>{f.preventDefault(),y(!0)},I=f=>{f.preventDefault(),y(!1)},M=async f=>{if(f.preventDefault(),y(!1),f.dataTransfer.files&&f.dataTransfer.files.length>0){v(!0);try{const P=Array.from(f.dataTransfer.files).map(p=>ht(u,p));await Promise.all(P),c&&c()}catch(P){console.error("Upload failed",P),alert(n("status_failed"))}finally{v(!1)}}};return e.jsxs("div",{className:"side-panel",style:{display:"flex",flexDirection:"column",height:"100%",background:"var(--bg-sidebar)",minWidth:0,position:"relative"},onDragOver:b,onDragLeave:I,onDrop:M,children:[_&&e.jsx("div",{style:{position:"absolute",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",zIndex:10,backdropFilter:"blur(2px)"},children:e.jsx("div",{style:{pointerEvents:"none",fontWeight:"bold"},children:n("drop_to_upload")})}),x&&e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:4,background:"var(--accent)",zIndex:11,animation:"pulse 1s infinite"}}),e.jsxs("div",{className:"panel-title",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 16px",height:35,fontSize:11,fontWeight:700,color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.05em"},children:[e.jsx("span",{children:"EXPLORER"}),e.jsx("div",{style:{display:"flex",gap:4},children:c&&e.jsx("button",{className:"icon-btn",title:"Refresh",onClick:c,children:e.jsx(D,{name:U("refresh")||"icon-refresh",size:14})})})]}),e.jsx("div",{className:"file-tree-container",style:{flex:1,overflow:"auto"},children:e.jsx(en,{root:u,showHidden:s,selectedPath:o,onSelect:r,onOpen:d,onContextMenu:h,refreshSignal:l})})]})}function sn({autoOpen:t,showHidden:n,onToggleAutoOpen:s,onToggleShowHidden:o,showLogs:r,onToggleLogs:u,hideMemoryUsage:c,onToggleHideMemoryUsage:d,onClose:h,onLanguageChange:l,maxEditorSize:_,onMaxFileSizeChange:y,uiMode:x,onToggleUiMode:v}){const{t:b,i18n:I}=B(),[M,f]=Q.useState(c),P=a=>{I.changeLanguage(a),l==null||l(a)},p=[{code:"en",name:"English"},{code:"de",name:"Deutsch"},{code:"es",name:"Español"},{code:"fr",name:"Français"}];return e.jsx("div",{style:{position:"absolute",right:12,top:40,zIndex:5e3},children:e.jsxs("div",{style:{width:320,background:"var(--bg)",border:"1px solid var(--muted)",borderRadius:6,boxShadow:"0 6px 20px rgba(0,0,0,0.12)",padding:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("strong",{children:b("settings")}),e.jsx("button",{"aria-label":b("close"),title:b("close"),onClick:h,style:{background:"transparent",border:"none",cursor:"pointer"},children:e.jsx(D,{name:U("close"),size:16})})]}),e.jsxs("div",{style:{marginTop:12},children:[e.jsx("label",{style:{fontSize:11,fontWeight:600,textTransform:"uppercase",color:"var(--text-muted)",display:"block",marginBottom:8,letterSpacing:"0.05em"},children:b("language")}),e.jsx("div",{style:{display:"flex",gap:8,marginTop:4},children:p.map(a=>{const w=I.language===a.code||a.code==="en"&&!I.language,k=a.code==="en"?"gb":a.code;return e.jsx("button",{onClick:()=>P(a.code),title:a.name,style:{display:"flex",alignItems:"center",justifyContent:"center",padding:6,background:w?"var(--bg-select)":"var(--bg-panel)",border:w?"1px solid var(--accent)":"1px solid var(--border)",borderRadius:6,cursor:"pointer",transition:"all 0.2s",opacity:w?1:.7},onMouseOver:j=>{w||(j.currentTarget.style.opacity="1")},onMouseOut:j=>{w||(j.currentTarget.style.opacity="0.7")},children:e.jsx(D,{name:`icon-flag-${k}`,size:24})},a.code)})})]}),e.jsx("div",{style:{marginTop:12},children:e.jsxs("label",{style:{fontSize:13},children:[e.jsx("input",{type:"checkbox",checked:t,onChange:a=>s(a.target.checked)})," ",b("auto_open_files","Auto open files")]})}),e.jsx("div",{style:{marginTop:8},children:e.jsxs("label",{style:{fontSize:13},children:[e.jsx("input",{type:"checkbox",checked:n,onChange:a=>o(a.target.checked)})," ",b("show_hidden_files","Show hidden files")]})}),e.jsx("div",{style:{marginTop:8},children:e.jsxs("label",{style:{fontSize:13},children:[e.jsx("input",{type:"checkbox",checked:r,onChange:a=>u(a.target.checked)})," ",b("show_server_logs","Show server logs")]})}),e.jsx("div",{style:{marginTop:8},children:e.jsxs("label",{style:{fontSize:13},children:[e.jsx("input",{type:"checkbox",checked:M,onChange:a=>{f(a.target.checked),d(a.target.checked)}})," ",b("hide_memory_usage","Hide memory usage gauge")]})}),e.jsxs("div",{style:{marginTop:12,borderTop:"1px solid var(--border)",paddingTop:8},children:[e.jsx("strong",{style:{fontSize:12,color:"var(--text-muted)"},children:b("editor_settings","Editor Settings")}),e.jsxs("div",{style:{marginTop:6,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("label",{style:{fontSize:13},title:b("max_file_size_tooltip","Files larger than this (MB) will open in read-only mode"),children:b("max_file_size","Max File Size (MB)")}),e.jsx("input",{type:"number",min:"0.1",step:"0.5",style:{width:60,background:"var(--bg-panel)",border:"1px solid var(--border)",color:"var(--text)",borderRadius:4,padding:"2px 4px"},value:((_||parseInt(localStorage.getItem("mlc_max_editor_size")||"1048576"))/1024/1024).toFixed(1),onChange:a=>{const w=parseFloat(a.target.value);if(w>0){const k=Math.floor(w*1024*1024);localStorage.setItem("mlc_max_editor_size",k.toString()),y==null||y(k)}}})]})]})]})})}function Ve({x:t,y:n,items:s,onClose:o}){const r=i.useRef(null);i.useEffect(()=>{function d(h){r.current&&!r.current.contains(h.target)&&o()}return window.addEventListener("mousedown",d),window.addEventListener("scroll",o,!0),window.addEventListener("resize",o),()=>{window.removeEventListener("mousedown",d),window.removeEventListener("scroll",o,!0),window.removeEventListener("resize",o)}},[o]);const[u,c]=i.useState({x:t,y:n});return i.useLayoutEffect(()=>{if(r.current){const d=r.current.getBoundingClientRect();let h=t,l=n;h+d.width>window.innerWidth&&(h=window.innerWidth-d.width-8),l+d.height>window.innerHeight&&(l=window.innerHeight-d.height-8),c({x:h,y:l})}},[t,n]),e.jsx("div",{ref:r,style:{position:"fixed",left:u.x,top:u.y,background:"var(--panel)",border:"1px solid var(--border)",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",borderRadius:6,padding:4,zIndex:99999,minWidth:160,display:"flex",flexDirection:"column"},onContextMenu:d=>{d.preventDefault(),o()},children:s.map((d,h)=>d.separator?e.jsx("div",{style:{height:1,background:"var(--border)",margin:"4px 0"}},h):e.jsxs("button",{className:"context-menu-item",onClick:()=>{o(),d.action()},style:{display:"flex",alignItems:"center",gap:8,padding:"6px 10px",border:"none",background:"transparent",color:d.danger?"var(--danger)":"var(--text)",cursor:"pointer",textAlign:"left",borderRadius:4,fontSize:13},onMouseEnter:l=>l.currentTarget.style.background=d.danger?"rgba(239,68,68,0.1)":"var(--bg)",onMouseLeave:l=>l.currentTarget.style.background="transparent",children:[d.icon&&e.jsx("span",{style:{width:16,display:"flex"},children:d.icon}),d.label]},h))})}function on(){const{t}=B(),[n,s]=i.useState(null),[o,r]=i.useState(!1),u=i.useCallback(async()=>{r(!0);try{const h=await J("/api/trash/recent");if(!h.ok)throw new Error("fetch failed");const l=await h.json();Array.isArray(l)&&l.length>0?s(l[0]):s(null)}catch(h){console.warn("Failed to fetch trash",h)}finally{r(!1)}},[]);if(i.useEffect(()=>{u();const h=setInterval(u,1e4);return()=>clearInterval(h)},[u]),o&&!n)return e.jsx("div",{className:"muted",children:t("loading_trash")});if(!n)return e.jsx("div",{className:"muted",children:t("trash_empty")});const c=n.originalPath.split("/").pop()||n.originalPath,d=ft(void 0,c)||ae(c.split(".").pop()||"")||"icon-trash";return e.jsxs("div",{style:{padding:12},children:[e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx(D,{name:d,size:20}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{fontWeight:600},children:c}),e.jsx("div",{className:"muted",style:{fontSize:12},children:new Date(n.deletedAt).toLocaleString()})]})]}),e.jsxs("div",{style:{marginTop:12},children:[e.jsxs("div",{className:"muted",children:[t("original_path"),": ",n.originalPath]}),e.jsxs("div",{className:"muted",children:[t("trash_path"),": ",n.trashPath]})]}),e.jsxs("div",{style:{marginTop:12},children:[e.jsx("button",{className:"btn",disabled:!0,children:t("undo_coming")}),(()=>{const h=Oe(),l=`/api/file?path=${encodeURIComponent(n.trashPath)}`+(h?`&token=${encodeURIComponent(h)}`:"");return e.jsx("a",{className:"btn",style:{marginLeft:8},href:l,download:c,children:t("download")})})()]})]})}const rn=new Set(["txt","md","markdown","yaml","yml","json","js","ts","jsx","tsx","html","css","env","ini","cfg","conf","csh","gitignore","dockerfile","sql"]),an=new Set(["zip","gz","tar","rar","exe","dll","so","bin","jpg","jpeg","png","gif","webp","pdf"]);function Ye(t){const n=t.split("/"),s=n[n.length-1]||"",o=s.lastIndexOf(".");return o===-1?"":s.slice(o+1).toLowerCase()}function _t(t){const n=Ye(t);return!n||rn.has(n)?!0:!an.has(n)}async function cn(t){if(!t)return{mime:"application/octet-stream",isText:!1,ext:""};try{const n=`?path=${encodeURIComponent(t)}`,s=await J(`/api/filetype${n}`);if(!s.ok)throw new Error("probe failed");return await s.json()}catch{const s=Ye(t);return{mime:"application/octet-stream",isText:_t(t),ext:s}}}function ln(t){if(!t)return null;const n=t.split("/"),o=(n[n.length-1]||"").toLowerCase();return o===".bashrc"||o==="bashrc"||o===".bash_profile"||o===".profile"?"bashrc":o===".zshrc"||o==="zshrc"?"zshrc":o===".bash_history"||o==="bash_history"?"bash_history":o==="makefile"?"makefile":o==="dockerfile"?"dockerfile":o==="nginx.conf"||o==="nginx.conf.default"?"conf":null}function dn(t){const n=Ke.languages;switch(t){case"jsx":return n.jsx;case"tsx":return n.tsx;case"java":return n.java;case"ini":case"gitconfig":case"editorconfig":case"conf":case"config":return n.ini;case"js":return n.javascript;case"ts":return n.typescript;case"go":return n.go;case"php":return n.php;case"json":return n.json;case"yaml":case"yml":return n.yaml;case"toml":return n.toml||n.markup;case"md":case"markdown":return n.markdown;case"c":case"h":return n.c;case"cpp":case"hpp":return n.cpp;case"py":return n.python;case"makefile":return n.makefile;case"bashrc":case"zshrc":case"bash_history":case"profile":return n.bash;case"sh":case"bash":return n.bash;case"xml":case"xml-doc":return n["xml-doc"];case"html":case"htm":return n.markup;case"css":case"sass":case"scss":return n.sass;case"sql":return n.sql;default:return n.javascript}}function Ee(t){switch(t){case"js":case"jsx":return"javascript";case"ts":case"tsx":return"typescript";case"go":return"go";case"php":return"php";case"json":return"json";case"yaml":case"yml":return"yaml";case"toml":return"toml";case"ini":case"gitconfig":case"editorconfig":case"conf":case"config":return"ini";case"md":case"markdown":return"markdown";case"c":case"h":return"c";case"cpp":case"cxx":case"c++":case"hpp":return"cpp";case"py":return"python";case"makefile":return"makefile";case"dockerfile":return"dockerfile";case"sh":case"bash":case"csh":return"bash";case"bashrc":case"zshrc":case"bash_history":case"profile":return"bash";case"xml":case"xml-doc":return"xml-doc";case"html":case"htm":return"markup";case"sass":case"scss":return"sass";case"sql":return"sql";case"less":case"css":return"css";default:return"text"}}function lt(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function un(t,n){try{const s=dn(n),o=Ee(n);return s?Ke.highlight(t,s,o):lt(t)}catch(s){return console.warn("Prism highlight failed",s),lt(t)}}function hn({content:t,setContent:n,origContent:s,ext:o,alias:r,textareaId:u,readOnly:c}){const{t:d}=B(),h=i.useRef(null),l=i.useRef(null);return i.useEffect(()=>{var y;const _=r||Ee(o);l.current&&l.current.setAttribute("data-grammar",_),h.current&&h.current.setAttribute("data-grammar",_);try{const x=(y=l.current)==null?void 0:y.querySelector("code");x&&Ke.highlightElement(x)}catch{}},[r,t,o]),i.useEffect(()=>{h.current&&l.current&&(l.current.scrollTop=h.current.scrollTop,l.current.scrollLeft=h.current.scrollLeft)},[t]),e.jsxs("div",{className:"editor-edit-area",children:[e.jsx("pre",{"aria-hidden":!0,className:`highlight-wrap language-${r||Ee(o)}`,"data-grammar":r||Ee(o),ref:_=>{l.current=_},children:e.jsx("code",{className:`language-${r||Ee(o)}`,dangerouslySetInnerHTML:{__html:un(t||"",o)}})}),e.jsx("textarea",{ref:h,className:"textarea",wrap:"off",value:t,name:u||"editor",id:u,"data-grammar":r,onChange:_=>n(_.target.value),onScroll:()=>{h.current&&l.current&&(l.current.scrollTop=h.current.scrollTop,l.current.scrollLeft=h.current.scrollLeft)},placeholder:c?d("empty_file_readonly","Empty file (Read Only)"):d("empty_file","Empty file"),spellCheck:!1,autoCorrect:"off",autoCapitalize:"off",autoComplete:"off",readOnly:c})]})}function mn({path:t,onDimensions:n}){const{t:s}=B(),o=Oe(),r=_e(`/api/file?path=${encodeURIComponent(t)}${o?`&token=${encodeURIComponent(o)}`:""}`),[u,c]=i.useState(null),d=i.useRef(null);return e.jsxs("div",{style:{marginTop:8},children:[e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",overflow:"hidden"},children:e.jsx("img",{ref:d,src:r,alt:t.split("/").pop(),style:{maxWidth:"100%",maxHeight:"80vh",objectFit:"contain",borderRadius:6,boxShadow:"0 2px 8px rgba(0,0,0,0.4)"},onLoad:()=>{try{const h=d.current;if(h&&h.naturalWidth&&h.naturalHeight){c({w:h.naturalWidth,h:h.naturalHeight});try{n&&n(h.naturalWidth,h.naturalHeight)}catch{}}}catch{}}})}),e.jsxs("div",{style:{marginTop:8,display:"flex",gap:8,alignItems:"center"},children:[e.jsx("a",{className:"link",href:r,download:t.split("/").pop(),children:s("download")}),u?e.jsxs("span",{className:"muted",style:{marginLeft:8},children:[u.w," × ",u.h]}):null]})]})}const pn=i.lazy(()=>ge(()=>import("./PdfPreview-CMjkD-yP.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57]),import.meta.url));function fn({path:t}){const{t:n}=B();return e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"muted",children:n("loading_pdf")}),children:e.jsx(pn,{path:t})})}const gn=i.lazy(()=>ge(()=>import("./ShellView-cA8sWHF0.js"),__vite__mapDeps([58,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,59,54,55,52,53,56,57]),import.meta.url)),_n=i.lazy(()=>ge(()=>import("./MarkdownPreview-CKEzdQXT.js"),__vite__mapDeps([60,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81]),import.meta.url)),yn=i.lazy(()=>ge(()=>import("./ArchiveViewer-gfLwUr8B.js"),__vite__mapDeps([82,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57]),import.meta.url)),xn={name:"Shell",priority:100,matches:t=>!!(t.path&&t.path.startsWith("shell-")),view:({path:t})=>e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"muted",children:"Loading shell…"}),children:e.jsx(gn,{path:t})}),isEditable:!1},vn={name:"Directory",priority:90,matches:t=>!!(t.meta&&t.meta.isDir),view:({path:t,origContent:n})=>e.jsxs("div",{style:{padding:12},children:[e.jsxs("div",{style:{fontWeight:600},children:["Directory: ",t]}),e.jsxs("div",{className:"muted",style:{marginTop:6},children:[n?n.split(`
`).length:"0"," entries"]}),e.jsx("pre",{style:{marginTop:8,maxHeight:240,overflow:"auto",padding:8,background:"var(--panel)"},children:n})]}),isEditable:!1},wn={name:"PDF",priority:80,matches:t=>t.probe&&t.probe.mime==="application/pdf"||!!t.path&&t.path.toLowerCase().endsWith(".pdf"),view:({path:t})=>e.jsx(fn,{path:t}),isEditable:!1},bn={name:"Image",priority:70,matches:t=>{if(t.probe&&t.probe.mime&&t.probe.mime.startsWith("image/"))return!0;if(t.path){const n=t.path.toLowerCase();return n.endsWith(".png")||n.endsWith(".jpg")||n.endsWith(".jpeg")||n.endsWith(".gif")||n.endsWith(".svg")||n.endsWith(".webp")}return!1},view:({path:t,onDimensions:n})=>e.jsx(mn,{path:t,onDimensions:n}),isEditable:!1},jn={name:"Archive",priority:65,matches:t=>{if(!t.path)return!1;const n=t.path.toLowerCase();return n.endsWith(".zip")||n.endsWith(".tar")||n.endsWith(".tar.gz")||n.endsWith(".tgz")},view:({path:t})=>e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"muted",children:"Loading archive..."}),children:e.jsx(yn,{path:t})}),isEditable:!1},$n={name:"Markdown",priority:60,matches:t=>t.intent==="view"&&!!(t.path&&t.path.toLowerCase().endsWith(".md")),view:({content:t})=>e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"muted",children:"Loading preview..."}),children:e.jsx(_n,{content:t||""})}),isEditable:!1},kn={name:"Text",priority:50,matches:t=>t.probe&&t.probe.isText?!0:t.probe&&!t.probe.isText?!1:!!(t.path&&_t(t.path)),view:({content:t,setContent:n,origContent:s,ext:o,alias:r,textareaId:u,readOnly:c})=>e.jsx(hn,{content:t||"",setContent:n||(()=>{}),origContent:s||"",ext:o||"",alias:r,textareaId:u||"editor",readOnly:c}),isEditable:!0},Sn={name:"Binary",priority:10,matches:t=>!!(t.probe&&!t.probe.isText),view:({path:t})=>e.jsxs("div",{style:{marginTop:8,display:"flex",gap:8},children:[e.jsx("a",{className:"link",href:_e(`/api/file?path=${encodeURIComponent(t)}`),download:t.split("/").pop(),children:"Download"}),e.jsx("span",{className:"muted",children:"(Binary or unsupported file type)"})]}),isEditable:!1},yt={name:"Unsupported",priority:0,matches:()=>!0,view:({path:t})=>e.jsxs("div",{style:{padding:12},className:"muted",children:["Unsupported file type: ",t]}),isEditable:!1},Cn=[xn,vn,wn,bn,jn,$n,kn,Sn,yt].sort((t,n)=>n.priority-t.priority);function qe(t){for(const n of Cn)if(n.matches(t))return n;return yt}function En(t){return t.charCodeAt(0)===65279?{text:t.slice(1),hasBOM:!0}:{text:t,hasBOM:!1}}function Tn(t){return"\uFEFF"+t}function xt({title:t,message:n,onClose:s,onConfirm:o,confirmLabel:r,cancelLabel:u}){const{t:c}=B();return i.useEffect(()=>{const d=h=>{h.key==="Escape"&&s()};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[s]),e.jsx("div",{className:"login-overlay",onClick:s,children:e.jsxs("div",{className:"login-box",onClick:d=>d.stopPropagation(),style:{minWidth:350,maxWidth:500},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[e.jsx("h3",{style:{margin:0,fontSize:18},children:t}),e.jsx("button",{className:"link icon-btn",onClick:s,"aria-label":c("close"),children:e.jsx(D,{name:U("close"),size:16})})]}),e.jsx("div",{style:{marginBottom:24,fontSize:14,lineHeight:"1.5",color:"var(--text-muted)"},children:n}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:12},children:o?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn",onClick:s,children:u||c("cancel")}),e.jsx("button",{className:"btn primary",onClick:o,children:r||c("continue")})]}):e.jsx("button",{className:"btn",onClick:s,children:c("close")})})]})})}function Ln({path:t,onSaved:n,settings:s,reloadTrigger:o,onUnsavedChange:r,onMeta:u,intent:c,onOpen:d,customLabel:h}){const{t:l}=B(),[_,y]=i.useState(""),[x,v]=i.useState(""),[b,I]=i.useState(!1),[M,f]=i.useState(""),[P,p]=i.useState(!1),[a,w]=i.useState(null),[k,j]=i.useState(!1),[$,C]=i.useState(null),[N,g]=i.useState(null),[V,q]=i.useState(null),[Y,Me]=i.useState(null),[Je,ye]=i.useState(!1),K=i.useRef(null),ee=i.useRef(null),xe=i.useRef(null),[oe,ve]=i.useState(null),se=qe({path:t,meta:a,probe:$,intent:c}),we=se.view,F=i.useCallback(async(T=!1)=>{if(t){p(!0),f("");try{const E=await Ne(t);if(w(E),typeof u=="function"&&u(E),!T&&V&&Y&&E.modTime!==Y&&!confirm(l("confirm_reload_external","File has been modified externally. Reload?"))){p(!1);return}Me(E.modTime);const G=await cn(t);C(G);const O=qe({path:t,meta:E,probe:G,intent:c});if(E.isDir){y(""),p(!1);return}if(O.name==="Text"){const re=await Vt(t),{text:ke,hasBOM:Ie}=En(re);y(ke),v(ke),I(Ie),q(Date.now()),ye(!1)}else y(""),p(!1)}catch{$&&$.isText&&(f(l("failed_to_load","Failed to load")),ye(!0)),q(null)}finally{p(!1)}}},[t,l]),Re=(()=>{try{const T=localStorage.getItem("mlc_max_editor_size");if(T)return parseInt(T,10)}catch{}return 1024*1024})(),De=async(T,E=64*1024)=>{if(t){j(!0);try{const G=`?path=${encodeURIComponent(t)}&offset=${T}&length=${E}`,O=await J(`/api/file/section${G}`);if(!O.ok)throw new Error("section fetch failed");const re=await O.text();y(re),v(re)}catch{f(l("failed_to_load_section","Failed to load section"))}finally{j(!1)}}},$e=ln(t)||$&&$.ext||Ye(t),Fe=void 0,Pe=$&&$.ext?$.ext:"text",ce=(T=>T?"editor-"+T.replace(/[^a-z0-9_-]/gi,"-").replace(/-+/g,"-"):"editor")(t||"");i.useEffect(()=>{F()},[F]),i.useEffect(()=>{let T=!0;return(async()=>{if(!(!a||!a.isDir||!t))try{const E=await Ze(t);if(!T)return;y(""),v(E.map(G=>G.name).join(`
`))}catch{}})(),()=>{T=!1}},[a,t]),i.useEffect(()=>{o&&o>0&&F(!0)},[o,F]),i.useEffect(()=>{K.current&&ee.current&&(ee.current.scrollTop=K.current.scrollTop,ee.current.scrollLeft=K.current.scrollLeft)},[_]),i.useEffect(()=>{if(K.current&&ee.current){const T=window.getComputedStyle(ee.current),E=T.lineHeight,G=T.paddingTop,O=T.paddingBottom;E&&(K.current.style.lineHeight=E),G&&(K.current.style.paddingTop=G),O&&(K.current.style.paddingBottom=O)}},[_,t]),i.useEffect(()=>{var T;ee.current&&ee.current.setAttribute("data-grammar",Pe),K.current&&(K.current.setAttribute("data-grammar",Pe),ce&&(K.current.id=ce));try{const E=(T=ee.current)==null?void 0:T.querySelector("code");E&&Prism.highlightElement(E)}catch{}},[Pe,_,ce]),i.useEffect(()=>{if(!r||!se.isEditable)return;const T=_!==x;if(xe.current===null||xe.current!==T){try{r(t,T)}catch(E){console.warn("onUnsavedChange threw",E)}xe.current=T}},[_,x,r,t,se.isEditable]);const le=async()=>{if(t){f(l("saving","Saving..."));try{const T=b?Tn(_):_;await qt(t,T),f(l("saved","Saved")),setTimeout(()=>f(E=>E===l("saved","Saved")?"":E),1500),await F(!0),n&&n()}catch{f(l("save_failed","Save failed"))}}},Ue=async()=>{if(!t)return;const T=async()=>{f(l("reloading","Reloading..."));try{await F(!0),f(l("reloaded","Reloaded")),setTimeout(()=>f(E=>E===l("reloaded","Reloaded")?"":E),1500)}catch{f(l("reload_failed","Reload failed"))}};if(_!==x){ve({title:l("unsaved_changes_title","Unsaved Changes"),message:l("confirm_reload_unsaved","You have unsaved changes. Reloading will discard them. Continue?"),onConfirm:()=>{ve(null),T()}});return}T()};return i.useEffect(()=>{const T=E=>{(E.ctrlKey||E.metaKey)&&E.key==="s"&&(E.preventDefault(),le())};return window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)},[le]),e.jsxs("div",{className:"editor",children:[oe&&e.jsx(xt,{title:oe.title,message:oe.message,onClose:()=>ve(null),onConfirm:oe.onConfirm}),e.jsxs("div",{className:"editor-header",children:[e.jsx("strong",{children:l("editor")}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{className:"muted",children:a&&a.absPath?a.absPath:h||t||l("select_or_create")}),(a==null?void 0:a.isReadOnly)&&e.jsx("span",{className:"badge badge-error",style:{fontSize:10,padding:"1px 4px"},children:l("read_only","READ ONLY")}),c==="view"&&e.jsx("span",{className:"badge box-accent",style:{fontSize:10,padding:"1px 4px",background:"var(--accent)",color:"white",borderRadius:4},children:l("preview","PREVIEW")})]}),a&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"muted",style:{fontSize:11},children:[a.isDir?"directory":se.name,"· ",a.mode," · ",new Date(a.modTime).toLocaleString()," ",a.size?`· ${ne(a.size)}`:""]}),N&&se.name==="Image"?e.jsxs("span",{style:{fontSize:11,marginLeft:8},className:"muted",children:[N.w," × ",N.h]}):null]})]}),e.jsxs("div",{className:"actions",children:[e.jsx("button",{className:"link icon-btn",title:l("refresh"),"aria-label":l("refresh"),onClick:Ue,disabled:!t,children:e.jsx(D,{name:ae("refresh")||"icon-refresh",title:l("refresh"),size:16})}),($e==="md"||$e==="markdown")&&d&&e.jsx("button",{className:"link icon-btn",title:l(c==="view"?"edit":"preview"),onClick:()=>d(t,void 0,void 0,c==="view"?"edit":"view"),children:e.jsx(D,{name:U(c==="view"?"terminal":"view")||"view",size:16})}),se.isEditable&&_!==x&&e.jsx("button",{className:"link icon-btn",title:a!=null&&a.isReadOnly?l("read_only_file"):l("save"),"aria-label":l("save"),onClick:le,disabled:!t||(a==null?void 0:a.isReadOnly),style:a!=null&&a.isReadOnly?{opacity:.5,cursor:"not-allowed"}:{},children:e.jsx(D,{name:ae("upload")||"icon-upload",title:l("save"),size:16})})]}),a&&a.size&&a.size>Re&&se.isEditable?e.jsxs("div",{style:{marginLeft:12},children:[e.jsx("div",{className:"muted",style:{fontSize:12},children:l("file_too_large","File is large ({{size}}). Full edit disabled.",{size:ne(a.size)})}),e.jsxs("div",{style:{marginTop:6,display:"flex",gap:8},children:[e.jsx("button",{className:"btn",onClick:()=>De(0,64*1024),children:l("view_head","View head")}),e.jsx("button",{className:"btn",onClick:()=>De(Math.max(0,(a.size||0)-64*1024),64*1024),children:l("view_tail","View tail")})]}),k&&e.jsx("div",{className:"muted",children:l("loading_section","Loading section...")})]}):null,M&&e.jsx("div",{className:"muted",children:M})]}),e.jsx("div",{className:"editor-body",children:P?e.jsx("div",{className:"muted",children:l("loading")}):e.jsx(we,{path:t,content:_,setContent:y,origContent:x,ext:$e,alias:Fe,textareaId:ce,onDimensions:(T,E)=>g({w:T,h:E}),readOnly:a==null?void 0:a.isReadOnly,intent:c})})]})}function zn({path:t}){const{t:n}=B(),[s,o]=i.useState(null),[r,u]=i.useState(null);return i.useEffect(()=>{let c=!0;return(async()=>{if(!t){o(null);return}try{const d=await Ne(t);if(!c)return;o(d),u(null)}catch(d){if(!c)return;u((d==null?void 0:d.message)||n("failed_fetch_metadata")),o(null)}})(),()=>{c=!1}},[t,n]),t?e.jsxs("div",{style:{padding:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600},children:t.split("/").pop()}),e.jsx("div",{className:"muted",style:{fontSize:12},children:t})]}),e.jsx("div",{children:e.jsx("a",{className:"link",href:`/api/file?path=${encodeURIComponent(t)}`,download:t.split("/").pop(),children:n("download")})})]}),e.jsxs("div",{style:{marginTop:12},children:[r?e.jsx("div",{className:"error",children:r}):null,s?e.jsx("table",{style:{width:"100%",borderCollapse:"collapse"},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{width:160,padding:6},className:"muted",children:n("full_path")}),e.jsx("td",{style:{padding:6},children:s.path||t})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"muted",style:{padding:6},children:n("mime")}),e.jsx("td",{style:{padding:6},children:s.mime||"unknown"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"muted",style:{padding:6},children:n("size")}),e.jsx("td",{style:{padding:6},children:s.size?ne(s.size):"n/a"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"muted",style:{padding:6},children:n("mode")}),e.jsx("td",{style:{padding:6},children:s.mode||"n/a"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"muted",style:{padding:6},children:n("last_modified")}),e.jsx("td",{style:{padding:6},children:s.modTime?new Date(s.modTime).toLocaleString():"n/a"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"muted",style:{padding:6},children:n("is_dir")}),e.jsx("td",{style:{padding:6},children:s.isDir?n("yes"):n("no")})]})]})}):e.jsx("div",{className:"muted",children:n("loading_metadata")})]})]}):e.jsx("div",{style:{padding:12},className:"muted",children:n("no_file_selected")})}function Nn({path:t}){const{t:n}=B(),[s,o]=i.useState(null),[r,u]=i.useState(null);return i.useEffect(()=>{let c=!0;return(async()=>{if(!t){o(null);return}try{const d=await Ne(t);if(!c)return;o(d),u(null)}catch(d){if(!c)return;u((d==null?void 0:d.message)||n("failed_fetch_metadata")),o(null)}})(),()=>{c=!1}},[t,n]),t?e.jsxs("div",{style:{padding:24,maxWidth:600,margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16,marginBottom:32},children:[e.jsx("div",{style:{fontSize:48,opacity:.8,color:s!=null&&s.isRestricted||s!=null&&s.isReadOnly?"var(--danger)":"inherit"},children:e.jsx(D,{name:s!=null&&s.isRestricted?U("lock"):s!=null&&s.isDir?U("folder"):ae(t.split(".").pop()||"")||"icon-file",size:48})}),e.jsx("div",{style:{textAlign:"center"},children:e.jsxs("h2",{style:{margin:0,wordBreak:"break-all",display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[t.split("/").pop(),(s==null?void 0:s.isRestricted)&&e.jsx("span",{className:"badge badge-error",style:{fontSize:12,verticalAlign:"middle"},children:n("restricted","Restricted")}),(s==null?void 0:s.isReadOnly)&&!(s!=null&&s.isRestricted)&&e.jsx("span",{className:"badge badge-error",style:{fontSize:12,verticalAlign:"middle"},children:n("read_only","Read Only")})]})}),e.jsx("div",{style:{display:"flex",gap:12},children:s&&!s.isDir&&e.jsxs("a",{className:"btn primary",href:_e(`/api/file?path=${encodeURIComponent(t)}`),download:t.split("/").pop(),children:[e.jsx("span",{style:{marginRight:6,display:"inline-flex"},children:e.jsx(D,{name:"icon-download",size:16})}),n("download")]})})]}),e.jsxs("div",{className:"panel",style:{padding:16,borderRadius:8,background:"var(--bg-subtle)"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:16,borderBottom:"1px solid var(--border)",paddingBottom:8},children:n("properties","Properties")}),r?e.jsx("div",{className:"error",children:r}):null,s?e.jsx("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:13},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{width:120,padding:"8px 0",color:"var(--text-muted)"},children:n("path","Path")}),e.jsx("td",{style:{padding:"8px 0",wordBreak:"break-all"},children:s.absPath||t})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{width:120,padding:"8px 0",color:"var(--text-muted)"},children:n("type")}),e.jsx("td",{style:{padding:"8px 0"},children:s.isDir?n("directory","Directory"):s.mime||"unknown"})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"8px 0",color:"var(--text-muted)"},children:n("size")}),e.jsx("td",{style:{padding:"8px 0"},children:s.size?ne(s.size):"0 B"})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"8px 0",color:"var(--text-muted)"},children:n("mode")}),e.jsx("td",{style:{padding:"8px 0"},children:e.jsx("span",{style:{fontFamily:"monospace",background:"var(--bg)",padding:"2px 4px",borderRadius:4},children:s.mode||"n/a"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"8px 0",color:"var(--text-muted)"},children:n("last_modified")}),e.jsx("td",{style:{padding:"8px 0"},children:s.modTime?new Date(s.modTime).toLocaleString():"n/a"})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"8px 0",color:"var(--text-muted)"},children:n("is_dir")}),e.jsx("td",{style:{padding:"8px 0"},children:s.isDir?n("yes"):n("no")})]})]})}):e.jsxs("div",{className:"muted",children:[n("loading"),"..."]})]})]}):e.jsx("div",{style:{padding:24,textAlign:"center"},className:"muted",children:n("no_file_selected")})}function Rn({tabs:t,activeId:n,onActivate:s,onClose:o,onCloseOthers:r,onCloseLeft:u,onSplitRight:c,onSplitDown:d}){const{t:h}=B(),[l,_]=i.useState(null),y=i.useRef(null),x=i.useRef(null),[v,b]=i.useState(!1),[I,M]=i.useState(!1),f=()=>{const p=x.current;if(!p){b(!1),M(!1);return}b(p.scrollLeft>0),M(p.scrollWidth>p.clientWidth+p.scrollLeft+1)},P=p=>{const a=x.current;a&&(a.scrollBy({left:p,behavior:"smooth"}),setTimeout(f,220))};return i.useEffect(()=>{function p(w){y.current&&(w.target instanceof Node&&y.current.contains(w.target)||_(null))}function a(w){w.key==="Escape"&&_(null)}return document.addEventListener("click",p),document.addEventListener("keydown",a),()=>{document.removeEventListener("click",p),document.removeEventListener("keydown",a)}},[]),i.useEffect(()=>{f();const p=new ResizeObserver(()=>{f()});return x.current&&p.observe(x.current),()=>{p.disconnect()}},[t]),e.jsxs("div",{className:"tabbar",ref:y,children:[v&&e.jsx("button",{className:"tab-scroll tab-scroll-left","aria-label":h("scroll_left"),onClick:()=>P(-200),children:"◀"}),e.jsx("div",{className:"tab-scroll-area",ref:x,onScroll:f,children:t.map((p,a)=>e.jsx("div",{className:"tab-item",style:{display:"flex",alignItems:"center",gap:8,padding:"4px 8px"},children:e.jsxs("button",{className:p.id===n?"btn":"link",onClick:()=>s(p.id),onContextMenu:w=>{w.preventDefault(),w.stopPropagation(),_(a)},style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{className:"tab-icon",children:(()=>{if(p.label==="Desktop"||p.type,p.icon){const j=p.icon.startsWith("icon-")?p.icon:U(p.icon),$=p.iconColor?{color:p.iconColor}:void 0;return e.jsx("span",{style:$,className:"flex items-center",children:e.jsx(D,{name:j})})}if(p.type==="terminal"||p.path.startsWith("shell-")||p.id.startsWith("shell-"))return e.jsx(D,{name:U("terminal")});if(p.type==="custom"&&p.id==="metadata")return e.jsx(D,{name:U("view")});if(p.type==="binary")return e.jsx(D,{name:U("file")});const w=(p.path.split(".").pop()||"").toLowerCase(),k=ae(w);return e.jsx(D,{name:k})})()}),(()=>{const w=p.dirty,k=w?"tab-title tab-unsaved":"tab-title",j=p.label.length>20?p.label.slice(0,20)+"…":p.label;return e.jsx("span",{title:p.path,className:k,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:120},children:w?`*${j}`:j})})()]})},p.id))}),l!==null&&(()=>{var k;const p=t[l];if(!p)return null;let a=0,w=0;try{const j=(k=x.current)==null?void 0:k.querySelectorAll(".tab-item"),$=j?j[l]:null;if($){const C=$.getBoundingClientRect();a=C.left,w=C.bottom+4}}catch{}return e.jsx(Ve,{x:a,y:w,onClose:()=>_(null),items:[{label:h("close","Close"),action:()=>o&&o(p.id)},...t.length>1?[{label:"-",action:()=>{},separator:!0},{label:h("close_others","Close Others"),action:()=>r&&r(p.id)}]:[],...p.type==="editor"||p.type==="binary"||p.type==="terminal"?[{label:"-",action:()=>{},separator:!0},{label:h("copy_path","Copy Path"),action:()=>{navigator.clipboard.writeText(p.path)}},{label:h("copy_rel_path","Copy Relative Path"),action:()=>{navigator.clipboard.writeText(p.path)}},{label:"-",action:()=>{},separator:!0},{label:h("split_right","Split Right"),action:()=>c&&c(p.id)},{label:h("split_down","Split Down"),action:()=>d&&d(p.id)}]:[],...l>0?[{label:"-",action:()=>{},separator:!0},{label:h("close_left","Close to the Left"),action:()=>u&&u(p.id)}]:[]]})})(),I&&e.jsx("button",{className:"tab-scroll tab-scroll-right","aria-label":h("scroll_right"),onClick:()=>P(200),children:"▶"})]})}function Dn({visible:t=!0,onClose:n}){const{t:s}=B(),[,o]=i.useState(0);if(i.useEffect(()=>Ft(()=>o(d=>d+1)),[]),!t)return null;const r=Mt().slice(0,100);function u(c){const d=[],h=/([\w\/\.\-]+:\d+)/g;let l=0,_;for(;(_=h.exec(c))!==null;)_.index>l&&d.push({text:c.slice(l,_.index)}),d.push({text:_[0],cls:"log-path"}),l=_.index+_[0].length;return l<c.length&&d.push({text:c.slice(l)}),d.map((y,x)=>y.cls?e.jsx("span",{className:y.cls,children:y.text},x):e.jsx("span",{children:y.text},x))}return e.jsxs("div",{className:"log-overlay",children:[e.jsxs("div",{className:"log-header",children:[e.jsx("strong",{children:s("logs")}),e.jsxs("div",{children:[e.jsx("button",{className:"btn",onClick:()=>Ut(),children:s("clear")}),e.jsx("button",{className:"btn",onClick:()=>n&&n(),style:{marginLeft:8},children:s("close")})]})]}),e.jsx("div",{children:r.map((c,d)=>e.jsxs("div",{className:`log-entry log-level-${(c.level||"").toLowerCase()}`,children:[e.jsxs("div",{className:"log-meta",children:[c.ts," ",e.jsx("span",{className:"log-level",children:c.level})]}),e.jsx("div",{className:"log-message",children:u(c.msg)})]},d))})]})}async function Pn(t,n="mlcremote-screenshot.png"){const s=await Dt(t,{backgroundColor:null,scale:2});return new Promise(o=>{s.toBlob(r=>{if(!r){o();return}const u=URL.createObjectURL(r),c=document.createElement("a");c.href=u,c.download=n,document.body.appendChild(c),c.click(),c.remove(),URL.revokeObjectURL(u),o()},"image/png")})}class In{constructor(n=""){ot(this,"prefix");this.prefix=n}key(n){return`${this.prefix}${n}`}get(n,s,o=null){try{const r=localStorage.getItem(this.key(n)),u=s.read(r);return u===null?o:u}catch{return o}}getOrDefault(n,s,o){const r=this.get(n,s,null);return r===null?o:r}set(n,s,o){try{localStorage.setItem(this.key(n),o.write(s))}catch{}}remove(n){try{localStorage.removeItem(this.key(n))}catch{}}}const An={read:t=>t===null?null:t,write:t=>String(t)},On=new In("mlc:");function Mn({health:t,isOnline:n,hideMemoryUsage:s,lastHealthAt:o,isSidebarCollapsed:r,onToggleSidebar:u}){const{t:c}=B(),[d,h]=i.useState(new Date);return i.useEffect(()=>{const l=window.setInterval(()=>h(new Date),1e3);return()=>window.clearInterval(l)},[]),e.jsxs("div",{className:"status-bar",style:{height:24,background:"var(--bg-alt)",borderTop:"1px solid var(--border)",display:"flex",alignItems:"center",padding:"0 8px",fontSize:12,color:"var(--text-muted)",justifyContent:"space-between",userSelect:"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},title:o?`${c("last_checked","Last checked")}: ${new Date(o).toLocaleTimeString()}`:"",children:[r&&u&&e.jsx("button",{onClick:u,style:{background:"transparent",border:"none",cursor:"pointer",color:"var(--text-muted)",padding:"0 4px",display:"flex",alignItems:"center",marginRight:4},title:"Show Sidebar",children:e.jsx(D,{name:"icon-menu",size:14})}),e.jsx("span",{style:{width:8,height:8,borderRadius:4,background:t&&t.host?"#10b981":n?"#f59e0b":"#ef4444"}}),e.jsx("span",{children:t&&t.host?t.host:n?c("connecting"):c("offline","Offline")})]}),e.jsxs("span",{className:n?"ok":"err",title:c(n?"status_connected":"disconnected"),children:[e.jsx(D,{name:"icon-circle-filled",size:10})," ",n?c("online","Online"):c("offline","Offline")]}),t&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"sep"}),e.jsxs("span",{title:`PID: ${t.pid}`,children:["Host: ",t.host||"localhost"]}),t.os&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"sep"}),e.jsx("span",{title:`OS: ${t.os} ${t.distro||""}`,children:t.distro||t.os})]}),e.jsx("span",{className:"sep"}),e.jsxs("span",{title:c("connected_since","Connected since"),children:[c("connected_since","Connected since"),": ",t.start_time," ",t.timezone]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[!s&&t&&t.sys_mem_total_bytes?(()=>{const l=t.sys_mem_total_bytes||1,_=t.sys_mem_free_bytes||0,y=l-_,x=Math.round(y/l*100);return e.jsx("div",{style:{display:"flex",alignItems:"center",gap:6},title:`System Memory: ${ne(y)} / ${ne(l)} (${x}%)`,children:e.jsxs("div",{style:{width:32,height:14,background:"var(--bg-panel)",border:"1px solid var(--border)",borderRadius:3,position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{width:`${x}%`,height:"100%",background:x>85?"#ef4444":x>60?"#f59e0b":"#3b82f6",transition:"width 0.5s ease"}}),e.jsxs("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",fontSize:9,fontWeight:700,color:"var(--text)",textShadow:"0 0 2px var(--bg)"},children:[x,"%"]})]})})})():null,e.jsx("div",{title:d.toLocaleDateString(),children:new Intl.DateTimeFormat(void 0,{hour:"numeric",minute:"numeric",second:"numeric"}).format(d)})]})]})}const Fn=i.lazy(()=>ge(()=>import("./TerminalTab-hhvhRXlX.js"),__vite__mapDeps([59,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,54,55,52,53,56,57]),import.meta.url));function Un(){const{t,i18n:n}=B(),[s,o]=i.useState(()=>{try{if(!window.name||!window.name.startsWith("{"))return[];const m=JSON.parse(window.name);if(m&&Array.isArray(m.tasks))return m.tasks}catch{}return[]}),{health:r,isOnline:u,lastHealthAt:c,refreshHealth:d}=pt(),[h,l]=i.useState(0),_=i.useRef(null);i.useEffect(()=>{!_.current&&r&&l(Date.now()),_.current=r},[r]);const[y,x]=i.useState(""),[v,b]=i.useState("");i.useCallback(m=>b(m),[]);const[I,M]=i.useState(0),{settings:f,loadedSettings:P,theme:p,setTheme:a,autoOpen:w,setAutoOpen:k,showHidden:j,setShowHidden:$,showLogs:C,toggleLogs:N,hideMemoryUsage:g,toggleHideMemoryUsage:V,maxEditorSize:q,updateMaxEditorSize:Y,uiMode:Me,setUiMode:Je}=Yt(),{panes:ye,setPanes:K,layout:ee,activePaneId:xe,setActivePaneId:oe,openTabs:ve,activeTabId:se,setActiveTab:we,openFile:F,splitPane:be,closePane:Re,setFileMetas:De}=Jt(),[je,$e]=i.useState(()=>!new URLSearchParams(window.location.search).get("collapsed")),Fe=m=>{$e(m)},[Pe,vt]=i.useState(!0),[ce,le]=i.useState(!1),[Ue,T]=i.useState(void 0),[E,G]=i.useState(!1),[O,re]=i.useState(null),[ke,Ie]=i.useState({}),[Ge,wt]=i.useState({}),[Nu,bt]=i.useState(new Date),[de,Ae]=i.useState(null),jt=(m,L,z)=>{re({x:L,y:z,entry:m})},[Be,Xe]=i.useState(null);i.useMemo(()=>{const m=new URLSearchParams(window.location.search);return!!m.get("controlled")||!!m.get("theme")},[]),i.useEffect(()=>{window.parent.postMessage({type:"app-ready"},"*");const m=L=>{if(L.data){if(L.data.type==="set-theme"){const z=L.data.theme;(z==="light"||z==="dark")&&(a(z),On.set("theme",z,An),z==="light"?document.documentElement.classList.add("theme-light"):document.documentElement.classList.remove("theme-light"))}if(L.data.type==="screenshot"){const z=document.querySelector(".app"),Z=L.data.filename||"mlcremote-screenshot.png";z&&Pn(z,Z)}if(L.data.type==="run-task"){const z=L.data.command,Z=L.data.name||"Task";if(console.log("[MLCRemote] Received run-task command:",Z),z){const ue=`task-${Z.replace(/[^a-zA-Z0-9-]/g,"-")}`;Ie(me=>({...me,[ue]:"/"})),wt(me=>({...me,[ue]:{cmd:z,ts:Date.now()}}));const he={icon:L.data.icon,iconColor:L.data.color};F(ue,"terminal",Z,void 0,he)}}L.data.type==="set-tasks"&&Array.isArray(L.data.tasks)&&o(L.data.tasks)}};return window.addEventListener("message",m),()=>window.removeEventListener("message",m)},[]);const[$t,Ru]=i.useState({}),[Qe,et]=i.useState({}),kt=i.useCallback((m,L)=>{et(z=>({...z,[m]:L}))},[]),tt=i.useCallback(async()=>{await d()},[d]);i.useEffect(()=>{const m=window.setInterval(()=>bt(new Date),1e3);return()=>window.clearInterval(m)},[]);const[St,Ct]=i.useState(null),Se=(m,L=0)=>{if(m.type==="leaf")return e.jsx(Ce,{id:`pane-${m.paneId}`,order:1,minSize:10,style:{display:"flex",flexDirection:"column"},children:Et(m.paneId)});const z=m.direction==="vertical"?"horizontal":"vertical";return e.jsxs(it,{direction:z,autoSaveId:`layout-split-${L}-${m.direction}`,children:[m.children[0].type==="leaf"?Se(m.children[0],L+1):e.jsxs(Ce,{minSize:10,children:[Se(m.children[0],L+1),je&&e.jsx(He,{className:"ResizeHandleOuter group-horizontal sidebar-handle",children:e.jsx("div",{className:"ResizeHandleInner"})})]}),e.jsx(He,{className:`ResizeHandleOuter group-${z}`,children:e.jsx("div",{className:"ResizeHandleInner"})}),m.children[1].type==="leaf"?Se(m.children[1],L+1):e.jsx(Ce,{minSize:10,children:Se(m.children[1],L+1)})]})},Et=m=>{const L=ye[m];if(!L)return e.jsx("div",{className:"muted",children:"Pane not found"});const z=L.tabs.map(S=>{let R=S.label;if(S.id==="metadata"&&(R=t("details","Details")),S.type==="terminal"&&!S.id.startsWith("task-")){const A=ke[S.id];if(A){const H=A.split("/").filter(Boolean);H.length>0?(R=H[H.length-1],H.length>1&&R.includes(".")&&(R=H[H.length-1])):R="/"}}return{...S,label:R,dirty:Qe[S.id]||!1}}),Z=L.activeTabId||"",ue=S=>{oe(m),K(A=>{const H=A[m];return H?{...A,[m]:{...H,activeTabId:S}}:A});const R=L.tabs.find(A=>A.id===S);R&&R.type==="editor"&&!R.path.includes("metadata")&&R.path.split("/").filter(Boolean).pop(),R&&R.id!=="metadata"&&R.type==="editor"&&x(R.path),M(Date.now())},he=S=>{const R=ye[m];if(!R)return;const A=()=>{if(R.tabs.length===1&&R.tabs[0].id===S&&m!=="root"){Re(m);return}K(te=>{var st;const X=te[m];if(!X)return te;const pe=X.tabs.filter(Tt=>Tt.id!==S);let nt=X.activeTabId;return X.activeTabId===S&&(nt=((st=pe[0])==null?void 0:st.id)||""),{...te,[m]:{...X,tabs:pe,activeTabId:nt}}})};if(Qe[S]){Ae({title:t("unsaved_changes_title","Unsaved Changes"),message:t("confirm_close_unsaved","You have unsaved changes. Close anyway?"),confirmLabel:t("close_discard","Close & Discard"),onConfirm:()=>{Ae(null),et(te=>{const X={...te};return delete X[S],X}),A()}});return}A()},me=m===xe;return e.jsxs("div",{className:"pane-content modern-tabs",style:{height:"100%",display:"flex",flexDirection:"column",position:"relative",minWidth:0,overflow:"hidden"},onClick:()=>{me||oe(m)},children:[me&&e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:2,background:"var(--accent)",zIndex:10}}),z.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{width:"100%",minWidth:0,overflow:"hidden",flexShrink:0},onContextMenu:S=>{S.preventDefault(),oe(m),Xe({x:S.clientX,y:S.clientY})},children:e.jsx(i.Suspense,{fallback:null,children:e.jsx(Rn,{tabs:z,activeId:Z,onActivate:ue,onClose:he,onCloseOthers:S=>{K(R=>{const A=R[m];if(!A)return R;const H=A.tabs.find(te=>te.id===S);return H?{...R,[m]:{...A,tabs:[H],activeTabId:S}}:R})},onCloseLeft:S=>{K(R=>{const A=R[m];if(!A)return R;const H=A.tabs.findIndex(pe=>pe.id===S);if(H<=0)return R;const te=A.tabs.slice(H);let X=A.activeTabId;return te.map(pe=>pe.id).includes(X)||(X=S),{...R,[m]:{...A,tabs:te,activeTabId:X}}})},onSplitRight:S=>be("vertical",S),onSplitDown:S=>be("horizontal",S)})})}),e.jsx("div",{style:{flex:1,position:"relative",minHeight:0,overflow:"hidden"},children:z.map(S=>e.jsx("div",{style:{display:S.id===Z?"block":"none",height:"100%"},children:(()=>{var R;switch(S.type){case"terminal":return e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"muted",children:t("loading")}),children:e.jsx(Fn,{shell:f&&f.defaultShell||"bash",path:ke[S.id]||"",label:S.label,initialCommand:(R=Ge[S.id])==null?void 0:R.cmd,commandSignal:Ge[S.id],onExit:()=>he(S.id)})});case"custom":return S.id==="trash"?e.jsx(on,{}):S.id==="metadata"?e.jsx(Nn,{path:y}):null;case"binary":return e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"muted",children:"Loading…"}),children:e.jsx(zn,{path:St||void 0})});case"editor":default:return e.jsx(Ln,{path:S.path,settings:f||void 0,onSaved:()=>{},reloadTrigger:$t[S.id]||0,onUnsavedChange:kt,onMeta:A=>{A&&A.path&&De(H=>({...H,[S.id]:A}))},intent:S.intent,onOpen:F})}})()},S.id))})]}):e.jsxs("div",{className:"welcome-message",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--text-muted)"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"10px",opacity:.2},children:e.jsx(D,{name:U("folder"),size:48})}),e.jsx("div",{style:{opacity:.5},children:t("no_files")}),m!=="root"&&e.jsxs("button",{className:"btn link",onClick:()=>Re(m),children:[t("close")," Pane"]})]})]})};return P?e.jsxs("div",{className:`app ${p==="light"?"theme-light":"theme-dark"}`,children:[Be&&e.jsx(Ve,{x:Be.x,y:Be.y,onClose:()=>Xe(null),items:[{label:t("split_right","Split Right"),action:()=>be("vertical")},{label:t("split_down","Split Down"),action:()=>be("horizontal")}]}),e.jsxs("div",{className:"app-body",style:{display:"flex",flexDirection:"row",flex:1,overflow:"hidden",alignItems:"stretch"},children:[e.jsx("div",{style:{width:48,flexShrink:0,zIndex:1e3,height:"100%",borderRight:"1px solid var(--border)"},children:e.jsx(tn,{isExpanded:je,onToggleSidebar:Fe,quickTasks:s,onRunTask:m=>{window.postMessage({type:"run-task",...m},"*")},onOpenTerminal:()=>{const m=`shell-${Date.now()}`;Ie(L=>({...L,[m]:y||"/"})),F(m,"terminal","Terminal")},onOpenTrash:()=>{F("trash","custom","Trash"),we("trash")},onToggleSettings:()=>le(m=>!m),onActivityChange:()=>{}})}),e.jsxs(it,{direction:"horizontal",autoSaveId:"local-persistence-top",style:{flex:1,minWidth:0},children:[je&&e.jsx(Ce,{defaultSize:20,minSize:10,maxSize:40,collapsible:!0,order:1,style:{overflow:"hidden",display:"flex",flexDirection:"column"},children:e.jsx("aside",{className:"sidebar",style:{width:"100%",height:"100%",padding:0,overflow:"hidden",display:"flex",flexDirection:"column"},children:e.jsx(nn,{showHidden:j,selectedPath:y,root:v||"/",onSelect:(m,L)=>{if(x(m),L){F("metadata","custom","Details");return}(async()=>{try{const z=await Ne(m),Z=qe({path:m,meta:z});if(!w){ve.find(he=>he.id===m)?we(m):se!=="metadata"&&F("metadata","custom","Details"),tt();return}if(Z.name==="Binary"||Z.name==="Unsupported"){F("binary","binary","Binary View"),Ct(m),we("binary");return}F(m)}catch(z){Ae({title:"Broken Link",message:`Cannot open file: ${z.message||"stat failed"}`});return}})(),tt()},onOpen:m=>{F(m)},onContextMenu:jt,refreshSignal:Ue,onRefresh:()=>T({path:"/",ts:Date.now()})})})}),je&&e.jsx(He,{className:"ResizeHandleOuter group-horizontal",children:e.jsx("div",{className:"ResizeHandleInner"})}),e.jsx(Ce,{order:2,style:{display:"flex",flexDirection:"column",overflow:"hidden"},children:e.jsxs("div",{className:"main-content",style:{display:"flex",flexDirection:"column",flex:1,minHeight:0},children:[e.jsx(Gt,{}),de&&e.jsx(xt,{title:de.title,message:de.message,onClose:()=>Ae(null),onConfirm:de.onConfirm,confirmLabel:de.confirmLabel,cancelLabel:de.cancelLabel}),ce&&e.jsx(sn,{autoOpen:w,showHidden:j,onToggleAutoOpen:k,onToggleShowHidden:$,showLogs:C,onToggleLogs:N,hideMemoryUsage:g,onToggleHideMemoryUsage:V,onClose:()=>le(!1),onLanguageChange:m=>{m!==n.language&&(n.changeLanguage(m),ie({language:m}).catch(console.error))},maxEditorSize:q,onMaxFileSizeChange:Y,uiMode:Me,onToggleUiMode:Je}),Se(ee)]})})]})]}),O&&e.jsx(Ve,{x:O.x,y:O.y,onClose:()=>re(null),items:[{label:t("properties","Properties"),icon:e.jsx(D,{name:U("info")}),action:()=>{x(O.entry.path),F("metadata","custom","Details")}},...O.entry.isDir?[{label:t("upload_file","Upload File"),icon:e.jsx(D,{name:"icon-upload"}),action:()=>{const m=document.createElement("input");m.type="file",m.onchange=async L=>{const z=L.target.files[0];if(z)try{await ht(O.entry.path,z);const Z=(O.entry.path==="/"?"":O.entry.path)+"/"+z.name;x(Z),F("metadata","custom","Details"),T({path:O.entry.path,ts:Date.now()})}catch(Z){console.error(Z),alert(t("upload_failed","Upload failed"))}},m.click()}}]:[{label:t("open","Open"),icon:e.jsx(D,{name:U("terminal")}),action:()=>{x(O.entry.path),F(O.entry.path,void 0,void 0,"edit")}},{label:t("preview","Open Preview"),icon:e.jsx(D,{name:U("view")}),action:()=>{x(O.entry.path),F(O.entry.path,void 0,void 0,"view")}},{label:t("download","Download"),icon:e.jsx(D,{name:"icon-download"}),action:()=>{const m=Oe(),L=_e(`/api/file?path=${encodeURIComponent(O.entry.path)}&token=${m}&download=true`),z=document.createElement("a");z.href=L,z.download=O.entry.name,document.body.appendChild(z),z.click(),document.body.removeChild(z)}}]]}),e.jsx(Mn,{health:r,isOnline:u,hideMemoryUsage:g,lastHealthAt:c}),e.jsx(Dn,{visible:C,onClose:()=>N(!1)}),E&&e.jsx(Qt,{onClose:()=>G(!1),health:r,lastHealthAt:c})]}):null}const Bn="MLCRemote IDE",Hn="Files",Wn="Terminal",Vn="Settings",qn="Search",Kn="New File",Zn="New Folder",Yn="Rename",Jn="Save",Gn="Cancel",Xn="Theme",Qn="Screenshot",es="Language",ts="Editor",ns="Run",ss="Debug",os="Close",is="Edit",rs="Preview",as="Open",cs="Loading...",ls="No files open",ds="Switch to Remote View",us="Disconnected from server",hs="Refresh",ms="Change Root",ps="Upload",fs="Download",gs="Copy Full Path",_s="Copy Relative Path",ys="Copy Name",xs="Are you sure you want to delete {{path}}?",vs="Auto open files",ws="Show hidden files",bs="Show server logs",js="Hide memory usage gauge",$s="About MLCRemote",ks="Version",Ss="Copyright",Cs="Drop to upload",Es="View file",Ts="Loading trash...",Ls="Trash is empty",zs="Original path",Ns="Trash path",Rs="Undo (coming)",Ds="Connected to shell session: {{id}}",Ps="Connected to ephemeral shell",Is="Copy",As="Paste",Os="Paste text here",Ms="Logs",Fs="Clear",Us="Loading PDF support...",Bs="Loading PDF...",Hs="Prev",Ws="Next",Vs="No preview",qs="No file selected",Ks="Full path",Zs="MIME",Ys="Size",Js="Mode",Gs="Last Modified",Xs="Is Dir",Qs="Yes",eo="No",to="Loading metadata...",no="Open or create a file to edit",so="Close Others",oo="Close Left",io="Restore",ro="scroll left",ao="scroll right",co="Editor Settings",lo="Properties",uo="Max File Size (MB)",ho="Files larger than this will open in read-only mode.",mo="License Agreement",po="Please review and accept the license terms to continue.",fo="I accept the terms in the License Agreement",go="Back",_o="Not Authenticated",yo="You need to sign in or provide an access key to continue.",xo="I have an access key",vo="Please enter the server password to obtain an access token.",wo="Enter Access Token",bo="The server requires an access token. Paste it here to continue.",jo="Sign in",$o="Password",ko="Token",So="Login failed",Co="Failed to store token",Eo="Use token",To="Connected since",Lo="Host",zo="PID",No="App Memory",Ro="Permission denied",Do="Read only file",Po="System Memory",Io="CPU",Ao="Timezone",Oo="Last refresh",Mo="unknown",Fo="alloc",Uo="sys",Bo="used",Ho="Unsaved changes",Wo="You have unsaved changes. Reloading will discard them. Continue?",Vo="You have unsaved changes. Close anyway?",qo="Close & Discard",Ko="Error",Zo="Read Only",Yo="Restricted",Jo="Empty file",Go="Empty file (Read Only)",Xo="Path",Qo="Type",ei="Directory",ti={app_title:Bn,files:Hn,terminal:Wn,settings:Vn,search:qn,new_file:Kn,new_folder:Zn,rename:Yn,delete:"Delete",save:Jn,cancel:Gn,theme:Xn,screenshot:Qn,language:es,editor:ts,run:ns,debug:ss,close:os,edit:is,preview:rs,open:as,loading:cs,no_files:ls,switch_to_remote:ds,disconnected:us,refresh:hs,change_root:ms,upload:ps,download:fs,copy_full_path:gs,copy_relative_path:_s,copy_name:ys,delete_confirm:xs,auto_open_files:vs,show_hidden_files:ws,show_server_logs:bs,hide_memory_usage:js,about:$s,version:ks,copyright:Ss,drop_to_upload:Cs,view_file:Es,loading_trash:Ts,trash_empty:Ls,original_path:zs,trash_path:Ns,undo_coming:Rs,terminal_connected_session:Ds,terminal_connected_ephemeral:Ps,copy:Is,paste:As,paste_text_here:Os,logs:Ms,clear:Fs,loading_pdf_support:Us,loading_pdf:Bs,previous:Hs,next:Ws,no_preview:Vs,no_file_selected:qs,full_path:Ks,mime:Zs,size:Ys,mode:Js,last_modified:Gs,is_dir:Xs,yes:Qs,no:eo,loading_metadata:to,open_or_create_file:no,close_others:so,close_left:oo,restore:io,scroll_left:ro,scroll_right:ao,editor_settings:co,properties:lo,max_file_size:uo,max_file_size_tooltip:ho,license_agreement:mo,please_accept_license:po,i_accept_terms:fo,back:go,continue:"Continue",auth_not_authenticated:_o,auth_required_msg:yo,auth_have_key:xo,auth_enter_password:vo,auth_enter_token:wo,auth_token_msg:bo,sign_in:jo,password:$o,token:ko,login_failed:So,token_failed:Co,use_token:Eo,connected_since:To,host:Lo,pid:zo,app_memory:No,permission_denied:Ro,read_only_file:Do,system_memory:Po,cpu:Io,timezone:Ao,last_refresh:Oo,unknown:Mo,alloc:Fo,sys:Uo,used:Bo,unsaved_changes_title:Ho,confirm_reload_unsaved:Wo,confirm_close_unsaved:Vo,close_discard:qo,error:Ko,read_only:Zo,restricted:Yo,empty_file:Jo,empty_file_readonly:Go,path:Xo,type:Qo,directory:ei},ni="MLCRemote IDE",si="Dateien",oi="Terminal",ii="Einstellungen",ri="Suchen",ai="Neue Datei",ci="Neuer Ordner",li="Umbenennen",di="Speichern",ui="Abbrechen",hi="Design",mi="Sprache",pi="Editor",fi="Ausführen",gi="Debuggen",_i="Schließen",yi="Bearbeiten",xi="Vorschau",vi="Öffnen",wi="Laden...",bi="Keine Dateien geöffnet",ji="Zur Remote-Ansicht wechseln",$i="Vom Server getrennt",ki="Aktualisieren",Si="Wurzelverzeichnis ändern",Ci="Hochladen",Ei="Herunterladen",Ti="Vollständigen Pfad kopieren",Li="Relativen Pfad kopieren",zi="Namen kopieren",Ni="Sind Sie sicher, dass Sie {{path}} löschen möchten?",Ri="Dateien automatisch öffnen",Di="Versteckte Dateien anzeigen",Pi="Server-Logs anzeigen",Ii="Speicherauslastung ausblenden",Ai="Über MLCRemote",Oi="Version",Mi="Copyright",Fi="Zum Hochladen hier ablegen",Ui="Datei anzeigen",Bi="Papierkorb wird geladen...",Hi="Papierkorb ist leer",Wi="Ursprünglicher Pfad",Vi="Papierkorb-Pfad",qi="Rückgängig (demnächst)",Ki="Verbunden mit Shell-Sitzung: {{id}}",Zi="Verbunden mit temporärer Shell",Yi="Kopieren",Ji="Einfügen",Gi="Text hier einfügen",Xi="Protokolle",Qi="Löschen",er="PDF-Unterstützung wird geladen...",tr="PDF wird geladen...",nr="Zurück",sr="Weiter",or="Keine Vorschau",ir="Keine Datei ausgewählt",rr="Vollständiger Pfad",ar="MIME-Typ",cr="Größe",lr="Modus",dr="Zuletzt geändert",ur="Ist Verzeichnis",hr="Ja",mr="Nein",pr="Metadaten werden geladen...",fr="Öffnen oder erstellen Sie eine Datei zum Bearbeiten",gr="Andere schließen",_r="Links schließen",yr="Wiederherstellen",xr="nach links scrollen",vr="nach rechts scrollen",wr="Editor-Einstellungen",br="Eigenschaften",jr="Max. Dateigröße (MB)",$r="Dateien, die größer sind, werden schreibgeschützt geöffnet.",kr="Lizenzvereinbarung",Sr="Bitte überprüfen und akzeptieren Sie die Lizenzbedingungen, um fortzufahren.",Cr="Ich akzeptiere die Bedingungen der Lizenzvereinbarung",Er="Zurück",Tr="Nicht authentifiziert",Lr="Sie müssen sich anmelden oder einen Zugriffsschlüssel eingeben, um fortzufahren.",zr="Ich habe einen Zugriffsschlüssel",Nr="Bitte geben Sie das Serverpasswort ein, um ein Zugriffstoken zu erhalten.",Rr="Zugriffstoken eingeben",Dr="Der Server benötigt ein Zugriffstoken. Fügen Sie es hier ein, um fortzufahren.",Pr="Anmelden",Ir="Passwort",Ar="Token",Or="Anmeldung fehlgeschlagen",Mr="Token konnte nicht gespeichert werden",Fr="Token verwenden",Ur="Verbunden seit",Br="Host",Hr="PID",Wr="App Speicher",Vr="Zugriff verweigert",qr="Schreibgeschützt",Kr="System Speicher",Zr="CPU",Yr="Zeitzone",Jr="Letzte Aktualisierung",Gr="unbekannt",Xr="alloc",Qr="sys",ea="benutzt",ta="Ungespeicherte Änderungen",na="Sie haben ungespeicherte Änderungen. Beim Neuladen gehen diese verloren. Fortfahren?",sa="Sie haben ungespeicherte Änderungen. Trotzdem schließen?",oa="Schließen & Verwerfen",ia="Fehler",ra="Schreibgeschützt",aa="Eingeschränkt",ca="Leere Datei",la="Leere Datei (Schreibgeschützt)",da="Pfad",ua="Typ",ha="Verzeichnis",ma={app_title:ni,files:si,terminal:oi,settings:ii,search:ri,new_file:ai,new_folder:ci,rename:li,delete:"Löschen",save:di,cancel:ui,theme:hi,language:mi,editor:pi,run:fi,debug:gi,close:_i,edit:yi,preview:xi,open:vi,loading:wi,no_files:bi,switch_to_remote:ji,disconnected:$i,refresh:ki,change_root:Si,upload:Ci,download:Ei,copy_full_path:Ti,copy_relative_path:Li,copy_name:zi,delete_confirm:Ni,auto_open_files:Ri,show_hidden_files:Di,show_server_logs:Pi,hide_memory_usage:Ii,about:Ai,version:Oi,copyright:Mi,drop_to_upload:Fi,view_file:Ui,loading_trash:Bi,trash_empty:Hi,original_path:Wi,trash_path:Vi,undo_coming:qi,terminal_connected_session:Ki,terminal_connected_ephemeral:Zi,copy:Yi,paste:Ji,paste_text_here:Gi,logs:Xi,clear:Qi,loading_pdf_support:er,loading_pdf:tr,previous:nr,next:sr,no_preview:or,no_file_selected:ir,full_path:rr,mime:ar,size:cr,mode:lr,last_modified:dr,is_dir:ur,yes:hr,no:mr,loading_metadata:pr,open_or_create_file:fr,close_others:gr,close_left:_r,restore:yr,scroll_left:xr,scroll_right:vr,editor_settings:wr,properties:br,max_file_size:jr,max_file_size_tooltip:$r,license_agreement:kr,please_accept_license:Sr,i_accept_terms:Cr,back:Er,continue:"Weiter",auth_not_authenticated:Tr,auth_required_msg:Lr,auth_have_key:zr,auth_enter_password:Nr,auth_enter_token:Rr,auth_token_msg:Dr,sign_in:Pr,password:Ir,token:Ar,login_failed:Or,token_failed:Mr,use_token:Fr,connected_since:Ur,host:Br,pid:Hr,app_memory:Wr,permission_denied:Vr,read_only_file:qr,system_memory:Kr,cpu:Zr,timezone:Yr,last_refresh:Jr,unknown:Gr,alloc:Xr,sys:Qr,used:ea,unsaved_changes_title:ta,confirm_reload_unsaved:na,confirm_close_unsaved:sa,close_discard:oa,error:ia,read_only:ra,restricted:aa,empty_file:ca,empty_file_readonly:la,path:da,type:ua,directory:ha},pa="MLCRemote IDE",fa="Archivos",ga="Terminal",_a="Configuración",ya="Buscar",xa="Nuevo Archivo",va="Nueva Carpeta",wa="Renombrar",ba="Guardar",ja="Cancelar",$a="Tema",ka="Idioma",Sa="Editor",Ca="Ejecutar",Ea="Depurar",Ta="Cerrar",La="Editar",za="Vista previa",Na="Abrir",Ra="Cargando...",Da="No hay archivos abiertos",Pa="Cambiar a vista remota",Ia="Desconectado del servidor",Aa="Actualizar",Oa="Cambiar raíz",Ma="Subir",Fa="Descargar",Ua="Copiar ruta completa",Ba="Copiar ruta relativa",Ha="Copiar nombre",Wa="¿Estás seguro de que deseas eliminar {{path}}?",Va="Abrir archivos automáticamente",qa="Mostrar archivos ocultos",Ka="Mostrar logs del servidor",Za="Ocultar uso de memoria",Ya="Acerca de MLCRemote",Ja="Versión",Ga="Derechos de autor",Xa="Soltar para subir",Qa="Ver archivo",ec="Cargando papelera...",tc="La papelera está vacía",nc="Ruta original",sc="Ruta de la papelera",oc="Deshacer (próximamente)",ic="Conectado a la sesión de shell: {{id}}",rc="Conectado a la shell efímera",ac="Copiar",cc="Pegar",lc="Pegar texto aquí",dc="Registros",uc="Limpiar",hc="Cargando soporte PDF...",mc="Cargando PDF...",pc="Ant",fc="Sig",gc="Sin vista previa",_c="Ningún archivo seleccionado",yc="Ruta completa",xc="MIME",vc="Tamaño",wc="Modo",bc="Última modificación",jc="Es directorio",$c="Sí",kc="No",Sc="Cargando metadatos...",Cc="Abrir o crear un archivo para editar",Ec="Cerrar otros",Tc="Cerrar izquierda",Lc="Restaurar",zc="desplazarse a la izquierda",Nc="desplazarse a la derecha",Rc="Propiedades",Dc="Acuerdo de Licencia",Pc="Por favor, revise y acepte los términos de la licencia para continuar.",Ic="Acepto los términos del Acuerdo de Licencia",Ac="Atrás",Oc="No autenticado",Mc="Debe iniciar sesión o proporcionar una clave de acceso para continuar.",Fc="Tengo una clave de acceso",Uc="Por favor, introduzca la contraseña del servidor para obtener un token de acceso.",Bc="Introducir token de acceso",Hc="El servidor requiere un token de acceso. Péguelo aquí para continuar.",Wc="Iniciar sesión",Vc="Contraseña",qc="Token",Kc="Error de inicio de sesión",Zc="Error al guardar el token",Yc="Usar token",Jc="Conectado desde",Gc="Host",Xc="PID",Qc="Memoria App",el="Permiso denegado",tl="Archivo de solo lectura",nl="Memoria Sistema",sl="CPU",ol="Zona horaria",il="Última actualización",rl="desconocido",al="alloc",cl="sys",ll="usado",dl="Cambios no guardados",ul="Tiene cambios no guardados. Recargar los descartará. ¿Continuar?",hl="¿Tiene cambios no guardados. Cerrar de todos modos?",ml="Cerrar y descartar",pl="Error",fl="Solo lectura",gl="Restringido",_l="Archivo vacío",yl="Archivo vacío (Solo lectura)",xl="Ruta",vl="Tipo",wl="Directorio",bl={app_title:pa,files:fa,terminal:ga,settings:_a,search:ya,new_file:xa,new_folder:va,rename:wa,delete:"Eliminar",save:ba,cancel:ja,theme:$a,language:ka,editor:Sa,run:Ca,debug:Ea,close:Ta,edit:La,preview:za,open:Na,loading:Ra,no_files:Da,switch_to_remote:Pa,disconnected:Ia,refresh:Aa,change_root:Oa,upload:Ma,download:Fa,copy_full_path:Ua,copy_relative_path:Ba,copy_name:Ha,delete_confirm:Wa,auto_open_files:Va,show_hidden_files:qa,show_server_logs:Ka,hide_memory_usage:Za,about:Ya,version:Ja,copyright:Ga,drop_to_upload:Xa,view_file:Qa,loading_trash:ec,trash_empty:tc,original_path:nc,trash_path:sc,undo_coming:oc,terminal_connected_session:ic,terminal_connected_ephemeral:rc,copy:ac,paste:cc,paste_text_here:lc,logs:dc,clear:uc,loading_pdf_support:hc,loading_pdf:mc,previous:pc,next:fc,no_preview:gc,no_file_selected:_c,full_path:yc,mime:xc,size:vc,mode:wc,last_modified:bc,is_dir:jc,yes:$c,no:kc,loading_metadata:Sc,open_or_create_file:Cc,close_others:Ec,close_left:Tc,restore:Lc,scroll_left:zc,scroll_right:Nc,properties:Rc,license_agreement:Dc,please_accept_license:Pc,i_accept_terms:Ic,back:Ac,continue:"Continuar",auth_not_authenticated:Oc,auth_required_msg:Mc,auth_have_key:Fc,auth_enter_password:Uc,auth_enter_token:Bc,auth_token_msg:Hc,sign_in:Wc,password:Vc,token:qc,login_failed:Kc,token_failed:Zc,use_token:Yc,connected_since:Jc,host:Gc,pid:Xc,app_memory:Qc,permission_denied:el,read_only_file:tl,system_memory:nl,cpu:sl,timezone:ol,last_refresh:il,unknown:rl,alloc:al,sys:cl,used:ll,unsaved_changes_title:dl,confirm_reload_unsaved:ul,confirm_close_unsaved:hl,close_discard:ml,error:pl,read_only:fl,restricted:gl,empty_file:_l,empty_file_readonly:yl,path:xl,type:vl,directory:wl},jl="MLCRemote IDE",$l="Fichiers",kl="Terminal",Sl="Paramètres",Cl="Rechercher",El="Nouveau Fichier",Tl="Nouveau Dossier",Ll="Renommer",zl="Enregistrer",Nl="Annuler",Rl="Thème",Dl="Langue",Pl="Éditeur",Il="Exécuter",Al="Déboguer",Ol="Fermer",Ml="Éditer",Fl="Aperçu",Ul="Ouvrir",Bl="Chargement...",Hl="Aucun fichier ouvert",Wl="Passer à la vue distante",Vl="Déconnecté du serveur",ql="Actualiser",Kl="Changer la racine",Zl="Téléverser",Yl="Télécharger",Jl="Copier le chemin complet",Gl="Copiar le chemin relatif",Xl="Copier le nom",Ql="Êtes-vous sûr de vouloir supprimer {{path}} ?",ed="Ouvrir les fichiers automatiquement",td="Afficher les fichiers cachés",nd="Afficher les logs du serveur",sd="Masquer l'utilisation de la mémoire",od="À propos de MLCRemote",id="Version",rd="Copyright",ad="Déposer pour téléverser",cd="Voir le fichier",ld="Chargement de la corbeille...",dd="La corbeille est vide",ud="Chemin d'origine",hd="Chemin de la corbeille",md="Annuler (prochainement)",pd="Connecté à la session shell : {{id}}",fd="Connecté au shell éphémère",gd="Copier",_d="Coller",yd="Coller le texte ici",xd="Journaux",vd="Effacer",wd="Chargement du support PDF...",bd="Chargement du PDF...",jd="Préc",$d="Suiv",kd="Pas d'aperçu",Sd="Aucun fichier sélectionné",Cd="Chemin complet",Ed="MIME",Td="Taille",Ld="Mode",zd="Dernière modification",Nd="Est un répertoire",Rd="Oui",Dd="Non",Pd="Chargement des métadatos...",Id="Ouvrir ou créer un fichier à éditer",Ad="Fermer les autres",Od="Fermer à gauche",Md="Restaurer",Fd="faire défiler vers la gauche",Ud="faire défiler vers la droite",Bd="Propriétés",Hd="Contrat de Licence",Wd="Veuillez consulter et accepter les conditions de licence pour continuer.",Vd="J'accepte les termes du Contrat de Licence",qd="Retour",Kd="Non authentifié",Zd="Vous devez vous connecter ou fournir une clé d'accès pour continuer.",Yd="J'ai une clé d'accès",Jd="Veuillez entrer le mot de passe du serveur pour obtenir un jeton d'accès.",Gd="Entrer le jeton d'accès",Xd="Le serveur nécessite un jeton d'accès. Collez-le ici pour continuer.",Qd="Se connecter",eu="Mot de passe",tu="Jeton",nu="Échec de la connexion",su="Échec de l'enregistrement du jeton",ou="Utiliser le jeton",iu="Connecté depuis",ru="Hôte",au="PID",cu="Mémoire App",lu="Permission refusée",du="Fichier en lecture seule",uu="Mémoire Système",hu="CPU",mu="Fuseau horaire",pu="Dernière actualisation",fu="inconnu",gu="alloc",_u="sys",yu="utilisé",xu="Modifications non enregistrées",vu="Vous avez des modifications non enregistrées. Le rechargement les annulera. Continuer ?",wu="Vous avez des modifications non enregistrées. Fermer quand même ?",bu="Fermer et abandonner",ju="Erreur",$u="Lecture seule",ku="Restreint",Su="Fichier vide",Cu="Fichier vide (Lecture seule)",Eu="Chemin",Tu="Type",Lu="Répertoire",zu={app_title:jl,files:$l,terminal:kl,settings:Sl,search:Cl,new_file:El,new_folder:Tl,rename:Ll,delete:"Supprimer",save:zl,cancel:Nl,theme:Rl,language:Dl,editor:Pl,run:Il,debug:Al,close:Ol,edit:Ml,preview:Fl,open:Ul,loading:Bl,no_files:Hl,switch_to_remote:Wl,disconnected:Vl,refresh:ql,change_root:Kl,upload:Zl,download:Yl,copy_full_path:Jl,copy_relative_path:Gl,copy_name:Xl,delete_confirm:Ql,auto_open_files:ed,show_hidden_files:td,show_server_logs:nd,hide_memory_usage:sd,about:od,version:id,copyright:rd,drop_to_upload:ad,view_file:cd,loading_trash:ld,trash_empty:dd,original_path:ud,trash_path:hd,undo_coming:md,terminal_connected_session:pd,terminal_connected_ephemeral:fd,copy:gd,paste:_d,paste_text_here:yd,logs:xd,clear:vd,loading_pdf_support:wd,loading_pdf:bd,previous:jd,next:$d,no_preview:kd,no_file_selected:Sd,full_path:Cd,mime:Ed,size:Td,mode:Ld,last_modified:zd,is_dir:Nd,yes:Rd,no:Dd,loading_metadata:Pd,open_or_create_file:Id,close_others:Ad,close_left:Od,restore:Md,scroll_left:Fd,scroll_right:Ud,properties:Bd,license_agreement:Hd,please_accept_license:Wd,i_accept_terms:Vd,back:qd,continue:"Continuer",auth_not_authenticated:Kd,auth_required_msg:Zd,auth_have_key:Yd,auth_enter_password:Jd,auth_enter_token:Gd,auth_token_msg:Xd,sign_in:Qd,password:eu,token:tu,login_failed:nu,token_failed:su,use_token:ou,connected_since:iu,host:ru,pid:au,app_memory:cu,permission_denied:lu,read_only_file:du,system_memory:uu,cpu:hu,timezone:mu,last_refresh:pu,unknown:fu,alloc:gu,sys:_u,used:yu,unsaved_changes_title:xu,confirm_reload_unsaved:vu,confirm_close_unsaved:wu,close_discard:bu,error:ju,read_only:$u,restricted:ku,empty_file:Su,empty_file_readonly:Cu,path:Eu,type:Tu,directory:Lu};dt.use(Pt).use(Nt).init({resources:{en:{translation:ti},de:{translation:ma},es:{translation:bl},fr:{translation:zu}},fallbackLng:"en",interpolation:{escapeValue:!1}});try{const n=new URLSearchParams(window.location.search).get("api");if(n)try{const o=new URL(n).searchParams.get("lang");o&&dt.changeLanguage(o)}catch{}typeof ct=="function"&&ct()}catch{}window.addEventListener("dragover",t=>t.preventDefault());window.addEventListener("drop",t=>t.preventDefault());(async()=>{try{const t=await ge(()=>import("./icons-sprite-BUWBpQUw.js"),[],import.meta.url),n=t&&(t.default||t);if(n&&typeof document<"u"){const s=document.createElement("div");s.style.width="0",s.style.height="0",s.style.position="absolute",s.style.visibility="hidden",s.innerHTML=n,document.body.insertBefore(s,document.body.firstChild)}}catch(t){alert("Failed to load icon sprite: "+((t==null?void 0:t.message)||t))}})();Rt(document.getElementById("root")).render(e.jsx(Zt,{children:e.jsx(Un,{})}));export{D as I,ge as _,J as a,Ah as b,Mh as c,Ye as e,ne as f,U as g,ae as i,Oh as l,_e as m,Ne as s};
