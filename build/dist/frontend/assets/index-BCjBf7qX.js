const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./PdfPreview-DRW5QTzo.js","./vendor-react-DgaSUS5F.js","./vendor-scheduler-DYLXRpC5.js","./vendor-prism-D73ALYcd.js","./vendor-prism-Cg1sXqY3.css","./vendor-html2canvas-BfYXEYrK.js","./vendor-xterm-DOcMqDAd.js","./vendor-xterm-DYP7pi_n.css","./vendor-i18next-BnqEsHlA.js","./vendor-i18next-browser-languagedetector-ClvlpAgo.js","./ShellView-CNtxUkGz.js","./TerminalTab-lrf5AFLQ.js"])))=>i.map(i=>d[i]);
var Dt=Object.defineProperty;var It=(t,n,s)=>n in t?Dt(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s;var dt=(t,n,s)=>It(t,typeof n!="symbol"?n+"":n,s);import{r as X,R as i,j as e,u as te,i as Mt,c as Pt}from"./vendor-react-DgaSUS5F.js";import{P as Ke}from"./vendor-prism-D73ALYcd.js";import{h as Ft}from"./vendor-html2canvas-BfYXEYrK.js";import"./vendor-xterm-DOcMqDAd.js";import{i as gt}from"./vendor-i18next-BnqEsHlA.js";import{B as Bt}from"./vendor-i18next-browser-languagedetector-ClvlpAgo.js";import"./vendor-scheduler-DYLXRpC5.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const m of a)if(m.type==="childList")for(const c of m.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function s(a){const m={};return a.integrity&&(m.integrity=a.integrity),a.referrerPolicy&&(m.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?m.credentials="include":a.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function o(a){if(a.ep)return;a.ep=!0;const m=s(a);fetch(a.href,m)}})();const Ot="modulepreload",At=function(t,n){return new URL(t,n).href},ut={},Re=function(n,s,o){let a=Promise.resolve();if(s&&s.length>0){const c=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),h=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(s.map(p=>{if(p=At(p,o),p in ut)return;ut[p]=!0;const j=p.endsWith(".css"),S=j?'[rel="stylesheet"]':"";if(!!o)for(let w=c.length-1;w>=0;w--){const D=c[w];if(D.href===p&&(!j||D.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${p}"]${S}`))return;const x=document.createElement("link");if(x.rel=j?"stylesheet":Ot,j||(x.as="script"),x.crossOrigin="",x.href=p,h&&x.setAttribute("nonce",h),document.head.appendChild(x),j)return new Promise((w,D)=>{x.addEventListener("load",w),x.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${p}`)))})}))}function m(c){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=c,window.dispatchEvent(l),!l.defaultPrevented)throw c}return a.then(c=>{for(const l of c||[])l.status==="rejected"&&m(l.reason);return n().catch(m)})},Ut=200,Le=[],Ce=[];function xt(t,n){const s={ts:new Date().toISOString(),level:t,msg:n};for(Le.push(s);Le.length>Ut;)Le.shift();Ce.forEach(o=>o())}function Y(t){xt("info",t)}function Ne(t){xt("warn",t)}function Ht(){return Le.slice().reverse()}function Wt(t){return Ce.push(t),()=>{const n=Ce.indexOf(t);n>=0&&Ce.splice(n,1)}}function Vt(){Le.length=0,Ce.forEach(t=>t())}function Ge(){try{return localStorage.getItem("mlcremote_token")}catch{return null}}function We(t){try{localStorage.setItem("mlcremote_token",t)}catch{}}let ve="";function ht(t){ve=t.replace(/\/$/,"")}function El(){return ve}function we(t){if(!ve||typeof t!="string"||t.startsWith("http"))return t;if(ve.includes("?")){const[n,s]=ve.split("?"),o=`${n.replace(/\/$/,"")}${t}`;return o.includes("?")?`${o}&${s}`:`${o}?${s}`}return`${ve}${t}`}async function se(t,n){const s=Ge(),o=new Headers(n==null?void 0:n.headers);s&&o.set("X-Auth-Token",s);const a={...n||{},headers:o};let m=t;typeof t=="string"&&t.startsWith("/")&&(m=we(t));const c=await fetch(m,a);if(c.status===401){try{localStorage.removeItem("mlcremote_token")}catch{}try{window.dispatchEvent(new CustomEvent("mlcremote:auth-failed",{detail:{url:typeof t=="string"?t:t.url}}))}catch{}}return c}async function qt(t){Y("POST /api/login");const n=await fetch(we("/api/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:t})});if(Y(`/api/login => ${n.status}`),!n.ok)throw new Error("login failed");const s=await n.json();if(s&&s.token)return We(s.token),s.token;throw new Error("no token in response")}async function Kt(){Y("GET /health");const t=await se("/health");if(Y(`/health => ${t.status}`),!t.ok)throw Ne("/health not ok"),new Error("health failed");return t.json()}function Ve(){try{const t=new URLSearchParams(window.location.search),n=t.get("token");n&&We(n);const s=t.get("api");if(s){Y(`[Debug] Found API param: ${s}`);try{const o=new URL(s);let a=o.origin+o.pathname;a.endsWith("/")&&(a=a.slice(0,-1)),Y(`[Debug] Setting Base URL: ${a}`),ht(a);const m=o.searchParams.get("token");m&&We(m)}catch(o){console.error("Failed to parse API URL",o),ht(s)}}else Y("[Debug] No API param found");return!!n}catch{}return!1}async function Gt(){try{return(await se("/api/auth/check")).status===200}catch{return!1}}async function yt(t="",n){const s=new URLSearchParams;t&&s.set("path",t),n!=null&&n.showHidden&&s.set("showHidden","1");const o=s.toString()?`?${s.toString()}`:"";Y(`GET /api/tree${o}`);const a=await se(`/api/tree${o}`);if(Y(`/api/tree${o} => ${a.status}`),!a.ok)throw Ne("/api/tree not ok"),new Error("tree failed");return a.json()}async function Xt(t){Y(`GET /api/file?path=${t}`);const n=await se(`/api/file?path=${encodeURIComponent(t)}`);if(Y(`/api/file?path=${t} => ${n.status}`),!n.ok)throw Ne("/api/file read failed"),new Error("read failed");return n.text()}async function me(t){Y(`GET /api/stat?path=${t}`);const n=await se(`/api/stat?path=${encodeURIComponent(t)}`);if(Y(`/api/stat?path=${t} => ${n.status}`),!n.ok)throw new Error("stat failed");return n.json()}async function Yt(t,n){Y(`POST /api/file path=${t} size=${n.length}`);const s=await se("/api/file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:t,content:n})});if(Y(`/api/file POST => ${s.status}`),!s.ok)throw Ne("/api/file save failed"),new Error("save failed")}async function Jt(t){Y(`DELETE /api/file?path=${t}`);const n=await se(`/api/file?path=${encodeURIComponent(t)}`,{method:"DELETE"});if(Y(`/api/file delete => ${n.status}`),!n.ok)throw Ne("/api/file delete failed"),new Error("delete failed")}async function Zt(){const t=await se("/api/settings");if(!t.ok)throw new Error("Failed to load settings");return t.json()}async function ye(t){const n=await se("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error("Failed to save settings");return n.json()}const _t=X.createContext(null);function Qt({children:t}){const[n,s]=X.useState(null),[o,a]=X.useState(null),[m,c]=X.useState(navigator.onLine),[l,h]=X.useState(!1),[p,j]=X.useState(!1),[S,C]=X.useState(!1);i.useState(()=>{if(typeof window>"u")return;const $=new URLSearchParams(window.location.search).get("token");if($){console.log("[Auth] Token found in URL (sync init):",$),localStorage.setItem("mlcremote_token",$);const F=window.location.protocol+"//"+window.location.host+window.location.pathname;window.history.replaceState({path:F},"",F)}});const x=X.useCallback(async()=>{if(navigator.onLine)try{const b=await Kt();s(b),a(Date.now()),await Gt()||(localStorage.removeItem("mlcremote_token"),b.password_auth?h(!0):b.auth_required&&j(!0))}catch{s(null)}},[]);X.useEffect(()=>{const b=()=>{c(!0),x()},$=()=>{c(!1),s(null)};window.addEventListener("online",b),window.addEventListener("offline",$);const F=setInterval(x,60*1e3);x();const G=()=>C(!0);return window.addEventListener("mlcremote:auth-failed",G),()=>{window.removeEventListener("online",b),window.removeEventListener("offline",$),window.removeEventListener("mlcremote:auth-failed",G),clearInterval(F)}},[x]),X.useEffect(()=>{if(!n){C(!1);return}const b=!!n.password_auth,$=!!n.auth_required&&!n.password_auth,F=localStorage.getItem("mlcremote_token");C(!!((b||$)&&!F))},[n]);const w=async b=>{await qt(b),await x(),h(!1),C(!1)},D=b=>{localStorage.setItem("mlcremote_token",b),x(),j(!1),C(!1)},I=()=>{localStorage.removeItem("mlcremote_token"),x()};return e.jsx(_t.Provider,{value:{health:n,isOnline:m,lastHealthAt:o,refreshHealth:x,login:w,setToken:D,logout:I,showLogin:l,setShowLogin:h,showTokenInput:p,setShowTokenInput:j,showAuthChooser:S,setShowAuthChooser:C},children:t})}function en(){const t=X.useContext(_t);if(!t)throw new Error("useAuth must be used within AuthProvider");return t}const T=({name:t,className:n,title:s,size:o=16})=>{if(!t)return null;const a=`#${t}`;return e.jsxs("svg",{className:n,width:o,height:o,"aria-hidden":s?void 0:"true",role:s?"img":void 0,children:[s?e.jsx("title",{children:s}):null,e.jsx("use",{href:a})]})},tn={"flag-fr":"icon-flag-fr",js:"icon-js",download:"icon-download",cfg:"icon-settings",plus:"icon-plus",trash:"icon-trash",link:"icon-link",zip:"icon-archive",upload:"icon-upload",stop:"icon-stop","flag-gb":"icon-flag-gb",svg:"icon-image",mjs:"icon-js",shell:"icon-terminal",search:"icon-search",minus:"icon-minus","flag-es":"icon-flag-es",gz:"icon-archive",close:"icon-close",sh:"icon-terminal",screenshot:"icon-screenshot",copy:"icon-copy","flag-de":"icon-flag-de",pdf:"icon-pdf",json:"icon-json",info:"icon-info",run:"icon-play",refresh:"icon-refresh",user:"icon-user",jpg:"icon-image",jpeg:"icon-image",gif:"icon-image",bz2:"icon-archive",settings:"icon-settings",x:"icon-close",cl:"icon-chevron-left",up:"icon-up",tar:"icon-archive",cr:"icon-chevron-right",home:"icon-home",server:"icon-server",log:"icon-log",sun:"icon-sun",txt:"icon-text",dir:"icon-folder",md:"icon-markdown",markdown:"icon-markdown",png:"icon-image",warn:"icon-warning",view:"icon-view",moon:"icon-moon"};function fe(t){if(t)return tn[t.toLowerCase()]}function vt(t,n){if(n){const s=n.lastIndexOf(".");if(s>=0&&s<n.length-1){const o=n.slice(s+1).toLowerCase();return fe(o)}}}const U=t=>"icon-"+t;function nn({x:t,y:n,items:s,onClose:o}){const a=i.useRef(null);i.useEffect(()=>{function l(h){a.current&&!a.current.contains(h.target)&&o()}return window.addEventListener("mousedown",l),window.addEventListener("scroll",o,!0),window.addEventListener("resize",o),()=>{window.removeEventListener("mousedown",l),window.removeEventListener("scroll",o,!0),window.removeEventListener("resize",o)}},[o]);const[m,c]=i.useState({x:t,y:n});return i.useLayoutEffect(()=>{if(a.current){const l=a.current.getBoundingClientRect();let h=t,p=n;h+l.width>window.innerWidth&&(h=window.innerWidth-l.width-8),p+l.height>window.innerHeight&&(p=window.innerHeight-l.height-8),c({x:h,y:p})}},[t,n]),e.jsx("div",{ref:a,style:{position:"fixed",left:m.x,top:m.y,background:"var(--panel)",border:"1px solid var(--border)",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",borderRadius:6,padding:4,zIndex:99999,minWidth:160,display:"flex",flexDirection:"column"},onContextMenu:l=>{l.preventDefault(),o()},children:s.map((l,h)=>l.separator?e.jsx("div",{style:{height:1,background:"var(--border)",margin:"4px 0"}},h):e.jsxs("button",{className:"context-menu-item",onClick:()=>{o(),l.action()},style:{display:"flex",alignItems:"center",gap:8,padding:"6px 10px",border:"none",background:"transparent",color:l.danger?"var(--danger)":"var(--text)",cursor:"pointer",textAlign:"left",borderRadius:4,fontSize:13},onMouseEnter:p=>p.currentTarget.style.background=l.danger?"rgba(239,68,68,0.1)":"var(--bg)",onMouseLeave:p=>p.currentTarget.style.background="transparent",children:[l.icon&&e.jsx("span",{style:{width:16,display:"flex"},children:l.icon}),l.label]},h))})}function sn({onSelect:t,showHidden:n,onToggleHidden:s,autoOpen:o=!0,onView:a,onBackendActive:m,onChangeRoot:c,canChangeRoot:l,selectedPath:h,activeDir:p,onDirChange:j,focusRequest:S,reloadSignal:C}){const{t:x}=te(),[w,D]=i.useState(""),[I,b]=i.useState([]),[$,F]=i.useState(!1),[G,A]=i.useState(""),[pe,oe]=i.useState(null),[ae,de]=i.useState(!1),[g,P]=i.useState(null),_=i.useCallback(async u=>{F(!0),A("");try{const k=await yt(u,{showHidden:n});b(k),D(u);try{H.current!==u&&(j==null||j(u),H.current=u)}catch{}m==null||m();try{const W=Z.current;W&&requestAnimationFrame(()=>{const q=he.current;if(q)try{const ee=q.querySelector(`[data-path="${CSS.escape(W)}"]`);ee&&(ee.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"}),ee.focus())}catch{}})}catch{}}catch(k){A(k.message||x("status_failed"))}finally{F(!1)}},[n,m,j,x]),H=i.useRef("");i.useEffect(()=>{typeof p>"u"||p!==w&&_(p)},[p,w,_]),i.useEffect(()=>{_("")},[_]),i.useEffect(()=>{_(w||"")},[w,_,C]);const M=()=>{if(!w||w==="/"){_("");return}const u=w.split("/").filter(Boolean);u.pop();const k=`/${u.join("/")}`;_(k||"")},N=async(u,k)=>{if(!(!k||k.length===0)&&(console.log("Dropping files:",k.length,"to",u),!!confirm(x("upload_confirm",`Upload ${k.length} file(s) to ${u}?`)))){de(!0),A("");try{const W=new FormData;for(let ge=0;ge<k.length;ge++)W.append("file",k[ge],k[ge].name);const q=`?path=${encodeURIComponent(u)}`;if(!(await se(`/api/upload${q}`,{method:"POST",body:W})).ok)throw new Error(x("status_failed"));await _(u)}catch(W){A(W.message||x("status_failed"))}finally{de(!1)}}},V=(u,k)=>{u.preventDefault(),console.log("onDrop triggered",k),oe(null),N(k,u.dataTransfer.files)},Q=(u,k)=>{u.preventDefault(),oe(k)},J=u=>{u.preventDefault(),oe(null)},he=i.useRef(null),Z=i.useRef("");i.useEffect(()=>{Z.current=h||""},[h]),i.useEffect(()=>{if(h)try{const u=he.current;if(!u)return;const k=u.querySelector(`li[key="${CSS.escape(h)}"]`),W=u.querySelector(`[data-path="${h}"]`),q=k||W;if(q){q.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"});const ee=q.querySelector("button.entry");ee&&ee.focus()}}catch{}},[h,w]),i.useEffect(()=>{if(S)try{const u=h||"";if(!u)return;const k=he.current;if(!k)return;const W=CSS.escape(u),q=k.querySelector(`[data-path="${W}"]`);q&&(q.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"}),q.focus())}catch{}},[S,h]);const De=async u=>{if(confirm(x("delete_confirm",{path:u})))try{await Jt(u),_(w)}catch(k){alert(x("status_failed")+": "+k.message)}},be=(u,k)=>{u.preventDefault(),u.stopPropagation(),P({x:u.clientX,y:u.clientY,item:k})};return e.jsxs("div",{className:"explorer",children:[e.jsxs("div",{className:"explorer-header",children:[e.jsx("strong",{className:"hidden",children:e.jsx(T,{name:U("dir")})}),e.jsxs("div",{className:"explorer-controls",children:[e.jsx("button",{className:"link icon-btn",title:x("refresh"),onClick:()=>_(w||""),children:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M23 4v6h-6"}),e.jsx("path",{d:"M1 20v-6h6"}),e.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})}),l&&typeof c=="function"&&e.jsx("button",{className:"link icon-btn","aria-label":x("change_root"),title:x("change_root"),onClick:async()=>{try{await Promise.resolve(c(""))}catch{}},children:e.jsx(T,{name:U("dir")})})]}),e.jsxs("div",{className:"breadcrumbs",children:[e.jsx("button",{type:"button",className:"link icon-btn",onClick:()=>_(""),title:"Server Root",children:e.jsx(T,{name:U("terminal"),size:14})}),w&&w.split("/").filter(Boolean).map((u,k,W)=>{const q=`/${W.slice(0,k+1).join("/")}`;return e.jsxs("span",{children:[" / ",e.jsx("button",{className:"link",onClick:()=>_(q),children:u})]},q)})]})]}),e.jsxs("div",{className:"explorer-body",onDrop:u=>V(u,w||""),onDragOver:u=>Q(u,w||""),onDragLeave:J,children:[$&&e.jsx("div",{className:"muted",children:x("loading")}),G&&e.jsx("div",{className:"error",children:G}),ae&&e.jsxs("div",{className:"muted",children:[x("upload"),"..."]}),!$&&!G&&e.jsxs("ul",{className:"entry-list",ref:he,children:[w&&w!=="/"&&e.jsx("li",{children:e.jsx("button",{type:"button",className:"entry",onClick:M,children:".."})},"up"),I.map(u=>e.jsx("li",{onContextMenu:k=>be(k,u),children:u.isDir?e.jsxs("button",{"data-path":u.path,type:"button",className:"entry"+(h===u.path?" selected":""),onClick:k=>{k.stopPropagation(),t(u.path,!0)},onDoubleClick:()=>_(u.path),onDrop:k=>V(k,u.path),onDragOver:k=>Q(k,u.path),onDragLeave:J,children:[e.jsx("span",{className:"icon",children:e.jsx(T,{name:fe("dir")||U("dir")})})," ",u.name,u.isSymlink&&e.jsx("span",{title:"Symbolic Link",style:{marginLeft:4,opacity:.5},children:"ðŸ”—"}),u.isBroken&&e.jsx("span",{title:"Broken Link",style:{marginLeft:4},children:"âŒ"}),u.isExternal&&e.jsx("span",{title:"External Link",style:{marginLeft:4},children:"â†—ï¸"}),pe===u.path?e.jsx("span",{style:{marginLeft:8,fontSize:12,color:"#888"},children:x("drop_to_upload")}):null]}):e.jsxs("div",{style:{display:"flex",gap:2,alignItems:"center"},children:[e.jsxs("button",{"data-path":u.path,type:"button",className:"entry",style:{flex:1,textAlign:"left"},onClick:()=>{if(o===!1){t(u.path,!1),a&&a("metadata");return}t(u.path,!1)},children:[e.jsx("span",{className:"icon",children:e.jsx(T,{name:vt(void 0,u.name)||fe(u.name.split(".").pop()||"")||U("view")||"icon-text"})})," ",u.name,u.isSymlink&&e.jsx("span",{title:"Symbolic Link",style:{marginLeft:4,opacity:.5},children:"ðŸ”—"}),u.isBroken&&e.jsx("span",{title:"Broken Link",style:{marginLeft:4},children:"âŒ"}),u.isExternal&&e.jsx("span",{title:"External Link",style:{marginLeft:4},children:"â†—ï¸"})]}),o?null:e.jsx("button",{className:"btn",onClick:()=>a?a(u.path):t(u.path,!1),title:x("view_file"),children:e.jsx(T,{name:U("view")})})]})},u.path))]})]}),g&&e.jsx(nn,{x:g.x,y:g.y,onClose:()=>P(null),items:[{label:x("open","Open"),icon:e.jsx(T,{name:U("view")}),action:()=>{g.item.isDir?(_(g.item.path),t(g.item.path,!0)):o?t(g.item.path,!1):a?a(g.item.path):t(g.item.path,!1)}},...g.item.isDir?[]:[{label:x("download"),icon:e.jsx(T,{name:U("download")}),action:()=>{const u=document.createElement("a");u.href=we(`/api/file?path=${encodeURIComponent(g.item.path)}${localStorage.getItem("mlcremote_token")?`&token=${encodeURIComponent(localStorage.getItem("mlcremote_token")||"")}`:""}`),u.download=g.item.name,document.body.appendChild(u),u.click(),document.body.removeChild(u)},separator:!0}],{label:x("copy_full_path"),icon:e.jsx(T,{name:U("copy")}),action:async()=>{try{await navigator.clipboard.writeText(g.item.path)}catch(u){console.error("Failed to copy",u)}}},{label:x("copy_relative_path"),icon:e.jsx(T,{name:U("link")}),action:async()=>{try{const u=g.item.path.startsWith("/")?g.item.path.slice(1):g.item.path;await navigator.clipboard.writeText(u)}catch(u){console.error("Failed to copy",u)}}},{label:x("copy_name"),icon:e.jsx(T,{name:U("text")}),action:async()=>{try{await navigator.clipboard.writeText(g.item.name)}catch(u){console.error(u)}},separator:!0},{label:x("delete"),icon:e.jsx(T,{name:U("trash")}),danger:!0,action:()=>De(g.item.path)}]})]})}function on({autoOpen:t,showHidden:n,onToggleAutoOpen:s,onToggleShowHidden:o,showLogs:a,onToggleLogs:m,hideMemoryUsage:c,onToggleHideMemoryUsage:l,onClose:h,onLanguageChange:p,maxEditorSize:j,onMaxFileSizeChange:S}){const{t:C,i18n:x}=te(),[w,D]=X.useState(c),I=$=>{x.changeLanguage($),p==null||p($)},b=[{code:"en",name:"English"},{code:"de",name:"Deutsch"},{code:"es",name:"EspaÃ±ol"},{code:"fr",name:"FranÃ§ais"}];return e.jsx("div",{style:{position:"absolute",right:12,top:40,zIndex:60},children:e.jsxs("div",{style:{width:320,background:"var(--bg)",border:"1px solid var(--muted)",borderRadius:6,boxShadow:"0 6px 20px rgba(0,0,0,0.12)",padding:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("strong",{children:C("settings")}),e.jsx("button",{"aria-label":C("close"),title:C("close"),onClick:h,style:{background:"transparent",border:"none",cursor:"pointer"},children:e.jsx(T,{name:U("close"),size:16})})]}),e.jsxs("div",{style:{marginTop:12},children:[e.jsx("label",{style:{fontSize:11,fontWeight:600,textTransform:"uppercase",color:"var(--text-muted)",display:"block",marginBottom:8,letterSpacing:"0.05em"},children:C("language")}),e.jsx("div",{style:{display:"flex",gap:8,marginTop:4},children:b.map($=>{const F=x.language===$.code||$.code==="en"&&!x.language,G=$.code==="en"?"gb":$.code;return e.jsx("button",{onClick:()=>I($.code),title:$.name,style:{display:"flex",alignItems:"center",justifyContent:"center",padding:6,background:F?"var(--bg-select)":"var(--bg-panel)",border:F?"1px solid var(--accent)":"1px solid var(--border)",borderRadius:6,cursor:"pointer",transition:"all 0.2s",opacity:F?1:.7},onMouseOver:A=>{F||(A.currentTarget.style.opacity="1")},onMouseOut:A=>{F||(A.currentTarget.style.opacity="0.7")},children:e.jsx(T,{name:`icon-flag-${G}`,size:24})},$.code)})})]}),e.jsx("div",{style:{marginTop:12},children:e.jsxs("label",{style:{fontSize:13},children:[e.jsx("input",{type:"checkbox",checked:t,onChange:$=>s($.target.checked)})," ",C("auto_open_files","Auto open files")]})}),e.jsx("div",{style:{marginTop:8},children:e.jsxs("label",{style:{fontSize:13},children:[e.jsx("input",{type:"checkbox",checked:n,onChange:$=>o($.target.checked)})," ",C("show_hidden_files","Show hidden files")]})}),e.jsx("div",{style:{marginTop:8},children:e.jsxs("label",{style:{fontSize:13},children:[e.jsx("input",{type:"checkbox",checked:a,onChange:$=>m($.target.checked)})," ",C("show_server_logs","Show server logs")]})}),e.jsx("div",{style:{marginTop:8},children:e.jsxs("label",{style:{fontSize:13},children:[e.jsx("input",{type:"checkbox",checked:w,onChange:$=>{D($.target.checked),l($.target.checked)}})," ",C("hide_memory_usage","Hide memory usage gauge")]})}),e.jsxs("div",{style:{marginTop:12,borderTop:"1px solid var(--border)",paddingTop:8},children:[e.jsx("strong",{style:{fontSize:12,color:"var(--text-muted)"},children:C("editor_settings","Editor Settings")}),e.jsxs("div",{style:{marginTop:6,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("label",{style:{fontSize:13},title:C("max_file_size_tooltip","Files larger than this (MB) will open in read-only mode"),children:C("max_file_size","Max File Size (MB)")}),e.jsx("input",{type:"number",min:"0.1",step:"0.5",style:{width:60,background:"var(--bg-panel)",border:"1px solid var(--border)",color:"var(--text)",borderRadius:4,padding:"2px 4px"},value:((j||parseInt(localStorage.getItem("mlc_max_editor_size")||"1048576"))/1024/1024).toFixed(1),onChange:$=>{const F=parseFloat($.target.value);if(F>0){const G=Math.floor(F*1024*1024);localStorage.setItem("mlc_max_editor_size",G.toString()),S==null||S(G)}}})]})]})]})})}function rn(){const{t}=te(),[n,s]=i.useState(null),[o,a]=i.useState(!1),m=i.useCallback(async()=>{a(!0);try{const h=await se("/api/trash/recent");if(!h.ok)throw new Error("fetch failed");const p=await h.json();Array.isArray(p)&&p.length>0?s(p[0]):s(null)}catch(h){console.warn("Failed to fetch trash",h)}finally{a(!1)}},[]);if(i.useEffect(()=>{m();const h=setInterval(m,1e4);return()=>clearInterval(h)},[m]),o&&!n)return e.jsx("div",{className:"muted",children:t("loading_trash")});if(!n)return e.jsx("div",{className:"muted",children:t("trash_empty")});const c=n.originalPath.split("/").pop()||n.originalPath,l=vt(void 0,c)||fe(c.split(".").pop()||"")||"icon-trash";return e.jsxs("div",{style:{padding:12},children:[e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx(T,{name:l,size:20}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{fontWeight:600},children:c}),e.jsx("div",{className:"muted",style:{fontSize:12},children:new Date(n.deletedAt).toLocaleString()})]})]}),e.jsxs("div",{style:{marginTop:12},children:[e.jsxs("div",{className:"muted",children:[t("original_path"),": ",n.originalPath]}),e.jsxs("div",{className:"muted",children:[t("trash_path"),": ",n.trashPath]})]}),e.jsxs("div",{style:{marginTop:12},children:[e.jsx("button",{className:"btn",disabled:!0,children:t("undo_coming")}),(()=>{const h=Ge(),p=`/api/file?path=${encodeURIComponent(n.trashPath)}`+(h?`&token=${encodeURIComponent(h)}`:"");return e.jsx("a",{className:"btn",style:{marginLeft:8},href:p,download:c,children:t("download")})})()]})]})}function ce(t){if(!t||t<=0)return"0 B";const n=1024,s=n*1024,o=s*1024;return t>=o?`${(t/o).toFixed(2)} GB`:t>=s?`${(t/s).toFixed(2)} MB`:t>=n?`${(t/n).toFixed(2)} KB`:`${t} B`}const an=new Set(["txt","md","markdown","yaml","yml","json","js","ts","jsx","tsx","html","css","env","ini","cfg","conf","csh","gitignore","dockerfile","sql"]),ln=new Set(["zip","gz","tar","rar","exe","dll","so","bin","jpg","jpeg","png","gif","webp","pdf"]);function Xe(t){const n=t.split("/"),s=n[n.length-1]||"",o=s.lastIndexOf(".");return o===-1?"":s.slice(o+1).toLowerCase()}function wt(t){const n=Xe(t);return!n||an.has(n)?!0:!ln.has(n)}async function cn(t){if(!t)return{mime:"application/octet-stream",isText:!1,ext:""};try{const n=`?path=${encodeURIComponent(t)}`,s=await se(`/api/filetype${n}`);if(!s.ok)throw new Error("probe failed");return await s.json()}catch{const s=Xe(t);return{mime:"application/octet-stream",isText:wt(t),ext:s}}}function dn(t){if(!t)return null;const n=t.split("/"),o=(n[n.length-1]||"").toLowerCase();return o===".bashrc"||o==="bashrc"||o===".bash_profile"||o===".profile"?"bashrc":o===".zshrc"||o==="zshrc"?"zshrc":o===".bash_history"||o==="bash_history"?"bash_history":o==="makefile"?"makefile":o==="dockerfile"?"dockerfile":o==="nginx.conf"||o==="nginx.conf.default"?"conf":null}function un(t){const n=Ke.languages;switch(t){case"jsx":return n.jsx;case"tsx":return n.tsx;case"java":return n.java;case"ini":case"gitconfig":case"editorconfig":case"conf":case"config":return n.ini;case"js":return n.javascript;case"ts":return n.typescript;case"go":return n.go;case"php":return n.php;case"json":return n.json;case"yaml":case"yml":return n.yaml;case"toml":return n.toml||n.markup;case"md":case"markdown":return n.markdown;case"c":case"h":return n.c;case"cpp":case"hpp":return n.cpp;case"py":return n.python;case"makefile":return n.makefile;case"bashrc":case"zshrc":case"bash_history":case"profile":return n.bash;case"sh":case"bash":return n.bash;case"xml":case"xml-doc":return n["xml-doc"];case"html":case"htm":return n.markup;case"css":case"sass":case"scss":return n.sass;case"sql":return n.sql;default:return n.javascript}}function Ee(t){switch(t){case"js":case"jsx":return"javascript";case"ts":case"tsx":return"typescript";case"go":return"go";case"php":return"php";case"json":return"json";case"yaml":case"yml":return"yaml";case"toml":return"toml";case"ini":case"gitconfig":case"editorconfig":case"conf":case"config":return"ini";case"md":case"markdown":return"markdown";case"c":case"h":return"c";case"cpp":case"cxx":case"c++":case"hpp":return"cpp";case"py":return"python";case"makefile":return"makefile";case"dockerfile":return"dockerfile";case"sh":case"bash":case"csh":return"bash";case"bashrc":case"zshrc":case"bash_history":case"profile":return"bash";case"xml":case"xml-doc":return"xml-doc";case"html":case"htm":return"markup";case"sass":case"scss":return"sass";case"sql":return"sql";case"less":case"css":return"css";default:return"text"}}function mt(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function hn(t,n){try{const s=un(n),o=Ee(n);return s?Ke.highlight(t,s,o):mt(t)}catch(s){return console.warn("Prism highlight failed",s),mt(t)}}function mn({content:t,setContent:n,origContent:s,ext:o,alias:a,textareaId:m}){const{t:c}=te(),l=i.useRef(null),h=i.useRef(null);return i.useEffect(()=>{var j;const p=a||Ee(o);h.current&&h.current.setAttribute("data-grammar",p),l.current&&l.current.setAttribute("data-grammar",p);try{const S=(j=h.current)==null?void 0:j.querySelector("code");S&&Ke.highlightElement(S)}catch{}},[a,t,o]),i.useEffect(()=>{l.current&&h.current&&(h.current.scrollTop=l.current.scrollTop,h.current.scrollLeft=l.current.scrollLeft)},[t]),e.jsxs("div",{className:"editor-edit-area",children:[e.jsx("pre",{"aria-hidden":!0,className:`highlight-wrap language-${a||Ee(o)}`,"data-grammar":a||Ee(o),ref:p=>{h.current=p},children:e.jsx("code",{className:`language-${a||Ee(o)}`,dangerouslySetInnerHTML:{__html:hn(t||"",o)}})}),e.jsx("textarea",{ref:l,className:"textarea",wrap:"off",value:t,name:m||"editor",id:m,"data-grammar":a,onChange:p=>n(p.target.value),onScroll:()=>{l.current&&h.current&&(h.current.scrollTop=l.current.scrollTop,h.current.scrollLeft=l.current.scrollLeft)},placeholder:c("open_or_create_file"),spellCheck:!1,autoCorrect:"off",autoCapitalize:"off",autoComplete:"off"})]})}function fn({path:t,onDimensions:n}){const{t:s}=te(),o=Ge(),a=we(`/api/file?path=${encodeURIComponent(t)}${o?`&token=${encodeURIComponent(o)}`:""}`),[m,c]=i.useState(null),l=i.useRef(null);return e.jsxs("div",{style:{marginTop:8},children:[e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",overflow:"hidden"},children:e.jsx("img",{ref:l,src:a,alt:t.split("/").pop(),style:{maxWidth:"100%",maxHeight:"80vh",objectFit:"contain",borderRadius:6,boxShadow:"0 2px 8px rgba(0,0,0,0.4)"},onLoad:()=>{try{const h=l.current;if(h&&h.naturalWidth&&h.naturalHeight){c({w:h.naturalWidth,h:h.naturalHeight});try{n&&n(h.naturalWidth,h.naturalHeight)}catch{}}}catch{}}})}),e.jsxs("div",{style:{marginTop:8,display:"flex",gap:8,alignItems:"center"},children:[e.jsx("a",{className:"link",href:a,download:t.split("/").pop(),children:s("download")}),m?e.jsxs("span",{className:"muted",style:{marginLeft:8},children:[m.w," Ã— ",m.h]}):null]})]})}const pn=i.lazy(()=>Re(()=>import("./PdfPreview-DRW5QTzo.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url));function gn({path:t}){const{t:n}=te();return e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"muted",children:n("loading_pdf")}),children:e.jsx(pn,{path:t})})}const xn=i.lazy(()=>Re(()=>import("./ShellView-CNtxUkGz.js"),__vite__mapDeps([10,1,2,3,4,11,6,7,5,8,9]),import.meta.url)),yn={name:"Shell",priority:100,matches:t=>!!(t.path&&t.path.startsWith("shell-")),view:({path:t})=>e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"muted",children:"Loading shellâ€¦"}),children:e.jsx(xn,{path:t})}),isEditable:!1},_n={name:"Directory",priority:90,matches:t=>!!(t.meta&&t.meta.isDir),view:({path:t,origContent:n})=>e.jsxs("div",{style:{padding:12},children:[e.jsxs("div",{style:{fontWeight:600},children:["Directory: ",t]}),e.jsxs("div",{className:"muted",style:{marginTop:6},children:[n?n.split(`
`).length:"0"," entries"]}),e.jsx("pre",{style:{marginTop:8,maxHeight:240,overflow:"auto",padding:8,background:"var(--panel)"},children:n})]}),isEditable:!1},vn={name:"PDF",priority:80,matches:t=>t.probe&&t.probe.mime==="application/pdf"||!!t.path&&t.path.toLowerCase().endsWith(".pdf"),view:({path:t})=>e.jsx(gn,{path:t}),isEditable:!1},wn={name:"Image",priority:70,matches:t=>{if(t.probe&&t.probe.mime&&t.probe.mime.startsWith("image/"))return!0;if(t.path){const n=t.path.toLowerCase();return n.endsWith(".png")||n.endsWith(".jpg")||n.endsWith(".jpeg")||n.endsWith(".gif")||n.endsWith(".svg")||n.endsWith(".webp")}return!1},view:({path:t,onDimensions:n})=>e.jsx(fn,{path:t,onDimensions:n}),isEditable:!1},bn={name:"Text",priority:50,matches:t=>t.probe&&t.probe.isText?!0:t.probe&&!t.probe.isText?!1:!!(t.path&&wt(t.path)),view:({content:t,setContent:n,origContent:s,ext:o,alias:a,textareaId:m})=>e.jsx(mn,{content:t||"",setContent:n||(()=>{}),origContent:s||"",ext:o||"",alias:a,textareaId:m||"editor"}),isEditable:!0},jn={name:"Binary",priority:10,matches:t=>!!(t.probe&&!t.probe.isText),view:({path:t})=>e.jsxs("div",{style:{marginTop:8,display:"flex",gap:8},children:[e.jsx("a",{className:"link",href:we(`/api/file?path=${encodeURIComponent(t)}`),download:t.split("/").pop(),children:"Download"}),e.jsx("span",{className:"muted",children:"(Binary or unsupported file type)"})]}),isEditable:!1},bt={name:"Unsupported",priority:0,matches:()=>!0,view:({path:t})=>e.jsxs("div",{style:{padding:12},className:"muted",children:["Unsupported file type: ",t]}),isEditable:!1},$n=[yn,_n,vn,wn,bn,jn,bt].sort((t,n)=>n.priority-t.priority);function qe(t){for(const n of $n)if(n.matches(t))return n;return bt}function Sn(t){return t.charCodeAt(0)===65279?{text:t.slice(1),hasBOM:!0}:{text:t,hasBOM:!1}}function kn(t){return"\uFEFF"+t}function En({path:t,onSaved:n,settings:s,reloadTrigger:o,onUnsavedChange:a,onMeta:m}){const{t:c}=te(),[l,h]=i.useState(""),[p,j]=i.useState(""),[S,C]=i.useState(!1),[x,w]=i.useState(""),[D,I]=i.useState(!1),[b,$]=i.useState(null),[F,G]=i.useState(!1),[A,pe]=i.useState(null),[oe,ae]=i.useState(null),[de,g]=i.useState(null),[P,_]=i.useState(null),[H,M]=i.useState(!1),N=i.useRef(null),V=i.useRef(null),Q=i.useRef(null),J=qe({path:t,meta:b,probe:A}),he=J.view,Z=i.useCallback(async(L=!1)=>{if(t){I(!0),w("");try{const z=await me(t);if($(z),typeof m=="function"&&m(z),!L&&de&&P&&z.modTime!==P&&!confirm(c("confirm_reload_external","File has been modified externally. Reload?"))){I(!1);return}_(z.modTime);const ne=await cn(t);pe(ne);const ue=qe({path:t,meta:z,probe:ne});if(z.isDir){h(""),I(!1);return}if(ue.name==="Text"){const _e=await Xt(t),{text:je,hasBOM:$e}=Sn(_e);h(je),j(je),C($e),g(Date.now()),M(!1)}else h(""),I(!1)}catch{A&&A.isText&&(w(c("failed_to_load","Failed to load")),M(!0)),g(null)}finally{I(!1)}}},[t,c]),be=(()=>{try{const L=localStorage.getItem("mlc_max_editor_size");if(L)return parseInt(L,10)}catch{}return 1024*1024})(),u=async(L,z=64*1024)=>{if(t){G(!0);try{const ne=`?path=${encodeURIComponent(t)}&offset=${L}&length=${z}`,ue=await se(`/api/file/section${ne}`);if(!ue.ok)throw new Error("section fetch failed");const _e=await ue.text();h(_e),j(_e)}catch{w(c("failed_to_load_section","Failed to load section"))}finally{G(!1)}}},W=dn(t)||A&&A.ext||Xe(t),q=void 0,ee=A&&A.ext?A.ext:"text",re=(L=>L?"editor-"+L.replace(/[^a-z0-9_-]/gi,"-").replace(/-+/g,"-"):"editor")(t||"");i.useEffect(()=>{Z()},[Z]),i.useEffect(()=>{let L=!0;return(async()=>{if(!(!b||!b.isDir||!t))try{const z=await yt(t);if(!L)return;h(""),j(z.map(ne=>ne.name).join(`
`))}catch{}})(),()=>{L=!1}},[b,t]),i.useEffect(()=>{o&&o>0&&Z(!0)},[o,Z]),i.useEffect(()=>{N.current&&V.current&&(V.current.scrollTop=N.current.scrollTop,V.current.scrollLeft=N.current.scrollLeft)},[l]),i.useEffect(()=>{if(N.current&&V.current){const L=window.getComputedStyle(V.current),z=L.lineHeight,ne=L.paddingTop,ue=L.paddingBottom;z&&(N.current.style.lineHeight=z),ne&&(N.current.style.paddingTop=ne),ue&&(N.current.style.paddingBottom=ue)}},[l,t]),i.useEffect(()=>{var L;V.current&&V.current.setAttribute("data-grammar",ee),N.current&&(N.current.setAttribute("data-grammar",ee),re&&(N.current.id=re));try{const z=(L=V.current)==null?void 0:L.querySelector("code");z&&Prism.highlightElement(z)}catch{}},[ee,l,re]),i.useEffect(()=>{if(!a||!J.isEditable)return;const L=l!==p;if(Q.current===null||Q.current!==L){try{a(t,L)}catch(z){console.warn("onUnsavedChange threw",z)}Q.current=L}},[l,p,a,t,J.isEditable]);const xe=async()=>{if(t){w(c("saving","Saving..."));try{const L=S?kn(l):l;await Yt(t,L),w(c("saved","Saved")),setTimeout(()=>w(z=>z===c("saved","Saved")?"":z),1500),await Z(!0),n&&n()}catch{w(c("save_failed","Save failed"))}}},Ie=async()=>{if(t&&!(l!==p&&!confirm(c("confirm_reload_unsaved","You have unsaved changes. Reloading will discard them. Continue?")))){w(c("reloading","Reloading..."));try{await Z(!0),w(c("reloaded","Reloaded")),setTimeout(()=>w(L=>L===c("reloaded","Reloaded")?"":L),1500)}catch{w(c("reload_failed","Reload failed"))}}};return i.useEffect(()=>{const L=z=>{(z.ctrlKey||z.metaKey)&&z.key==="s"&&(z.preventDefault(),xe())};return window.addEventListener("keydown",L),()=>window.removeEventListener("keydown",L)},[xe]),e.jsxs("div",{className:"editor",children:[e.jsxs("div",{className:"editor-header",children:[e.jsx("strong",{children:c("editor")}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{className:"muted",children:b&&b.absPath?b.absPath:t||c("select_or_create")}),b&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"muted",style:{fontSize:11},children:[b.isDir?"directory":J.name,"Â· ",b.mode," Â· ",new Date(b.modTime).toLocaleString()," ",b.size?`Â· ${ce(b.size)}`:""]}),oe&&J.name==="Image"?e.jsxs("span",{style:{fontSize:11,marginLeft:8},className:"muted",children:[oe.w," Ã— ",oe.h]}):null]})]}),e.jsxs("div",{className:"actions",children:[e.jsx("button",{className:"link icon-btn",title:c("refresh"),"aria-label":c("refresh"),onClick:Ie,disabled:!t,children:e.jsx(T,{name:fe("refresh")||"icon-refresh",title:c("refresh"),size:16})}),J.isEditable&&l!==p&&e.jsx("button",{className:"link icon-btn",title:c("save"),"aria-label":c("save"),onClick:xe,disabled:!t,children:e.jsx(T,{name:fe("upload")||"icon-upload",title:c("save"),size:16})})]}),b&&b.size&&b.size>be&&J.isEditable?e.jsxs("div",{style:{marginLeft:12},children:[e.jsx("div",{className:"muted",style:{fontSize:12},children:c("file_too_large","File is large ({{size}}). Full edit disabled.",{size:ce(b.size)})}),e.jsxs("div",{style:{marginTop:6,display:"flex",gap:8},children:[e.jsx("button",{className:"btn",onClick:()=>u(0,64*1024),children:c("view_head","View head")}),e.jsx("button",{className:"btn",onClick:()=>u(Math.max(0,(b.size||0)-64*1024),64*1024),children:c("view_tail","View tail")})]}),F&&e.jsx("div",{className:"muted",children:c("loading_section","Loading section...")})]}):null,x&&e.jsx("div",{className:"muted",children:x})]}),e.jsx("div",{className:"editor-body",children:D?e.jsx("div",{className:"muted",children:c("loading")}):e.jsx(he,{path:t,content:l,setContent:h,origContent:p,ext:W,alias:q,textareaId:re,onDimensions:(L,z)=>ae({w:L,h:z})})})]})}function Ln({path:t}){const{t:n}=te(),[s,o]=i.useState(null),[a,m]=i.useState(null);return i.useEffect(()=>{let c=!0;return(async()=>{if(!t){o(null);return}try{const l=await me(t);if(!c)return;o(l),m(null)}catch(l){if(!c)return;m((l==null?void 0:l.message)||n("failed_fetch_metadata")),o(null)}})(),()=>{c=!1}},[t,n]),t?e.jsxs("div",{style:{padding:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600},children:t.split("/").pop()}),e.jsx("div",{className:"muted",style:{fontSize:12},children:t})]}),e.jsx("div",{children:e.jsx("a",{className:"link",href:`/api/file?path=${encodeURIComponent(t)}`,download:t.split("/").pop(),children:n("download")})})]}),e.jsxs("div",{style:{marginTop:12},children:[a?e.jsx("div",{className:"error",children:a}):null,s?e.jsx("table",{style:{width:"100%",borderCollapse:"collapse"},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{width:160,padding:6},className:"muted",children:n("full_path")}),e.jsx("td",{style:{padding:6},children:s.path||t})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"muted",style:{padding:6},children:n("mime")}),e.jsx("td",{style:{padding:6},children:s.mime||"unknown"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"muted",style:{padding:6},children:n("size")}),e.jsx("td",{style:{padding:6},children:s.size?ce(s.size):"n/a"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"muted",style:{padding:6},children:n("mode")}),e.jsx("td",{style:{padding:6},children:s.mode||"n/a"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"muted",style:{padding:6},children:n("last_modified")}),e.jsx("td",{style:{padding:6},children:s.modTime?new Date(s.modTime).toLocaleString():"n/a"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"muted",style:{padding:6},children:n("is_dir")}),e.jsx("td",{style:{padding:6},children:s.isDir?n("yes"):n("no")})]})]})}):e.jsx("div",{className:"muted",children:n("loading_metadata")})]})]}):e.jsx("div",{style:{padding:12},className:"muted",children:n("no_file_selected")})}function Cn({path:t}){const{t:n}=te(),[s,o]=i.useState(null),[a,m]=i.useState(null);return i.useEffect(()=>{let c=!0;return(async()=>{if(!t){o(null);return}try{const l=await me(t);if(!c)return;o(l),m(null)}catch(l){if(!c)return;m((l==null?void 0:l.message)||n("failed_fetch_metadata")),o(null)}})(),()=>{c=!1}},[t,n]),t?e.jsxs("div",{style:{padding:24,maxWidth:600,margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16,marginBottom:32},children:[e.jsx("div",{style:{fontSize:48,opacity:.8},children:e.jsx(T,{name:fe(t.split(".").pop()||"")||"icon-file",size:48})}),e.jsx("div",{style:{textAlign:"center"},children:e.jsx("h2",{style:{margin:0,wordBreak:"break-all"},children:t.split("/").pop()})}),e.jsx("div",{style:{display:"flex",gap:12},children:s&&!s.isDir&&e.jsxs("a",{className:"btn primary",href:we(`/api/file?path=${encodeURIComponent(t)}`),download:t.split("/").pop(),children:[e.jsx("span",{style:{marginRight:6,display:"inline-flex"},children:e.jsx(T,{name:"icon-download",size:16})}),n("download")]})})]}),e.jsxs("div",{className:"panel",style:{padding:16,borderRadius:8,background:"var(--bg-subtle)"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:16,borderBottom:"1px solid var(--border)",paddingBottom:8},children:n("properties","Properties")}),a?e.jsx("div",{className:"error",children:a}):null,s?e.jsx("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:13},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{width:120,padding:"8px 0",color:"var(--text-muted)"},children:n("path","Path")}),e.jsx("td",{style:{padding:"8px 0",wordBreak:"break-all"},children:t})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{width:120,padding:"8px 0",color:"var(--text-muted)"},children:n("type")}),e.jsx("td",{style:{padding:"8px 0"},children:s.mime||"unknown"})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"8px 0",color:"var(--text-muted)"},children:n("size")}),e.jsx("td",{style:{padding:"8px 0"},children:s.size?ce(s.size):"0 B"})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"8px 0",color:"var(--text-muted)"},children:n("mode")}),e.jsx("td",{style:{padding:"8px 0"},children:e.jsx("span",{style:{fontFamily:"monospace",background:"var(--bg)",padding:"2px 4px",borderRadius:4},children:s.mode||"n/a"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"8px 0",color:"var(--text-muted)"},children:n("last_modified")}),e.jsx("td",{style:{padding:"8px 0"},children:s.modTime?new Date(s.modTime).toLocaleString():"n/a"})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"8px 0",color:"var(--text-muted)"},children:n("is_dir")}),e.jsx("td",{style:{padding:"8px 0"},children:s.isDir?n("yes"):n("no")})]})]})}):e.jsxs("div",{className:"muted",children:[n("loading"),"..."]})]})]}):e.jsx("div",{style:{padding:24,textAlign:"center"},className:"muted",children:n("no_file_selected")})}function Nn({openFiles:t,active:n,onActivate:s,onClose:o,onCloseOthers:a,onCloseLeft:m,titles:c,fullPaths:l,types:h,evictedTabs:p=[],onRestoreEvicted:j}){const{t:S}=te(),[C,x]=i.useState(null),w=i.useRef(null),D=i.useRef(null),[I,b]=i.useState(!1),[$,F]=i.useState(!1),[G,A]=i.useState(!1),[pe,oe]=i.useState(null),ae=()=>{const g=D.current;if(!g){b(!1),F(!1);return}b(g.scrollLeft>0),F(g.scrollWidth>g.clientWidth+g.scrollLeft+1)},de=g=>{const P=D.current;P&&(P.scrollBy({left:g,behavior:"smooth"}),setTimeout(ae,220))};return i.useEffect(()=>{function g(_){w.current&&(_.target instanceof Node&&w.current.contains(_.target)||x(null))}function P(_){_.key==="Escape"&&x(null)}return document.addEventListener("click",g),document.addEventListener("keydown",P),()=>{document.removeEventListener("click",g),document.removeEventListener("keydown",P)}},[]),i.useEffect(()=>{ae();function g(){ae()}window.addEventListener("resize",g);function P(){const _=D.current,H=140;if(!_){oe(null);return}const M=_.clientWidth,N=Math.max(1,Math.floor(M/H));oe(N)}return window.addEventListener("resize",P),P(),()=>{window.removeEventListener("resize",g),window.removeEventListener("resize",P)}},[t]),e.jsxs("div",{className:"tabbar",ref:w,children:[(()=>{const P=D.current?D.current.clientWidth:600,_=pe??Math.max(1,Math.floor(P/140)),H=t.length>_?t.slice(0,t.length-_):[];return H.length===0?null:e.jsxs("div",{className:"tab-evicted-dropdown",style:{display:"flex",alignItems:"center",marginRight:8,position:"relative"},children:[e.jsx("button",{className:"btn",onClick:()=>A(M=>!M),children:"â‹¯"}),G&&e.jsx("div",{style:{position:"absolute",left:0,top:"100%",background:"var(--bg)",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",padding:8,zIndex:50},children:H.map(M=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"4px 8px"},children:[e.jsx("button",{className:"link",onClick:()=>{j&&j(M),A(!1)},style:{flex:1,textAlign:"left"},children:c&&c[M]||M.split("/").pop()}),e.jsxs("div",{style:{display:"flex",gap:6},children:[e.jsx("button",{className:"btn btn-small",title:S("restore"),onClick:()=>{j&&j(M),A(!1)},children:"â†º"}),e.jsx("button",{className:"btn btn-small",title:S("close"),onClick:()=>{o&&o(M),A(!1)},children:"âœ•"}),e.jsx("button",{className:"btn btn-small",title:S("close_others"),onClick:()=>{H.filter(N=>N!==M).forEach(N=>o&&o(N)),A(!1)},children:"â‹¯"})]})]},M))})]})})(),I&&e.jsx("button",{className:"tab-scroll tab-scroll-left","aria-label":S("scroll_left"),onClick:()=>de(-200),children:"â—€"}),e.jsx("div",{className:"tab-scroll-area",ref:D,onScroll:ae,children:t.map((g,P)=>e.jsx("div",{className:"tab-item",style:{display:"flex",alignItems:"center",gap:8,padding:"4px 8px"},children:e.jsxs("button",{className:g===n?"btn":"link",onClick:()=>s(g),onContextMenu:_=>{_.preventDefault(),x(P)},style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{className:"tab-icon",children:(()=>{if(g==="metadata")return e.jsx(T,{name:U("view")});if((h&&h[g])==="shell")return e.jsx(T,{name:U("terminal")});if((h&&h[g])==="dir")return e.jsx(T,{name:U("folder")});const _=(g.split(".").pop()||"").toLowerCase(),H=fe(_);return e.jsx(T,{name:H})})()},`${(h==null?void 0:h[g])||"file"}-${g}`),(()=>{const _=c&&c[g]||g.split("/").pop()||g,H=_.length>10?_.slice(0,10)+"â€¦":_,M=c&&c[g]&&c[g].startsWith("*")?"tab-title tab-unsaved":"tab-title";return e.jsx("span",{title:(l==null?void 0:l[g])||_,className:M,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:120},children:H})})()]})},g))}),C!==null&&(()=>{const g=t[C];if(!g)return null;const P=w.current,_=D.current;let H={position:"absolute",right:8,top:40,padding:8,display:"flex",flexDirection:"column",gap:6};try{const M=_==null?void 0:_.querySelectorAll(".tab-item"),N=M?M[C]:null;if(N&&P){const V=P.getBoundingClientRect(),Q=N.getBoundingClientRect();H={position:"absolute",left:Q.left-V.left,top:Q.bottom-V.top+6,padding:8,display:"flex",flexDirection:"column",gap:6}}}catch{}return e.jsxs("div",{className:"dropdown",style:H,children:[e.jsx("button",{ref:M=>{M&&M.focus()},className:"link",onClick:()=>{o==null||o(g),x(null)},children:S("close")}),e.jsx("button",{className:"link",onClick:()=>{a==null||a(g),x(null)},children:S("close_others")}),e.jsx("button",{className:"link",onClick:()=>{m==null||m(g),x(null)},children:S("close_left")})]})})(),$&&e.jsx("button",{className:"tab-scroll tab-scroll-right","aria-label":S("scroll_right"),onClick:()=>de(200),children:"â–¶"})]})}function Tn({visible:t=!0,onClose:n}){const{t:s}=te(),[,o]=i.useState(0);if(i.useEffect(()=>Wt(()=>o(l=>l+1)),[]),!t)return null;const a=Ht().slice(0,100);function m(c){const l=[],h=/([\w\/\.\-]+:\d+)/g;let p=0,j;for(;(j=h.exec(c))!==null;)j.index>p&&l.push({text:c.slice(p,j.index)}),l.push({text:j[0],cls:"log-path"}),p=j.index+j[0].length;return p<c.length&&l.push({text:c.slice(p)}),l.map((S,C)=>S.cls?e.jsx("span",{className:S.cls,children:S.text},C):e.jsx("span",{children:S.text},C))}return e.jsxs("div",{className:"log-overlay",children:[e.jsxs("div",{className:"log-header",children:[e.jsx("strong",{children:s("logs")}),e.jsxs("div",{children:[e.jsx("button",{className:"btn",onClick:()=>Vt(),children:s("clear")}),e.jsx("button",{className:"btn",onClick:()=>n&&n(),style:{marginLeft:8},children:s("close")})]})]}),e.jsx("div",{children:a.map((c,l)=>e.jsxs("div",{className:`log-entry log-level-${(c.level||"").toLowerCase()}`,children:[e.jsxs("div",{className:"log-meta",children:[c.ts," ",e.jsx("span",{className:"log-level",children:c.level})]}),e.jsx("div",{className:"log-message",children:m(c.msg)})]},l))})]})}async function ft(t,n="mlcremote-screenshot.png"){const s=await Ft(t,{backgroundColor:null,scale:2});return new Promise(o=>{s.toBlob(a=>{if(!a){o();return}const m=URL.createObjectURL(a),c=document.createElement("a");c.href=m,c.download=n,document.body.appendChild(c),c.click(),c.remove(),URL.revokeObjectURL(m),o()},"image/png")})}class zn{constructor(n=""){dt(this,"prefix");this.prefix=n}key(n){return`${this.prefix}${n}`}get(n,s,o=null){try{const a=localStorage.getItem(this.key(n)),m=s.read(a);return m===null?o:m}catch{return o}}getOrDefault(n,s,o){const a=this.get(n,s,null);return a===null?o:a}set(n,s,o){try{localStorage.setItem(this.key(n),o.write(s))}catch{}}remove(n){try{localStorage.removeItem(this.key(n))}catch{}}}const He={read:t=>t===null?null:t,write:t=>String(t)},pt={read:t=>t===null?null:t==="1"||t==="true",write:t=>t?"1":"0"},ke=new zn("mlc:");function Rn({title:t,message:n,onClose:s}){const{t:o}=te();return i.useEffect(()=>{const a=m=>{m.key==="Escape"&&s()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[s]),e.jsx("div",{className:"login-overlay",onClick:s,children:e.jsxs("div",{className:"login-box",onClick:a=>a.stopPropagation(),style:{minWidth:350,maxWidth:500},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[e.jsx("h3",{style:{margin:0,fontSize:18},children:t}),e.jsx("button",{className:"link icon-btn",onClick:s,"aria-label":o("close"),children:e.jsx(T,{name:U("close"),size:16})})]}),e.jsx("div",{style:{marginBottom:24,fontSize:14,lineHeight:"1.5",color:"var(--text-muted)"},children:n}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx("button",{className:"btn",onClick:s,children:o("close")})})]})})}function Dn({health:t,isOnline:n,hideMemoryUsage:s,lastHealthAt:o}){const{t:a}=te(),[m,c]=i.useState(new Date);return i.useEffect(()=>{const l=window.setInterval(()=>c(new Date),1e3);return()=>window.clearInterval(l)},[]),e.jsxs("div",{className:"status-bar",style:{height:24,background:"var(--bg-alt)",borderTop:"1px solid var(--border)",display:"flex",alignItems:"center",padding:"0 8px",fontSize:12,color:"var(--text-muted)",justifyContent:"space-between",userSelect:"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},title:o?`${a("last_checked","Last checked")}: ${new Date(o).toLocaleTimeString()}`:"",children:[e.jsx("span",{style:{width:8,height:8,borderRadius:4,background:t&&t.host?"#10b981":n?"#f59e0b":"#ef4444"}}),e.jsx("span",{children:t&&t.host?t.host:n?a("connecting"):a("offline","Offline")})]}),e.jsxs("span",{className:n?"ok":"err",title:a(n?"status_connected":"disconnected"),children:[e.jsx(T,{name:"icon-circle-filled",size:10})," ",n?a("online","Online"):a("offline","Offline")]}),t&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"sep"}),e.jsxs("span",{title:`PID: ${t.pid}`,children:["Host: ",t.host||"localhost"]}),t.os&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"sep"}),e.jsx("span",{title:`OS: ${t.os} ${t.distro||""}`,children:t.distro||t.os})]}),e.jsx("span",{className:"sep"}),e.jsx("span",{title:a("server_time","Server Time"),children:t.server_time?new Date(t.server_time).toLocaleTimeString():""})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[!s&&t&&t.sys_mem_total_bytes?(()=>{const l=t.sys_mem_total_bytes||1,h=t.sys_mem_free_bytes||0,p=l-h,j=Math.round(p/l*100);return e.jsx("div",{style:{display:"flex",alignItems:"center",gap:6},title:`System Memory: ${ce(p)} / ${ce(l)} (${j}%)`,children:e.jsxs("div",{style:{width:32,height:14,background:"var(--bg-panel)",border:"1px solid var(--border)",borderRadius:3,position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{width:`${j}%`,height:"100%",background:j>85?"#ef4444":j>60?"#f59e0b":"#3b82f6",transition:"width 0.5s ease"}}),e.jsxs("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",fontSize:9,fontWeight:700,color:"var(--text)",textShadow:"0 0 2px var(--bg)"},children:[j,"%"]})]})})})():null,e.jsx("div",{title:m.toLocaleDateString(),children:new Intl.DateTimeFormat(void 0,{hour:"numeric",minute:"numeric",second:"numeric"}).format(m)})]})]})}function In({direction:t="vertical",initialSize:n=50,minSize:s=10,onResize:o,children:a,className:m}){const[c,l]=X.useState(n);X.useEffect(()=>{l(n)},[n]);const h=X.useRef(null),p=X.useRef(!1),j=X.useRef(n),S=t==="vertical",C=D=>{D.preventDefault(),p.current=!0,j.current=c,document.addEventListener("mousemove",x),document.addEventListener("mouseup",w),document.body.style.cursor=S?"col-resize":"row-resize",document.body.style.userSelect="none";const I=document.createElement("div");I.id="split-drag-overlay",I.style.position="fixed",I.style.top="0",I.style.left="0",I.style.width="100%",I.style.height="100%",I.style.zIndex="9999",I.style.cursor=S?"col-resize":"row-resize",document.body.appendChild(I)},x=D=>{if(!p.current||!h.current)return;const I=h.current.getBoundingClientRect();let b=0;S?b=(D.clientX-I.left)/I.width*100:b=(D.clientY-I.top)/I.height*100,b=Math.max(s,Math.min(100-s,b)),l(b),j.current=b},w=()=>{p.current=!1,document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",w),document.body.style.cursor="",document.body.style.userSelect="";const D=document.getElementById("split-drag-overlay");D&&D.remove(),o&&o(j.current)};return e.jsxs("div",{ref:h,className:`split-pane-container ${t} ${m||""}`,style:{display:"flex",flexDirection:S?"row":"column",width:"100%",height:"100%",overflow:"hidden"},children:[e.jsx("div",{style:{flexBasis:`${c}%`,flexGrow:0,flexShrink:0,overflow:"hidden",position:"relative"},children:a[0]}),e.jsx("div",{className:"split-resizer",style:{flexBasis:"4px",cursor:S?"col-resize":"row-resize",background:"var(--border-color, #444)",zIndex:100,transition:"background 0.2s",position:"relative",alignSelf:"stretch"},onMouseDown:C,children:e.jsx("div",{style:{position:"absolute",top:S?0:-4,bottom:S?0:-4,left:S?-4:0,right:S?-4:0,zIndex:10}})}),e.jsx("div",{style:{flex:1,overflow:"hidden",position:"relative"},children:a[1]})]})}const Mn=i.lazy(()=>Re(()=>import("./TerminalTab-lrf5AFLQ.js"),__vite__mapDeps([11,1,2,3,4,6,7,5,8,9]),import.meta.url));function Pn(){var at,lt;const{t,i18n:n}=te(),{health:s,isOnline:o,lastHealthAt:a,refreshHealth:m,login:c,setToken:l,logout:h,showLogin:p,setShowLogin:j,showTokenInput:S,setShowTokenInput:C,showAuthChooser:x,setShowAuthChooser:w}=en(),[D,I]=i.useState(0),b=i.useRef(null);i.useEffect(()=>{!b.current&&s&&I(Date.now()),b.current=s},[s]);const[$,F]=i.useState(""),[G,A]=i.useState(""),pe=i.useCallback(r=>A(r),[]),[oe,ae]=i.useState(0),[de,g]=i.useState(!0),[P,_]=i.useState({root:{id:"root",files:[],activeFile:null}}),[H,M]=i.useState({type:"leaf",paneId:"root"}),[N,V]=i.useState("root"),Q=((at=P[N])==null?void 0:at.files)||[],J=((lt=P[N])==null?void 0:lt.activeFile)||"",he=r=>{_(f=>{const d=f[N];if(!d)return f;const E=r(d.files);return{...f,[N]:{...d,files:E}}})},Z=r=>{_(f=>{const d=f[N];return d?{...f,[N]:{...d,activeFile:r}}:f})},[De,be]=i.useState([]),[u,k]=i.useState(null),[W,q]=i.useState(!0),ee=r=>{q(r),ye({autoOpen:r}).catch(console.error)},ge=8;function re(r){he(f=>{if(f.includes(r))return f;const d=[...f,r];if(d.length<=ge)return d;const E=d[0];try{be(v=>v.includes(E)?v:[...v,E])}catch{}return d.slice(1)}),Z(r),me(r).then(f=>{ot(d=>({...d,[r]:f}))}).catch(()=>{})}const[xe,Ie]=i.useState({}),[L,z]=i.useState(!1),ne=r=>{z(r),ye({showHidden:r}).catch(console.error)},[ue,_e]=i.useState(!1),[je,$e]=i.useState(!1),[jt,Me]=i.useState(!1),[$t,Ye]=i.useState(!1),[Je,Ze]=i.useState(!1),[fl,pl]=i.useState(!1),[Pe,Qe]=i.useState(null),[et,St]=i.useState(300),[Te,ze]=i.useState("dark"),[kt,tt]=i.useState(0),[gl,Et]=i.useState(new Date),[Fe,nt]=i.useState(null),st=i.useMemo(()=>{const r=new URLSearchParams(window.location.search);return!!r.get("controlled")||!!r.get("theme")},[]);i.useEffect(()=>{const r=f=>{if(f.data){if(f.data.type==="set-theme"){const d=f.data.theme;(d==="light"||d==="dark")&&(ze(d),ke.set("theme",d,He),d==="light"?document.documentElement.classList.add("theme-light"):document.documentElement.classList.remove("theme-light"))}if(f.data.type==="screenshot"){const d=document.querySelector(".app"),E=f.data.filename||"mlcremote-screenshot.png";d&&ft(d,E)}}};return window.addEventListener("message",r),()=>window.removeEventListener("message",r)},[]);const[Lt,xl]=i.useState({}),[Ct,Nt]=i.useState({}),[yl,ot]=i.useState({}),Tt=i.useCallback((r,f)=>{Nt(d=>({...d,[r]:f}))},[]),Be=i.useCallback(async()=>{await m()},[m]);i.useEffect(()=>{const r=window.setInterval(()=>Et(new Date),1e3);return()=>window.clearInterval(r)},[]),i.useEffect(()=>{Zt().then(d=>{Qe({allowDelete:d.allowDelete,defaultShell:d.defaultShell}),typeof d.allowDelete<"u"&&_e(!!d.allowDelete),d.theme&&ze(d.theme),typeof d.autoOpen<"u"&&q(d.autoOpen),typeof d.showHidden<"u"&&z(d.showHidden),typeof d.showLogs<"u"&&$e(d.showLogs),typeof d.hideMemoryUsage<"u"&&Ze(d.hideMemoryUsage),d.maxEditorSize&&(tt(d.maxEditorSize),localStorage.setItem("mlc_max_editor_size",d.maxEditorSize.toString()));const E=new URLSearchParams(window.location.search),v=E.get("theme");(v==="light"||v==="dark")&&(ze(v),v==="light"?document.documentElement.classList.add("theme-light"):document.documentElement.classList.remove("theme-light"));const R=E.get("lng")||E.get("lang");R&&R!==d.language?(console.log(`[i18n] Syncing language from Desktop (${R}) -> Server`),ye({language:R}).catch(console.error),n.language!==R&&n.changeLanguage(R)):d.language&&n.language!==d.language&&n.changeLanguage(d.language)}).catch(()=>Qe({allowDelete:!1,defaultShell:"bash"}));const f=new URLSearchParams(window.location.search).get("profileId");if(f){console.log("Restoring state for profile:",f);try{const d=localStorage.getItem(`workspace_state_${f}`);if(d){const E=JSON.parse(d);E.panes&&_(E.panes),E.layout&&M(E.layout),E.activePaneId&&V(E.activePaneId)}}catch(d){console.error("Failed to restore workspace state",d)}}},[]),i.useEffect(()=>{const f=new URLSearchParams(window.location.search).get("profileId");if(f){const d={panes:P,layout:H,activePaneId:N};localStorage.setItem(`workspace_state_${f}`,JSON.stringify(d))}},[P,H,N]),i.useEffect(()=>{Te==="light"?document.documentElement.classList.add("theme-light"):document.documentElement.classList.remove("theme-light")},[Te]);const rt=r=>{const f=`pane-${Date.now()}`,d=P[N],E=d==null?void 0:d.activeFile;_(v=>({...v,[f]:{id:f,files:E?[E]:[],activeFile:E||null}})),M(v=>{const R=K=>K.type==="leaf"?K.paneId===N?{type:"branch",direction:r,size:50,children:[K,{type:"leaf",paneId:f}]}:K:{...K,children:[R(K.children[0]),R(K.children[1])]};return R(v)}),V(f)},it=r=>{r==="root"&&H.type==="leaf"||(M(f=>{const d=v=>{if(v.type==="leaf")return v.paneId===r?null:v;const R=d(v.children[0]),K=d(v.children[1]);return!R&&!K?null:R?K?{...v,children:[R,K]}:R:K};return d(f)||{type:"leaf",paneId:"root"}}),_(f=>{const d={...f};return delete d[r],d}),N===r&&V("root"))},zt=(r,f)=>{M(d=>{const E=v=>v===r?{...v,size:f}:v.type==="branch"?{...v,children:[E(v.children[0]),E(v.children[1])]}:v;return E(d)})},Oe=r=>r.type==="leaf"?Rt(r.paneId):e.jsxs(In,{direction:r.direction,initialSize:r.size,onResize:f=>zt(r,f),children:[Oe(r.children[0]),Oe(r.children[1])]}),Rt=r=>{const f=P[r];if(!f)return e.jsx("div",{className:"muted",children:"Pane not found"});const d=f.files,E=f.activeFile||"",v=y=>{if(V(r),_(B=>{const O=B[r];return O?(y&&!y.startsWith("shell-")&&y.includes("."),{...B,[r]:{...O,activeFile:y}}):B}),y&&!y.startsWith("shell-")&&y!=="metadata"){const B=y.split("/").filter(Boolean);B.pop(),B.length&&`${B.join("/")}`}y!=="metadata"&&F(y),ae(Date.now())},R=y=>{_(B=>{const O=B[r];if(!O)return B;const ie=O.files.filter(Se=>Se!==y);let le=O.activeFile;return O.activeFile===y&&(le=ie[0]||null),{...B,[r]:{...O,files:ie,activeFile:le}}})},K={};for(const y of d)if(y.startsWith("shell-")){const O=(xe[y]||""||"/").split("/").filter(Boolean);let ie="/";if(O.length){const le=O[O.length-1];le.includes(".")&&O.length>1?ie=O[O.length-2]:ie=le}K[y]=ie}else if(y==="metadata")K[y]=t("file_details","File Details");else{const B=y.split("/").pop()||y;K[y]=Ct[y]?`*${B}`:B}const Ae={},Ue={};for(const y of d)y.startsWith("shell-")?(Ae[y]="shell",Ue[y]=xe[y]||"/"):(Ae[y]="file",Ue[y]=y);const ct=r===N;return e.jsxs("div",{className:"pane-content",style:{height:"100%",display:"flex",flexDirection:"column",position:"relative"},onClick:()=>{ct||V(r)},children:[ct&&e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:2,background:"var(--accent)",zIndex:10}}),d.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{onContextMenu:y=>{y.preventDefault()},children:e.jsx(i.Suspense,{fallback:null,children:e.jsx(Nn,{openFiles:d,active:E,titles:{...K,metadata:t("details","Details")},fullPaths:{...Ue,metadata:$||""},types:Ae,onRestoreEvicted:()=>{},onActivate:v,onClose:R,onCloseOthers:y=>{_(B=>{const O=B[r];if(!O)return B;const ie=O.files.filter(le=>le===y);return{...B,[r]:{...O,files:ie,activeFile:y}}})},onCloseLeft:y=>{_(B=>{const O=B[r];if(!O)return B;const ie=O.files.indexOf(y);if(ie<=0)return B;const le=O.files.slice(ie);let Se=O.activeFile;return le.includes(Se||"")||(Se=y),{...B,[r]:{...O,files:le,activeFile:Se}}})}})})}),e.jsx("div",{style:{flex:1,position:"relative"},children:d.map(y=>e.jsx("div",{style:{display:y===E?"block":"none",height:"100%"},children:y.startsWith("shell-")?e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"muted",children:t("loading")}),children:e.jsx(Mn,{shell:Pe&&Pe.defaultShell||"bash",path:xe[y]||"",onExit:()=>R(y)},y)}):y==="trash"?e.jsx(rn,{}):y==="metadata"?e.jsx(Cn,{path:$}):y==="binary"?e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"muted",children:"Loadingâ€¦"}),children:e.jsx(Ln,{path:u||void 0})}):e.jsx(En,{path:y,settings:Pe||void 0,onSaved:()=>{},reloadTrigger:Lt[y]||0,onUnsavedChange:Tt,onMeta:B=>{B&&B.path&&ot(O=>({...O,[y]:B}))}})},y))})]}):e.jsxs("div",{className:"welcome-message",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--text-muted)"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"10px",opacity:.2},children:e.jsx(T,{name:U("folder"),size:48})}),e.jsx("div",{style:{opacity:.5},children:t("no_files")}),r!=="root"&&e.jsxs("button",{className:"btn link",onClick:()=>it(r),children:[t("close")," Pane"]})]})]})};return e.jsxs("div",{className:"app",children:[e.jsxs("header",{className:"app-header",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("img",{src:"/logo.png",alt:"MLCRemote logo",style:{height:28,display:"block"},onLoad:()=>g(!0),onError:()=>g(!1)}),!de&&e.jsx("h1",{style:{margin:0},children:"MLCRemote"})]}),e.jsxs("div",{className:"status",children:[e.jsx("button",{className:"link icon-btn",onClick:async()=>{var E;let r=$||"";try{if(r){const v=await me(r);if(!v.isDir&&v.path){const R=v.path.split("/").filter(Boolean);R.pop(),r=R.length?`/${R.join("/")}`:""}}else if(J&&!J.startsWith("shell-"))try{const v=await me(J);if(v.isDir)r=v.path||J;else if(v.path){const R=v.path.split("/").filter(Boolean);R.pop(),r=R.length?`/${R.join("/")}`:""}}catch{const R=J.split("/").filter(Boolean);R.pop(),r=R.length?`/${R.join("/")}`:""}}catch{}const f=`shell-${Date.now()}`;let d=r||"";if(d&&((E=d.split("/").pop())!=null&&E.includes("."))){const v=d.split("/").filter(Boolean);v.pop(),d=v.length?`/${v.join("/")}`:"/"}Ie(v=>({...v,[f]:d})),re(f)},title:t("terminal"),"aria-label":t("terminal"),children:e.jsx(T,{name:U("terminal"),title:t("terminal"),size:16})}),!st&&e.jsx("button",{className:"link icon-btn","aria-label":"Toggle theme",onClick:()=>{const r=Te==="dark"?"light":"dark";ze(r),ke.set("theme",r,He),r==="light"?document.documentElement.classList.add("theme-light"):document.documentElement.classList.remove("theme-light")},children:Te==="dark"?e.jsx(T,{name:U("moon"),title:t("theme"),size:16}):e.jsx(T,{name:U("sun"),title:t("theme"),size:16})}),e.jsx("button",{className:"link icon-btn",title:t("about"),"aria-label":t("about"),onClick:()=>Me(!0),children:e.jsx(T,{name:U("info"),title:t("about"),size:16})}),!st&&e.jsx("button",{className:"link icon-btn",title:"Screenshot","aria-label":"Screenshot",onClick:async()=>{const r=document.querySelector(".app");if(r)try{await ft(r,"mlcremote-screenshot.png")}catch(f){console.error("Screenshot failed",f)}},children:e.jsx(T,{name:U("screenshot"),title:"Screenshot",size:16})}),e.jsx("button",{className:"link icon-btn",title:"Trash","aria-label":"Trash",onClick:()=>{Q.includes("trash")||re("trash"),Z("trash")},children:e.jsx(T,{name:"icon-trash",title:"Trash",size:16})}),e.jsx("button",{className:"link icon-btn",title:"Split Right","aria-label":"Split Right",onClick:()=>rt("vertical"),children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",style:{display:"block"},children:[e.jsx("path",{fillRule:"evenodd",d:"M14 3H2a1 1 0 00-1 1v8a1 1 0 001 1h12a1 1 0 001-1V4a1 1 0 00-1-1zM2 2a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V4a2 2 0 00-2-2H2z",clipRule:"evenodd"}),e.jsx("path",{d:"M8 4v8H7V4h1z"})]})}),e.jsx("button",{className:"link icon-btn",title:"Split Down","aria-label":"Split Down",onClick:()=>rt("horizontal"),children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",style:{display:"block"},children:[e.jsx("path",{fillRule:"evenodd",d:"M14 3H2a1 1 0 00-1 1v8a1 1 0 001 1h12a1 1 0 001-1V4a1 1 0 00-1-1zM2 2a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V4a2 2 0 00-2-2H2z",clipRule:"evenodd"}),e.jsx("path",{d:"M2 8h12v1H2V8z"})]})}),H.type!=="leaf"&&e.jsx("button",{className:"link icon-btn",title:"Close Active Pane","aria-label":"Close Active Pane",onClick:()=>it(N),style:{marginLeft:4},children:e.jsx(T,{name:U("close"),size:16})}),e.jsx("button",{className:"link icon-btn","aria-label":t("settings"),title:t("settings"),onClick:()=>Ye(r=>!r),children:e.jsx(T,{name:U("settings"),title:t("settings"),size:16})})]}),$t&&e.jsx(on,{autoOpen:W,showHidden:L,onToggleAutoOpen:r=>ee(r),onToggleShowHidden:r=>ne(r),showLogs:je,onToggleLogs:r=>{$e(r),ye({showLogs:r}).catch(console.error)},hideMemoryUsage:Je,onToggleHideMemoryUsage:r=>{Ze(r),ye({hideMemoryUsage:r}).catch(console.error)},onClose:()=>Ye(!1),onLanguageChange:r=>{r!==n.language&&(n.changeLanguage(r),ye({language:r}).catch(console.error))},maxEditorSize:kt,onMaxFileSizeChange:r=>{tt(r),ye({maxEditorSize:r}).catch(console.error)}})]}),e.jsxs("div",{className:"app-body",style:{alignItems:"stretch"},children:[e.jsx("aside",{className:"sidebar",style:{width:et},children:e.jsx(sn,{showHidden:L,autoOpen:W,onToggleHidden:r=>ne(r),selectedPath:$,activeDir:G,onDirChange:pe,focusRequest:oe,reloadSignal:D,onSelect:(r,f)=>{if(F(r),f){re("metadata");return}(async()=>{try{const d=await me(r),E=qe({path:r,meta:d});if(E.name==="Binary"||E.name==="Unsupported"){Q.includes("binary")||re("binary"),k(r),Z("binary");return}}catch(d){nt({title:"Broken Link",message:`Cannot open file: ${d.message||"stat failed"}`});return}W?re(r):Q.includes(r)&&Z(r)})(),Be()},onView:r=>{Q.includes(r)?Z(r):re(r),r!=="metadata"&&F(r),Be()},onBackendActive:Be,onChangeRoot:async()=>{if(!ue){alert("Changing root is not permitted by the server settings");return}const r=window.prompt("Enter the server directory path to use as new root (e.g. /home/user/project):",$||"/");if(!r)return;const f=r.trim();try{if(!(await me(f)).isDir){alert("Selected path is not a directory");return}F(f);try{ke.set("lastRoot",f,He)}catch{}try{const E=ke.getOrDefault("showHidden",pt,!1);ke.set("showHidden",E,pt)}catch{}}catch(d){alert("Cannot access selected path: "+((d==null?void 0:d.message)||d))}}})}),e.jsx("div",{className:"resizer",onMouseDown:r=>{const f=r.clientX,d=et;function E(R){const K=R.clientX-f;St(Math.max(160,Math.min(800,d+K)))}function v(){window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",v)}window.addEventListener("mousemove",E),window.addEventListener("mouseup",v)},children:e.jsx("div",{className:"bar"})}),e.jsx("main",{className:"main",children:e.jsxs("div",{className:"main-content",children:[x&&e.jsx("div",{className:"login-overlay",children:e.jsxs("div",{className:"login-box",children:[e.jsx("h3",{children:"Not Authenticated"}),e.jsx("p",{children:"You need to sign in or provide an access key to continue."}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[e.jsxs("button",{className:"btn",onClick:()=>{w(!1),j(!0)},children:[t("open")," (password)"]}),e.jsx("button",{className:"btn",onClick:()=>{w(!1),C(!0)},children:"I have an access key"})]})]})}),p&&e.jsx("div",{className:"login-overlay",children:e.jsxs("div",{className:"login-box",children:[e.jsx("h3",{children:"Sign in"}),e.jsx("p",{children:"Please enter the server password to obtain an access token."}),e.jsx("input",{id:"mlc-login-pwd",type:"password",placeholder:"Password"}),e.jsx("div",{style:{marginTop:8},children:e.jsx("button",{className:"btn",onClick:async()=>{const r=document.getElementById("mlc-login-pwd");if(r)try{await c(r.value)}catch(f){alert("Login failed: "+((f==null?void 0:f.message)||f))}},children:t("open")})})]})}),S&&e.jsx("div",{className:"login-overlay",children:e.jsxs("div",{className:"login-box",children:[e.jsx("h3",{children:"Enter Access Token"}),e.jsx("p",{children:"The server requires an access token. Paste it here to continue."}),e.jsx("input",{id:"mlc-token-input",type:"text",placeholder:"token"}),e.jsx("div",{style:{marginTop:8},children:e.jsx("button",{className:"btn",onClick:async()=>{const r=document.getElementById("mlc-token-input");if(r)try{l(r.value.trim())}catch(f){alert("Failed to store token: "+((f==null?void 0:f.message)||f))}},children:"Use token"})})]})}),Fe&&e.jsx(Rn,{title:Fe.title,message:Fe.message,onClose:()=>nt(null)}),Oe(H)]})})]}),e.jsx(Dn,{health:s,isOnline:o,hideMemoryUsage:Je,lastHealthAt:a}),e.jsx(Tn,{visible:je,onClose:()=>$e(!1)}),jt&&e.jsx("div",{className:"about-backdrop",onClick:()=>Me(!1),children:e.jsxs("div",{className:"about-modal",onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h3",{style:{margin:0},children:"MLCRemote"}),e.jsx("button",{"aria-label":t("close"),title:t("close"),onClick:()=>Me(!1),style:{background:"transparent",border:"none",cursor:"pointer"},children:e.jsx(T,{name:"icon-close",size:16})})]}),e.jsxs("div",{style:{marginBottom:8},children:["Copyright Â© ",new Date().getFullYear()," Michael Lechner"]}),e.jsxs("div",{style:{marginBottom:8},children:["Version: ",s?`${s.status}@${s.version}`:"unknown"]}),s&&e.jsxs("div",{style:{maxHeight:"40vh",overflow:"auto",background:"#0b0b0b",color:"white",padding:12,borderRadius:6},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Host:"})," ",s.host]}),e.jsxs("div",{children:[e.jsx("strong",{children:"PID:"})," ",s.pid]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Version:"})," ",s.version]}),e.jsxs("div",{children:[e.jsx("strong",{children:"App Memory:"})," ",ce(s.go_alloc_bytes)," (alloc) / ",ce(s.go_sys_bytes)," (sys)"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"System Memory:"})," ",ce((s.sys_mem_total_bytes||0)-(s.sys_mem_free_bytes||0))," / ",ce(s.sys_mem_total_bytes||0)," used"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"CPU:"})," ",Math.round((s.cpu_percent||0)*10)/10,"%"]}),e.jsxs("div",{style:{marginTop:8},children:[e.jsx("strong",{children:"Server time:"})," ",s.server_time]}),e.jsxs("div",{style:{marginTop:4},children:[e.jsx("strong",{children:"Timezone:"})," ",s.timezone]}),e.jsxs("div",{className:"muted",style:{marginTop:8,fontSize:12},children:["Last refresh: ",a?new Date(a).toLocaleString():"n/a"]})]})]})})]})}const Fn="MLCRemote IDE",Bn="Files",On="Terminal",An="Settings",Un="Search",Hn="New File",Wn="New Folder",Vn="Rename",qn="Save",Kn="Cancel",Gn="Theme",Xn="Screenshot",Yn="Language",Jn="Editor",Zn="Run",Qn="Debug",es="Close",ts="Open",ns="Loading...",ss="No files open",os="Switch to Remote View",rs="Disconnected from server",is="Refresh",as="Change Root",ls="Upload",cs="Download",ds="Copy Full Path",us="Copy Relative Path",hs="Copy Name",ms="Are you sure you want to delete {{path}}?",fs="Auto open files",ps="Show hidden files",gs="Show server logs",xs="Hide memory usage gauge",ys="About MLCRemote",_s="Version",vs="Copyright",ws="Drop to upload",bs="View file",js="Loading trash...",$s="Trash is empty",Ss="Original path",ks="Trash path",Es="Undo (coming)",Ls="Connected to shell session: {{id}}",Cs="Connected to ephemeral shell",Ns="Copy",Ts="Paste",zs="Paste text here",Rs="Logs",Ds="Clear",Is="Loading PDF support...",Ms="Loading PDF...",Ps="Prev",Fs="Next",Bs="No preview",Os="No file selected",As="Full path",Us="MIME",Hs="Size",Ws="Mode",Vs="Last Modified",qs="Is Dir",Ks="Yes",Gs="No",Xs="Loading metadata...",Ys="Open or create a file to edit",Js="Close Others",Zs="Close Left",Qs="Restore",eo="scroll left",to="scroll right",no="Editor Settings",so="Properties",oo="Max File Size (MB)",ro="Files larger than this will open in read-only mode.",io={app_title:Fn,files:Bn,terminal:On,settings:An,search:Un,new_file:Hn,new_folder:Wn,rename:Vn,delete:"Delete",save:qn,cancel:Kn,theme:Gn,screenshot:Xn,language:Yn,editor:Jn,run:Zn,debug:Qn,close:es,open:ts,loading:ns,no_files:ss,switch_to_remote:os,disconnected:rs,refresh:is,change_root:as,upload:ls,download:cs,copy_full_path:ds,copy_relative_path:us,copy_name:hs,delete_confirm:ms,auto_open_files:fs,show_hidden_files:ps,show_server_logs:gs,hide_memory_usage:xs,about:ys,version:_s,copyright:vs,drop_to_upload:ws,view_file:bs,loading_trash:js,trash_empty:$s,original_path:Ss,trash_path:ks,undo_coming:Es,terminal_connected_session:Ls,terminal_connected_ephemeral:Cs,copy:Ns,paste:Ts,paste_text_here:zs,logs:Rs,clear:Ds,loading_pdf_support:Is,loading_pdf:Ms,previous:Ps,next:Fs,no_preview:Bs,no_file_selected:Os,full_path:As,mime:Us,size:Hs,mode:Ws,last_modified:Vs,is_dir:qs,yes:Ks,no:Gs,loading_metadata:Xs,open_or_create_file:Ys,close_others:Js,close_left:Zs,restore:Qs,scroll_left:eo,scroll_right:to,editor_settings:no,properties:so,max_file_size:oo,max_file_size_tooltip:ro},ao="MLCRemote IDE",lo="Dateien",co="Terminal",uo="Einstellungen",ho="Suchen",mo="Neue Datei",fo="Neuer Ordner",po="Umbenennen",go="Speichern",xo="Abbrechen",yo="Design",_o="Sprache",vo="Editor",wo="AusfÃ¼hren",bo="Debuggen",jo="SchlieÃŸen",$o="Ã–ffnen",So="Laden...",ko="Keine Dateien geÃ¶ffnet",Eo="Zur Remote-Ansicht wechseln",Lo="Vom Server getrennt",Co="Aktualisieren",No="Wurzelverzeichnis Ã¤ndern",To="Hochladen",zo="Herunterladen",Ro="VollstÃ¤ndigen Pfad kopieren",Do="Relativen Pfad kopieren",Io="Namen kopieren",Mo="Sind Sie sicher, dass Sie {{path}} lÃ¶schen mÃ¶chten?",Po="Dateien automatisch Ã¶ffnen",Fo="Versteckte Dateien anzeigen",Bo="Server-Logs anzeigen",Oo="Speicherauslastung ausblenden",Ao="Ãœber MLCRemote",Uo="Version",Ho="Urheberrecht",Wo="Zum Hochladen hier ablegen",Vo="Datei anzeigen",qo="Papierkorb wird geladen...",Ko="Papierkorb ist leer",Go="UrsprÃ¼nglicher Pfad",Xo="Papierkorb-Pfad",Yo="RÃ¼ckgÃ¤ngig (demnÃ¤chst)",Jo="Verbunden mit Shell-Sitzung: {{id}}",Zo="Verbunden mit temporÃ¤rer Shell",Qo="Kopieren",er="EinfÃ¼gen",tr="Text hier einfÃ¼gen",nr="Protokolle",sr="LÃ¶schen",or="PDF-UnterstÃ¼tzung wird geladen...",rr="PDF wird geladen...",ir="ZurÃ¼ck",ar="Weiter",lr="Keine Vorschau",cr="Keine Datei ausgewÃ¤hlt",dr="VollstÃ¤ndiger Pfad",ur="MIME-Typ",hr="GrÃ¶ÃŸe",mr="Modus",fr="Zuletzt geÃ¤ndert",pr="Ist Verzeichnis",gr="Ja",xr="Nein",yr="Metadaten werden geladen...",_r="Ã–ffnen oder erstellen Sie eine Datei zum Bearbeiten",vr="Andere schlieÃŸen",wr="Links schlieÃŸen",br="Wiederherstellen",jr="nach links scrollen",$r="nach rechts scrollen",Sr="Editor-Einstellungen",kr="Eigenschaften",Er="Max. DateigrÃ¶ÃŸe (MB)",Lr="Dateien, die grÃ¶ÃŸer sind, werden schreibgeschÃ¼tzt geÃ¶ffnet.",Cr={app_title:ao,files:lo,terminal:co,settings:uo,search:ho,new_file:mo,new_folder:fo,rename:po,delete:"LÃ¶schen",save:go,cancel:xo,theme:yo,language:_o,editor:vo,run:wo,debug:bo,close:jo,open:$o,loading:So,no_files:ko,switch_to_remote:Eo,disconnected:Lo,refresh:Co,change_root:No,upload:To,download:zo,copy_full_path:Ro,copy_relative_path:Do,copy_name:Io,delete_confirm:Mo,auto_open_files:Po,show_hidden_files:Fo,show_server_logs:Bo,hide_memory_usage:Oo,about:Ao,version:Uo,copyright:Ho,drop_to_upload:Wo,view_file:Vo,loading_trash:qo,trash_empty:Ko,original_path:Go,trash_path:Xo,undo_coming:Yo,terminal_connected_session:Jo,terminal_connected_ephemeral:Zo,copy:Qo,paste:er,paste_text_here:tr,logs:nr,clear:sr,loading_pdf_support:or,loading_pdf:rr,previous:ir,next:ar,no_preview:lr,no_file_selected:cr,full_path:dr,mime:ur,size:hr,mode:mr,last_modified:fr,is_dir:pr,yes:gr,no:xr,loading_metadata:yr,open_or_create_file:_r,close_others:vr,close_left:wr,restore:br,scroll_left:jr,scroll_right:$r,editor_settings:Sr,properties:kr,max_file_size:Er,max_file_size_tooltip:Lr},Nr="MLCRemote IDE",Tr="Archivos",zr="Terminal",Rr="ConfiguraciÃ³n",Dr="Buscar",Ir="Nuevo Archivo",Mr="Nueva Carpeta",Pr="Renombrar",Fr="Guardar",Br="Cancelar",Or="Tema",Ar="Idioma",Ur="Editor",Hr="Ejecutar",Wr="Depurar",Vr="Cerrar",qr="Abrir",Kr="Cargando...",Gr="No hay archivos abiertos",Xr="Cambiar a vista remota",Yr="Desconectado del servidor",Jr="Actualizar",Zr="Cambiar raÃ­z",Qr="Subir",ei="Descargar",ti="Copiar ruta completa",ni="Copiar ruta relativa",si="Copiar nombre",oi="Â¿EstÃ¡s seguro de que deseas eliminar {{path}}?",ri="Abrir archivos automÃ¡ticamente",ii="Mostrar archivos ocultos",ai="Mostrar logs del servidor",li="Ocultar uso de memoria",ci="Acerca de MLCRemote",di="VersiÃ³n",ui="Derechos de autor",hi="Soltar para subir",mi="Ver archivo",fi="Cargando papelera...",pi="La papelera estÃ¡ vacÃ­a",gi="Ruta original",xi="Ruta de la papelera",yi="Deshacer (prÃ³ximamente)",_i="Conectado a la sesiÃ³n de shell: {{id}}",vi="Conectado a la shell efÃ­mera",wi="Copiar",bi="Pegar",ji="Pegar texto aquÃ­",$i="Registros",Si="Limpiar",ki="Cargando soporte PDF...",Ei="Cargando PDF...",Li="Ant",Ci="Sig",Ni="Sin vista previa",Ti="NingÃºn archivo seleccionado",zi="Ruta completa",Ri="MIME",Di="TamaÃ±o",Ii="Modo",Mi="Ãšltima modificaciÃ³n",Pi="Es directorio",Fi="SÃ­",Bi="No",Oi="Cargando metadatos...",Ai="Abrir o crear un archivo para editar",Ui="Cerrar otros",Hi="Cerrar izquierda",Wi="Restaurar",Vi="desplazarse a la izquierda",qi="desplazarse a la derecha",Ki="Propiedades",Gi={app_title:Nr,files:Tr,terminal:zr,settings:Rr,search:Dr,new_file:Ir,new_folder:Mr,rename:Pr,delete:"Eliminar",save:Fr,cancel:Br,theme:Or,language:Ar,editor:Ur,run:Hr,debug:Wr,close:Vr,open:qr,loading:Kr,no_files:Gr,switch_to_remote:Xr,disconnected:Yr,refresh:Jr,change_root:Zr,upload:Qr,download:ei,copy_full_path:ti,copy_relative_path:ni,copy_name:si,delete_confirm:oi,auto_open_files:ri,show_hidden_files:ii,show_server_logs:ai,hide_memory_usage:li,about:ci,version:di,copyright:ui,drop_to_upload:hi,view_file:mi,loading_trash:fi,trash_empty:pi,original_path:gi,trash_path:xi,undo_coming:yi,terminal_connected_session:_i,terminal_connected_ephemeral:vi,copy:wi,paste:bi,paste_text_here:ji,logs:$i,clear:Si,loading_pdf_support:ki,loading_pdf:Ei,previous:Li,next:Ci,no_preview:Ni,no_file_selected:Ti,full_path:zi,mime:Ri,size:Di,mode:Ii,last_modified:Mi,is_dir:Pi,yes:Fi,no:Bi,loading_metadata:Oi,open_or_create_file:Ai,close_others:Ui,close_left:Hi,restore:Wi,scroll_left:Vi,scroll_right:qi,properties:Ki},Xi="MLCRemote IDE",Yi="Fichiers",Ji="Terminal",Zi="ParamÃ¨tres",Qi="Rechercher",ea="Nouveau Fichier",ta="Nouveau Dossier",na="Renommer",sa="Enregistrer",oa="Annuler",ra="ThÃ¨me",ia="Langue",aa="Ã‰diteur",la="ExÃ©cuter",ca="DÃ©boguer",da="Fermer",ua="Ouvrir",ha="Chargement...",ma="Aucun fichier ouvert",fa="Passer Ã  la vue distante",pa="DÃ©connectÃ© du serveur",ga="Actualiser",xa="Changer la racine",ya="TÃ©lÃ©verser",_a="TÃ©lÃ©charger",va="Copier le chemin complet",wa="Copiar le chemin relatif",ba="Copier le nom",ja="ÃŠtes-vous sÃ»r de vouloir supprimer {{path}} ?",$a="Ouvrir les fichiers automatiquement",Sa="Afficher les fichiers cachÃ©s",ka="Afficher les logs du serveur",Ea="Masquer l'utilisation de la mÃ©moire",La="Ã€ propos de MLCRemote",Ca="Version",Na="Copyright",Ta="DÃ©poser pour tÃ©lÃ©verser",za="Voir le fichier",Ra="Chargement de la corbeille...",Da="La corbeille est vide",Ia="Chemin d'origine",Ma="Chemin de la corbeille",Pa="Annuler (prochainement)",Fa="ConnectÃ© Ã  la session shell : {{id}}",Ba="ConnectÃ© au shell Ã©phÃ©mÃ¨re",Oa="Copier",Aa="Coller",Ua="Coller le texte ici",Ha="Journaux",Wa="Effacer",Va="Chargement du support PDF...",qa="Chargement du PDF...",Ka="PrÃ©c",Ga="Suiv",Xa="Pas d'aperÃ§u",Ya="Aucun fichier sÃ©lectionnÃ©",Ja="Chemin complet",Za="MIME",Qa="Taille",el="Mode",tl="DerniÃ¨re modification",nl="Est un rÃ©pertoire",sl="Oui",ol="Non",rl="Chargement des mÃ©tadatos...",il="Ouvrir ou crÃ©er un fichier Ã  Ã©diter",al="Fermer les autres",ll="Fermer Ã  gauche",cl="Restaurer",dl="faire dÃ©filer vers la gauche",ul="faire dÃ©filer vers la droite",hl="PropriÃ©tÃ©s",ml={app_title:Xi,files:Yi,terminal:Ji,settings:Zi,search:Qi,new_file:ea,new_folder:ta,rename:na,delete:"Supprimer",save:sa,cancel:oa,theme:ra,language:ia,editor:aa,run:la,debug:ca,close:da,open:ua,loading:ha,no_files:ma,switch_to_remote:fa,disconnected:pa,refresh:ga,change_root:xa,upload:ya,download:_a,copy_full_path:va,copy_relative_path:wa,copy_name:ba,delete_confirm:ja,auto_open_files:$a,show_hidden_files:Sa,show_server_logs:ka,hide_memory_usage:Ea,about:La,version:Ca,copyright:Na,drop_to_upload:Ta,view_file:za,loading_trash:Ra,trash_empty:Da,original_path:Ia,trash_path:Ma,undo_coming:Pa,terminal_connected_session:Fa,terminal_connected_ephemeral:Ba,copy:Oa,paste:Aa,paste_text_here:Ua,logs:Ha,clear:Wa,loading_pdf_support:Va,loading_pdf:qa,previous:Ka,next:Ga,no_preview:Xa,no_file_selected:Ya,full_path:Ja,mime:Za,size:Qa,mode:el,last_modified:tl,is_dir:nl,yes:sl,no:ol,loading_metadata:rl,open_or_create_file:il,close_others:al,close_left:ll,restore:cl,scroll_left:dl,scroll_right:ul,properties:hl};gt.use(Bt).use(Mt).init({resources:{en:{translation:io},de:{translation:Cr},es:{translation:Gi},fr:{translation:ml}},fallbackLng:"en",interpolation:{escapeValue:!1}});console.log("MLCRemote: captureTokenFromURL type:",typeof Ve);try{const n=new URLSearchParams(window.location.search).get("api");if(n)try{const o=new URL(n).searchParams.get("lang");o&&(console.log("MLCRemote: Setting language to",o),gt.changeLanguage(o))}catch(s){console.error("Failed to parse api url for lang",s)}typeof Ve=="function"?Ve():console.error("MLCRemote: captureTokenFromURL is not a function!")}catch(t){console.error("MLCRemote: Initialization error",t)}window.addEventListener("dragover",t=>t.preventDefault());window.addEventListener("drop",t=>t.preventDefault());(async()=>{try{const t=await Re(()=>import("./icons-sprite-M6amzqbn.js"),[],import.meta.url),n=t&&(t.default||t);if(n&&typeof document<"u"){const s=document.createElement("div");s.style.width="0",s.style.height="0",s.style.position="absolute",s.style.visibility="hidden",s.innerHTML=n,document.body.insertBefore(s,document.body.firstChild)}}catch(t){alert("Failed to load icon sprite: "+((t==null?void 0:t.message)||t))}})();Pt(document.getElementById("root")).render(e.jsx(Qt,{children:e.jsx(Pn,{})}));export{Re as _,se as a,El as g,we as m,me as s};
