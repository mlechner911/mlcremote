const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./PdfPreview-XvE_bbUM.js","./vendor-react-Dv8eETpG.js","./vendor-scheduler-DYLXRpC5.js","./vendor-devlop-Cl3hj7Sz.js","./vendor-extend-BByqELpg.js","./vendor-unified-CN3Pc_0x.js","./vendor-bail-FqpXQuLt.js","./vendor-is-plain-obj-C1gvLhAf.js","./vendor-trough-B_b8ryxu.js","./vendor-vfile-BCWrK60u.js","./vendor-vfile-message-DqhD22jI.js","./vendor-unist-util-stringify-position-Ch_qCilz.js","./vendor-remark-parse-CNDkPE6C.js","./vendor-mdast-util-from-markdown-CHHsmDpx.js","./vendor-micromark-util-decode-numeric-character-reference-CNs1qBpV.js","./vendor-micromark-util-decode-string-fHsnqYdj.js","./vendor-decode-named-character-reference-C3-224fz.js","./vendor-micromark-util-normalize-identifier-C9ANKk3v.js","./vendor-micromark-Dc687xHH.js","./vendor-micromark-util-combine-extensions-d8XJZrgA.js","./vendor-micromark-util-chunked-DrRIdSP-.js","./vendor-micromark-factory-space-BM4zcA-B.js","./vendor-micromark-util-character-Cn8n62xE.js","./vendor-micromark-core-commonmark-BEN53qso.js","./vendor-micromark-util-classify-character-Bc1Mydac.js","./vendor-micromark-util-resolve-all-PQCKh0dx.js","./vendor-micromark-util-subtokenize-BF1Jf29a.js","./vendor-micromark-factory-destination-QK-4WEtY.js","./vendor-micromark-factory-label-Bo_B4AwM.js","./vendor-micromark-factory-title-D-E2MfTG.js","./vendor-micromark-factory-whitespace-D8F2YPRT.js","./vendor-micromark-util-html-tag-name-DbKNfynz.js","./vendor-mdast-util-to-string-C_aolqmU.js","./vendor-remark-rehype-Eq-g-hA4.js","./vendor-mdast-util-to-hast-B4KFU5Q1.js","./vendor-ungap--gfxRhYI.js","./vendor-micromark-util-sanitize-uri-B-zxHmez.js","./vendor-unist-util-position-60F3QETU.js","./vendor-trim-lines-D8znQY54.js","./vendor-unist-util-visit-DyPrGnGc.js","./vendor-unist-util-visit-parents-CHe-IBUw.js","./vendor-unist-util-is-D9KQvrmg.js","./vendor-hast-util-to-jsx-runtime-48tnp6nG.js","./vendor-comma-separated-tokens-xMQ5YY98.js","./vendor-property-information-Bx45xMUt.js","./vendor-space-separated-tokens-DD3iYX1K.js","./vendor-style-to-js-CGcDVYOI.js","./vendor-style-to-object-COD_8__P.js","./vendor-inline-style-parser-CWBJcU5N.js","./vendor-hast-util-whitespace-D4Wp6AEg.js","./vendor-estree-util-is-identifier-name-BgBfM8ME.js","./vendor-html-url-attributes-D46m5wfe.js","./vendor-prism-DmEJSkZI.js","./vendor-html2canvas-BfYXEYrK.js","./vendor-xterm-DOcMqDAd.js","./vendor-xterm-DYP7pi_n.css","./vendor-i18next-BnqEsHlA.js","./vendor-i18next-browser-languagedetector-ClvlpAgo.js","./ShellView-CQBCQynv.js","./TerminalTab-e8oEJ8mY.js","./MarkdownPreview-BnGPyL1a.js","./vendor-remark-gfm-uw-dc7IP.js","./vendor-micromark-extension-gfm-CZUPGk5O.js","./vendor-micromark-extension-gfm-autolink-literal-zrBeIzAz.js","./vendor-micromark-extension-gfm-footnote-DC8zpk-O.js","./vendor-micromark-extension-gfm-strikethrough-r4kRFlAf.js","./vendor-micromark-extension-gfm-table-B99Gg4C5.js","./vendor-micromark-extension-gfm-task-list-item-BZuxQwYN.js","./vendor-mdast-util-gfm-BVgF6PCq.js","./vendor-mdast-util-gfm-autolink-literal-DosrCWU3.js","./vendor-ccount-c2V3InAJ.js","./vendor-mdast-util-find-and-replace-BiKHlny_.js","./vendor-escape-string-regexp-BaJN9MlJ.js","./vendor-mdast-util-gfm-footnote-eRUj3PhO.js","./vendor-mdast-util-gfm-strikethrough-Cj9qKt6Q.js","./vendor-mdast-util-gfm-table-C80Z1anG.js","./vendor-markdown-table-DvhhVmnL.js","./vendor-mdast-util-to-markdown-CY_ELGXh.js","./vendor-longest-streak-CtXnX3Xp.js","./vendor-mdast-util-phrasing-GiRy56vE.js","./vendor-mdast-util-gfm-task-list-item-BI7eeOYA.js","./MarkdownPreview-C8dKPotk.css","./ArchiveViewer-Vy94p192.js"])))=>i.map(i=>d[i]);
var Lt=Object.defineProperty;var Tt=(t,n,s)=>n in t?Lt(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s;var rt=(t,n,s)=>Tt(t,typeof n!="symbol"?n+"":n,s);import{r as J,R as i,j as e,u as X,i as zt,c as Nt}from"./vendor-react-Dv8eETpG.js";import{P as Ze}from"./vendor-prism-DmEJSkZI.js";import{h as Rt}from"./vendor-html2canvas-BfYXEYrK.js";import"./vendor-xterm-DOcMqDAd.js";import{i as mt}from"./vendor-i18next-BnqEsHlA.js";import{B as Dt}from"./vendor-i18next-browser-languagedetector-ClvlpAgo.js";import"./vendor-scheduler-DYLXRpC5.js";import"./vendor-devlop-Cl3hj7Sz.js";import"./vendor-extend-BByqELpg.js";import"./vendor-unified-CN3Pc_0x.js";import"./vendor-bail-FqpXQuLt.js";import"./vendor-is-plain-obj-C1gvLhAf.js";import"./vendor-trough-B_b8ryxu.js";import"./vendor-vfile-BCWrK60u.js";import"./vendor-vfile-message-DqhD22jI.js";import"./vendor-unist-util-stringify-position-Ch_qCilz.js";import"./vendor-remark-parse-CNDkPE6C.js";import"./vendor-mdast-util-from-markdown-CHHsmDpx.js";import"./vendor-micromark-util-decode-numeric-character-reference-CNs1qBpV.js";import"./vendor-micromark-util-decode-string-fHsnqYdj.js";import"./vendor-decode-named-character-reference-C3-224fz.js";import"./vendor-micromark-util-normalize-identifier-C9ANKk3v.js";import"./vendor-micromark-Dc687xHH.js";import"./vendor-micromark-util-combine-extensions-d8XJZrgA.js";import"./vendor-micromark-util-chunked-DrRIdSP-.js";import"./vendor-micromark-factory-space-BM4zcA-B.js";import"./vendor-micromark-util-character-Cn8n62xE.js";import"./vendor-micromark-core-commonmark-BEN53qso.js";import"./vendor-micromark-util-classify-character-Bc1Mydac.js";import"./vendor-micromark-util-resolve-all-PQCKh0dx.js";import"./vendor-micromark-util-subtokenize-BF1Jf29a.js";import"./vendor-micromark-factory-destination-QK-4WEtY.js";import"./vendor-micromark-factory-label-Bo_B4AwM.js";import"./vendor-micromark-factory-title-D-E2MfTG.js";import"./vendor-micromark-factory-whitespace-D8F2YPRT.js";import"./vendor-micromark-util-html-tag-name-DbKNfynz.js";import"./vendor-mdast-util-to-string-C_aolqmU.js";import"./vendor-remark-rehype-Eq-g-hA4.js";import"./vendor-mdast-util-to-hast-B4KFU5Q1.js";import"./vendor-ungap--gfxRhYI.js";import"./vendor-micromark-util-sanitize-uri-B-zxHmez.js";import"./vendor-unist-util-position-60F3QETU.js";import"./vendor-trim-lines-D8znQY54.js";import"./vendor-unist-util-visit-DyPrGnGc.js";import"./vendor-unist-util-visit-parents-CHe-IBUw.js";import"./vendor-unist-util-is-D9KQvrmg.js";import"./vendor-hast-util-to-jsx-runtime-48tnp6nG.js";import"./vendor-comma-separated-tokens-xMQ5YY98.js";import"./vendor-property-information-Bx45xMUt.js";import"./vendor-space-separated-tokens-DD3iYX1K.js";import"./vendor-style-to-js-CGcDVYOI.js";import"./vendor-style-to-object-COD_8__P.js";import"./vendor-inline-style-parser-CWBJcU5N.js";import"./vendor-hast-util-whitespace-D4Wp6AEg.js";import"./vendor-estree-util-is-identifier-name-BgBfM8ME.js";import"./vendor-html-url-attributes-D46m5wfe.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function s(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerPolicy&&(u.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?u.credentials="include":r.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(r){if(r.ep)return;r.ep=!0;const u=s(r);fetch(r.href,u)}})();const Pt="modulepreload",It=function(t,n){return new URL(t,n).href},at={},Le=function(n,s,o){let r=Promise.resolve();if(s&&s.length>0){const d=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),h=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));r=Promise.allSettled(s.map(a=>{if(a=It(a,o),a in at)return;at[a]=!0;const g=a.endsWith(".css"),$=g?'[rel="stylesheet"]':"";if(!!o)for(let f=d.length-1;f>=0;f--){const C=d[f];if(C.href===a&&(!g||C.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${$}`))return;const x=document.createElement("link");if(x.rel=g?"stylesheet":Pt,g||(x.as="script"),x.crossOrigin="",x.href=a,h&&x.setAttribute("nonce",h),document.head.appendChild(x),g)return new Promise((f,C)=>{x.addEventListener("load",f),x.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${a}`)))})}))}function u(d){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=d,window.dispatchEvent(l),!l.defaultPrevented)throw d}return r.then(d=>{for(const l of d||[])l.status==="rejected"&&u(l.reason);return n().catch(u)})},Mt=200,Pe=[],Ie=[];function pt(t,n){const s={ts:new Date().toISOString(),level:t,msg:n};for(Pe.push(s);Pe.length>Mt;)Pe.shift();Ie.forEach(o=>o())}function G(t){pt("info",t)}function Te(t){pt("warn",t)}function Ot(){return Pe.slice().reverse()}function At(t){return Ie.push(t),()=>{const n=Ie.indexOf(t);n>=0&&Ie.splice(n,1)}}function Ft(){Pe.length=0,Ie.forEach(t=>t())}function Ue(){try{return localStorage.getItem("mlcremote_token")}catch{return null}}function Xe(t){try{localStorage.setItem("mlcremote_token",t)}catch{}}let Ee="";function ct(t){Ee=t.replace(/\/$/,"")}function Mh(){return Ee}function we(t){if(!Ee||typeof t!="string"||t.startsWith("http"))return t;if(Ee.includes("?")){const[n,s]=Ee.split("?"),o=`${n.replace(/\/$/,"")}${t}`;return o.includes("?")?`${o}&${s}`:`${o}?${s}`}return`${Ee}${t}`}async function ee(t,n){const s=Ue(),o=new Headers(n==null?void 0:n.headers);s&&o.set("X-Auth-Token",s);const r={...n||{},headers:o};let u=t;typeof t=="string"&&t.startsWith("/")&&(u=we(t));const d=await fetch(u,r);if(d.status===401){try{localStorage.removeItem("mlcremote_token")}catch{}try{window.dispatchEvent(new CustomEvent("mlcremote:auth-failed",{detail:{url:typeof t=="string"?t:t.url}}))}catch{}}return d}async function Ut(t){G("POST /api/login");const n=await fetch(we("/api/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:t})});if(G(`/api/login => ${n.status}`),!n.ok)throw new Error("login failed");const s=await n.json();if(s&&s.token)return Xe(s.token),s.token;throw new Error("no token in response")}async function Bt(){G("GET /health");const t=await ee("/health");if(G(`/health => ${t.status}`),!t.ok)throw Te("/health not ok"),new Error("health failed");return t.json()}function lt(){try{const t=new URLSearchParams(window.location.search),n=t.get("token");n&&Xe(n);const s=t.get("api");if(s)try{const o=new URL(s);let r=o.origin+o.pathname;r.endsWith("/")&&(r=r.slice(0,-1)),ct(r);const u=o.searchParams.get("token");u&&Xe(u)}catch{ct(s)}return!!n}catch{}return!1}async function Ht(){try{return(await ee("/api/auth/check")).status===200}catch{return!1}}async function Be(t="",n){const s=new URLSearchParams;t&&s.set("path",t),n!=null&&n.showHidden&&s.set("showHidden","1"),s.set("_",Date.now().toString());const o=s.toString()?`?${s.toString()}`:"";G(`GET /api/tree${o}`);const r=await ee(`/api/tree${o}`);if(G(`/api/tree${o} => ${r.status}`),r.status===403)throw new Error("Permission denied");if(!r.ok)throw Te("/api/tree not ok"),new Error("tree failed");return r.json()}async function Vt(t){G(`GET /api/file?path=${t}`);const n=await ee(`/api/file?path=${encodeURIComponent(t)}`);if(G(`/api/file?path=${t} => ${n.status}`),n.status===403)throw new Error("Permission denied");if(!n.ok)throw Te("/api/file read failed"),new Error("read failed");return n.text()}async function ge(t){G(`GET /api/stat?path=${t}`);const n=await ee(`/api/stat?path=${encodeURIComponent(t)}`);if(G(`/api/stat?path=${t} => ${n.status}`),n.status===403)throw new Error("Permission denied");if(!n.ok)throw new Error("stat failed");return n.json()}async function Wt(t,n){G(`POST /api/file path=${t} size=${n.length}`);const s=await ee("/api/file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:t,content:n})});if(G(`/api/file POST => ${s.status}`),!s.ok)throw Te("/api/file save failed"),new Error("save failed")}async function qt(t){G(`DELETE /api/file?path=${t}`);const n=await ee(`/api/file?path=${encodeURIComponent(t)}`,{method:"DELETE"});if(G(`/api/file delete => ${n.status}`),!n.ok)throw Te("/api/file delete failed"),new Error("delete failed")}async function Kt(t,n){const s=new FormData;s.append("file",n),G(`POST /api/upload path=${t} filename=${n.name} size=${n.size}`);const o=await ee(`/api/upload?path=${encodeURIComponent(t)}`,{method:"POST",body:s});if(G(`/api/upload POST => ${o.status}`),!o.ok)throw Te("/api/upload failed"),new Error("upload failed")}async function Oh(t){const n=`?path=${encodeURIComponent(t)}`;G(`GET /api/archive/list${n}`);const s=await ee(`/api/archive/list${n}`);if(G(`/api/archive/list${n} => ${s.status}`),!s.ok)throw new Error("archive list failed");return s.json()}async function Yt(){const t=await ee("/api/settings");if(!t.ok)throw new Error("Failed to load settings");return t.json()}async function fe(t){const n=await ee("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error("Failed to save settings");return n.json()}const ft=J.createContext(null);function Xt({children:t}){const[n,s]=J.useState(null),[o,r]=J.useState(null),[u,d]=J.useState(navigator.onLine),[l,h]=J.useState(!1),[a,g]=J.useState(!1),[$,S]=J.useState(!1);i.useState(()=>{if(typeof window>"u")return;const F=new URLSearchParams(window.location.search).get("token");if(F){localStorage.setItem("mlcremote_token",F);const y=window.location.protocol+"//"+window.location.host+window.location.pathname;window.history.replaceState({path:y},"",y)}});const x=J.useCallback(async()=>{if(navigator.onLine)try{const w=await Bt();s(w),r(Date.now()),await Ht()||(localStorage.removeItem("mlcremote_token"),w.password_auth?h(!0):w.auth_required&&g(!0))}catch{s(null)}},[]);J.useEffect(()=>{const w=()=>{d(!0),x()},F=()=>{d(!1),s(null)};window.addEventListener("online",w),window.addEventListener("offline",F);const y=setInterval(x,60*1e3);x();const c=()=>S(!0);return window.addEventListener("mlcremote:auth-failed",c),()=>{window.removeEventListener("online",w),window.removeEventListener("offline",F),window.removeEventListener("mlcremote:auth-failed",c),clearInterval(y)}},[x]),J.useEffect(()=>{if(!n){S(!1);return}const w=!!n.password_auth,F=!!n.auth_required&&!n.password_auth,y=localStorage.getItem("mlcremote_token");S(!!((w||F)&&!y))},[n]);const f=async w=>{await Ut(w),await x(),h(!1),S(!1)},C=w=>{localStorage.setItem("mlcremote_token",w),x(),g(!1),S(!1)},I=()=>{localStorage.removeItem("mlcremote_token"),x()};return e.jsx(ft.Provider,{value:{health:n,isOnline:u,lastHealthAt:o,refreshHealth:x,login:f,setToken:C,logout:I,showLogin:l,setShowLogin:h,showTokenInput:a,setShowTokenInput:g,showAuthChooser:$,setShowAuthChooser:S},children:t})}function gt(){const t=J.useContext(ft);if(!t)throw new Error("useAuth must be used within AuthProvider");return t}function Zt(){const{i18n:t}=X(),[n,s]=i.useState(null),[o,r]=i.useState(!1),[u,d]=i.useState("dark"),[l,h]=i.useState(!0),[a,g]=i.useState(!1),[$,S]=i.useState(!1),[x,f]=i.useState(!1),[C,I]=i.useState(0),[w,F]=i.useState(!1),[y,c]=i.useState("classic"),b=_=>{h(_),fe({autoOpen:_}).catch(console.error)},k=_=>{g(_),fe({showHidden:_}).catch(console.error)},L=_=>{S(_),fe({showLogs:_}).catch(console.error)},j=_=>{f(_),fe({hideMemoryUsage:_}).catch(console.error)},z=_=>{I(_),fe({maxEditorSize:_}).catch(console.error),localStorage.setItem("mlc_max_editor_size",_.toString())},B=_=>{c(_),fe({uiMode:_}).catch(console.error)};return i.useEffect(()=>{Yt().then(_=>{s(_),typeof _.allowDelete<"u"&&F(!!_.allowDelete),_.theme&&d(_.theme),typeof _.autoOpen<"u"&&h(_.autoOpen),typeof _.showHidden<"u"&&g(_.showHidden),typeof _.showLogs<"u"&&S(_.showLogs),_.hideMemoryUsage&&f(_.hideMemoryUsage),_.maxEditorSize&&(I(_.maxEditorSize),localStorage.setItem("mlc_max_editor_size",_.maxEditorSize.toString())),_.uiMode&&c(_.uiMode);const Y=new URLSearchParams(window.location.search),O=Y.get("theme");O==="light"||O==="dark"?(d(O),O==="light"?document.documentElement.classList.add("theme-light"):document.documentElement.classList.remove("theme-light")):_.theme==="light"?document.documentElement.classList.add("theme-light"):document.documentElement.classList.remove("theme-light");const V=Y.get("lng")||Y.get("lang");V&&V!==_.language?(fe({language:V}).catch(console.error),t.language!==V&&t.changeLanguage(V)):_.language&&t.language!==_.language&&t.changeLanguage(_.language),r(!0)}).catch(()=>{s({allowDelete:!1,defaultShell:"bash"}),r(!0)})},[]),i.useEffect(()=>{u==="light"?document.documentElement.classList.add("theme-light"):document.documentElement.classList.remove("theme-light")},[u]),{settings:n,loadedSettings:o,theme:u,setTheme:d,autoOpen:l,setAutoOpen:b,showHidden:a,setShowHidden:k,showLogs:$,toggleLogs:L,hideMemoryUsage:x,toggleHideMemoryUsage:j,maxEditorSize:C,updateMaxEditorSize:z,canChangeRoot:w,uiMode:y,setUiMode:B,i18n:t}}function Gt(t=8){var y;const[n,s]=i.useState({root:{tabs:[],activeTabId:""}}),[o,r]=i.useState({type:"leaf",paneId:"root"}),[u,d]=i.useState("root"),[l,h]=i.useState({}),[a,g]=i.useState("");i.useEffect(()=>{const c=n[u];g((c==null?void 0:c.activeTabId)||"")},[n,u]);const $=((y=n[u])==null?void 0:y.tabs)||[],S=c=>{s(b=>{const k=b[u];if(!k)return b;const L=c(k.tabs);return{...b,[u]:{...k,tabs:L}}})},x=c=>{s(b=>{const k=b[u];return k?{...b,[u]:{...k,activeTabId:c}}:b})};function f(c,b,k,L){let j=b||"editor",z=k||c.split("/").pop()||c;return c==="metadata"?(j="custom",z="Details"):c==="binary"?(j="binary",z="Binary View"):c==="trash"&&(j="custom",z="Trash"),b||(c.startsWith("shell-")?(j="terminal",z="Terminal"):c.endsWith(".png")||c.endsWith(".jpg")||c.endsWith(".jpeg")),{id:c,path:c,label:z,type:j,icon:j==="terminal"?"terminal":void 0,intent:L}}function C(c,b,k,L){S(j=>j.find(z=>z.id===c&&z.intent===L)?j:[...j.filter(z=>z.id!==c),f(c,b,k,L)]),x(c),!c.startsWith("shell-")&&c!=="metadata"&&c!=="binary"&&c!=="trash"&&ge(c).then(j=>{h(z=>({...z,[c]:j}))}).catch(()=>{})}const I=(c,b)=>{const k=`pane-${Date.now()}`,L=n[u];let j;if(b&&(j=L==null?void 0:L.tabs.find(z=>z.id===b)),!j){const z=L==null?void 0:L.activeTabId;j=L==null?void 0:L.tabs.find(B=>B.id===z)}s(z=>({...z,[k]:{tabs:j?[j]:[],activeTabId:j?j.id:""}})),r(z=>{const B=_=>_.type==="leaf"?_.paneId===u?{type:"branch",direction:c,size:50,children:[_,{type:"leaf",paneId:k}]}:_:{..._,children:[B(_.children[0]),B(_.children[1])]};return B(z)}),d(k)},w=c=>{c==="root"&&o.type==="leaf"||(r(b=>{const k=j=>{if(j.type==="leaf")return j.paneId===c?null:j;const z=k(j.children[0]),B=k(j.children[1]);return!z&&!B?null:z?B?{...j,children:[z,B]}:z:B};return k(b)||{type:"leaf",paneId:"root"}}),s(b=>{const k={...b};return delete k[c],k}),u===c&&d("root"))},F=(c,b)=>{r(k=>{const L=j=>j===c?{...j,size:b}:j.type==="branch"?{...j,children:[L(j.children[0]),L(j.children[1])]}:j;return L(k)})};return i.useEffect(()=>{const b=new URLSearchParams(window.location.search).get("profileId");if(b){const k={panes:n,layout:o,activePaneId:u};localStorage.setItem(`workspace_state_${b}`,JSON.stringify(k))}},[n,o,u]),i.useEffect(()=>{const b=new URLSearchParams(window.location.search).get("profileId");if(b)try{const k=localStorage.getItem(`workspace_state_${b}`);if(k){const L=JSON.parse(k);if(L.panes){const j={};for(const[z,B]of Object.entries(L.panes)){const _=B;if(_.files&&Array.isArray(_.files)){const Y=_.files.map(V=>f(V));let O=_.activeFile||"";Y.find(V=>V.id===O)||(O=Y.length>0?Y[Y.length-1].id:""),j[z]={tabs:Y,activeTabId:O}}else if(_.tabs&&Array.isArray(_.tabs)){const Y=_.tabs.map(O=>({...O,dirty:!1}));j[z]={..._,tabs:Y}}else j[z]={tabs:[],activeTabId:""}}s(j)}L.layout&&r(L.layout),L.activePaneId&&d(L.activePaneId)}}catch(k){console.error("Failed to restore workspace state",k)}},[]),{panes:n,setPanes:s,layout:o,setLayout:r,activePaneId:u,setActivePaneId:d,openTabs:$,setOpenTabs:S,activeTabId:a,setActiveTab:x,openFile:C,splitPane:I,closePane:w,handleLayoutResize:F,fileMetas:l,setFileMetas:h}}const T=({name:t,className:n,title:s,size:o=16})=>{if(!t)return null;const r=`#${t}`;return e.jsxs("svg",{className:n,width:o,height:o,"aria-hidden":s?void 0:"true",role:s?"img":void 0,children:[s?e.jsx("title",{children:s}):null,e.jsx("use",{href:r})]})},Jt={tar:"icon-archive",js:"icon-js",minus:"icon-minus","flag-de":"icon-flag-de",txt:"icon-text",warn:"icon-warning",search:"icon-search",cr:"icon-chevron-right",pdf:"icon-pdf",markdown:"icon-markdown",download:"icon-download",sh:"icon-terminal",stop:"icon-stop",refresh:"icon-refresh",user:"icon-user",copy:"icon-copy","flag-fr":"icon-flag-fr",gif:"icon-image",upload:"icon-upload",cfg:"icon-settings",settings:"icon-settings",info:"icon-info",shell:"icon-terminal",run:"icon-play","flag-gb":"icon-flag-gb",bz2:"icon-archive",mjs:"icon-js",x:"icon-close",cl:"icon-chevron-left",up:"icon-up",server:"icon-server",trash:"icon-trash",jpg:"icon-image",gz:"icon-archive",json:"icon-json",plus:"icon-plus",screenshot:"icon-screenshot",sun:"icon-sun",jpeg:"icon-image",zip:"icon-archive",close:"icon-close",log:"icon-log",view:"icon-view",link:"icon-link",md:"icon-markdown",home:"icon-home",moon:"icon-moon","flag-es":"icon-flag-es",dir:"icon-folder",png:"icon-image",svg:"icon-image"};function he(t){if(t)return Jt[t.toLowerCase()]}function Ge(t,n){if(n){const s=n.lastIndexOf(".");if(s>=0&&s<n.length-1){const o=n.slice(s+1).toLowerCase();return he(o)}}}const D=t=>"icon-"+t,Ah=()=>"icon-folder";function Qt(t){const{t:n}=X(),{logoVisible:s,setLogoVisible:o,onOpenTerminal:r,onToggleTheme:u,onScreenshot:d,onOpenTrash:l,onSplitPane:h,onCloseActivePane:a,canCloseActivePane:g,isControlled:$,theme:S,settingsOpen:x,setSettingsOpen:f,aboutOpen:C,setAboutOpen:I,autoOpen:w,setAutoOpen:F,showHidden:y,setShowHidden:c,showLogs:b,toggleLogs:k,hideMemoryUsage:L,toggleHideMemoryUsage:j,maxEditorSize:z,updateMaxEditorSize:B,uiMode:_,onToggleUiMode:Y,i18n:O}=t;return e.jsxs("header",{className:"app-header",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("img",{src:"/logo.png",alt:"MLCRemote logo",style:{height:28,display:"block"},onLoad:()=>o(!0),onError:()=>o(!1)}),!s&&e.jsx("h1",{style:{margin:0},children:"MLCRemote"})]}),e.jsxs("div",{className:"status",children:[e.jsx("button",{className:"link icon-btn",onClick:r,title:n("terminal"),"aria-label":n("terminal"),children:e.jsx(T,{name:D("terminal"),title:n("terminal"),size:16})}),!$&&e.jsx("button",{className:"link icon-btn","aria-label":"Toggle theme",onClick:u,children:S==="dark"?e.jsx(T,{name:D("moon"),title:n("theme"),size:16}):e.jsx(T,{name:D("sun"),title:n("theme"),size:16})}),e.jsx("button",{className:"link icon-btn",title:n("about"),"aria-label":n("about"),onClick:()=>I(!0),children:e.jsx(T,{name:D("info"),title:n("about"),size:16})}),!$&&e.jsx("button",{className:"link icon-btn",title:"Screenshot","aria-label":"Screenshot",onClick:d,children:e.jsx(T,{name:D("screenshot"),title:"Screenshot",size:16})}),e.jsx("button",{className:"link icon-btn",title:"Trash","aria-label":"Trash",onClick:l,children:e.jsx(T,{name:"icon-trash",title:"Trash",size:16})}),e.jsx("button",{className:"link icon-btn",title:"Split Right","aria-label":"Split Right",onClick:()=>h("vertical"),children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",style:{display:"block"},children:[e.jsx("path",{fillRule:"evenodd",d:"M14 3H2a1 1 0 00-1 1v8a1 1 0 001 1h12a1 1 0 001-1V4a1 1 0 00-1-1zM2 2a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V4a2 2 0 00-2-2H2z",clipRule:"evenodd"}),e.jsx("path",{d:"M8 4v8H7V4h1z"})]})}),e.jsx("button",{className:"link icon-btn",title:"Split Down","aria-label":"Split Down",onClick:()=>h("horizontal"),children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",style:{display:"block"},children:[e.jsx("path",{fillRule:"evenodd",d:"M14 3H2a1 1 0 00-1 1v8a1 1 0 001 1h12a1 1 0 001-1V4a1 1 0 00-1-1zM2 2a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V4a2 2 0 00-2-2H2z",clipRule:"evenodd"}),e.jsx("path",{d:"M2 8h12v1H2V8z"})]})}),g&&e.jsx("button",{className:"link icon-btn",title:"Close Active Pane","aria-label":"Close Active Pane",onClick:a,style:{marginLeft:4},children:e.jsx(T,{name:D("close"),size:16})}),e.jsx("button",{className:"link icon-btn","aria-label":n("settings"),title:n("settings"),onClick:()=>f(V=>!V),children:e.jsx(T,{name:D("settings"),title:n("settings"),size:16})})]})]})}function en(){const{t}=X(),{showAuthChooser:n,setShowAuthChooser:s,showLogin:o,setShowLogin:r,showTokenInput:u,setShowTokenInput:d,login:l,setToken:h}=gt(),[a,g]=i.useState(""),[$,S]=i.useState("");return!n&&!o&&!u?null:e.jsxs(e.Fragment,{children:[n&&e.jsx("div",{className:"login-overlay",children:e.jsxs("div",{className:"login-box",children:[e.jsx("h3",{children:t("auth_not_authenticated","Not Authenticated")}),e.jsx("p",{children:t("auth_required_msg","You need to sign in or provide an access key to continue.")}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[e.jsxs("button",{className:"btn",onClick:()=>{s(!1),r(!0)},children:[t("open")," (",t("password","password"),")"]}),e.jsx("button",{className:"btn",onClick:()=>{s(!1),d(!0)},children:t("auth_have_key","I have an access key")})]})]})}),o&&e.jsx("div",{className:"login-overlay",children:e.jsxs("div",{className:"login-box",children:[e.jsx("h3",{children:t("sign_in","Sign in")}),e.jsx("p",{children:t("auth_enter_password","Please enter the server password to obtain an access token.")}),e.jsx("input",{type:"password",placeholder:t("password","Password"),value:a,onChange:x=>g(x.target.value),onKeyDown:x=>{x.key==="Enter"&&l(a).catch(f=>alert(t("login_failed","Login failed")+": "+((f==null?void 0:f.message)||f)))}}),e.jsxs("div",{style:{marginTop:8},children:[e.jsx("button",{className:"btn",onClick:async()=>{try{await l(a)}catch(x){alert(t("login_failed","Login failed")+": "+((x==null?void 0:x.message)||x))}},children:t("open")}),e.jsx("button",{className:"btn link",style:{marginLeft:8},onClick:()=>{r(!1),s(!0)},children:t("back","Back")})]})]})}),u&&e.jsx("div",{className:"login-overlay",children:e.jsxs("div",{className:"login-box",children:[e.jsx("h3",{children:t("auth_enter_token","Enter Access Token")}),e.jsx("p",{children:t("auth_token_msg","The server requires an access token. Paste it here to continue.")}),e.jsx("input",{type:"text",placeholder:t("token","token"),value:$,onChange:x=>S(x.target.value),onKeyDown:x=>{if(x.key==="Enter")try{h($.trim())}catch(f){alert(t("token_failed","Failed to store token")+": "+((f==null?void 0:f.message)||f))}}}),e.jsxs("div",{style:{marginTop:8},children:[e.jsx("button",{className:"btn",onClick:async()=>{try{h($.trim())}catch(x){alert(t("token_failed","Failed to store token")+": "+((x==null?void 0:x.message)||x))}},children:t("use_token","Use token")}),e.jsx("button",{className:"btn link",style:{marginLeft:8},onClick:()=>{d(!1),s(!0)},children:t("back","Back")})]})]})})]})}function ue(t){if(!t||t<=0)return"0 B";const n=1024,s=n*1024,o=s*1024;return t>=o?`${(t/o).toFixed(2)} GB`:t>=s?`${(t/s).toFixed(2)} MB`:t>=n?`${(t/n).toFixed(2)} KB`:`${t} B`}function tn({onClose:t,health:n,lastHealthAt:s}){const{t:o}=X();return e.jsx("div",{className:"about-backdrop",onClick:t,children:e.jsxs("div",{className:"about-modal",onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h3",{style:{margin:0},children:o("app_title","MLCRemote")}),e.jsx("button",{"aria-label":o("close"),title:o("close"),onClick:t,style:{background:"transparent",border:"none",cursor:"pointer"},children:e.jsx(T,{name:"icon-close",size:16})})]}),e.jsxs("div",{style:{marginBottom:8},children:[o("copyright")," Â© ",new Date().getFullYear()," Michael Lechner"]}),e.jsxs("div",{style:{marginBottom:8},children:[o("version"),": ",n?`${n.status}@${n.version}`:o("unknown")]}),n&&e.jsxs("div",{style:{maxHeight:"40vh",overflow:"auto",background:"#0b0b0b",color:"white",padding:12,borderRadius:6},children:[e.jsxs("div",{children:[e.jsxs("strong",{children:[o("host"),":"]})," ",n.host]}),e.jsxs("div",{children:[e.jsxs("strong",{children:[o("pid"),":"]})," ",n.pid]}),e.jsxs("div",{children:[e.jsxs("strong",{children:[o("version"),":"]})," ",n.version]}),e.jsxs("div",{children:[e.jsxs("strong",{children:[o("app_memory"),":"]})," ",ue(n.go_alloc_bytes)," (",o("alloc"),") / ",ue(n.go_sys_bytes)," (",o("sys"),")"]}),e.jsxs("div",{children:[e.jsxs("strong",{children:[o("system_memory"),":"]})," ",ue((n.sys_mem_total_bytes||0)-(n.sys_mem_free_bytes||0))," / ",ue(n.sys_mem_total_bytes||0)," ",o("used")]}),e.jsxs("div",{children:[e.jsxs("strong",{children:[o("cpu"),":"]})," ",Math.round((n.cpu_percent||0)*10)/10,"%"]}),e.jsxs("div",{style:{marginTop:8},children:[e.jsxs("strong",{children:[o("server_time"),":"]})," ",n.server_time]}),e.jsxs("div",{style:{marginTop:4},children:[e.jsxs("strong",{children:[o("timezone"),":"]})," ",n.timezone]}),e.jsxs("div",{className:"muted",style:{marginTop:8,fontSize:12},children:[o("last_refresh"),": ",s?new Date(s).toLocaleString():"n/a"]})]})]})})}function Ae({x:t,y:n,items:s,onClose:o}){const r=i.useRef(null);i.useEffect(()=>{function l(h){r.current&&!r.current.contains(h.target)&&o()}return window.addEventListener("mousedown",l),window.addEventListener("scroll",o,!0),window.addEventListener("resize",o),()=>{window.removeEventListener("mousedown",l),window.removeEventListener("scroll",o,!0),window.removeEventListener("resize",o)}},[o]);const[u,d]=i.useState({x:t,y:n});return i.useLayoutEffect(()=>{if(r.current){const l=r.current.getBoundingClientRect();let h=t,a=n;h+l.width>window.innerWidth&&(h=window.innerWidth-l.width-8),a+l.height>window.innerHeight&&(a=window.innerHeight-l.height-8),d({x:h,y:a})}},[t,n]),e.jsx("div",{ref:r,style:{position:"fixed",left:u.x,top:u.y,background:"var(--panel)",border:"1px solid var(--border)",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",borderRadius:6,padding:4,zIndex:99999,minWidth:160,display:"flex",flexDirection:"column"},onContextMenu:l=>{l.preventDefault(),o()},children:s.map((l,h)=>l.separator?e.jsx("div",{style:{height:1,background:"var(--border)",margin:"4px 0"}},h):e.jsxs("button",{className:"context-menu-item",onClick:()=>{o(),l.action()},style:{display:"flex",alignItems:"center",gap:8,padding:"6px 10px",border:"none",background:"transparent",color:l.danger?"var(--danger)":"var(--text)",cursor:"pointer",textAlign:"left",borderRadius:4,fontSize:13},onMouseEnter:a=>a.currentTarget.style.background=l.danger?"rgba(239,68,68,0.1)":"var(--bg)",onMouseLeave:a=>a.currentTarget.style.background="transparent",children:[l.icon&&e.jsx("span",{style:{width:16,display:"flex"},children:l.icon}),l.label]},h))})}function nn({onSelect:t,showHidden:n,onToggleHidden:s,autoOpen:o=!0,onView:r,onBackendActive:u,onChangeRoot:d,canChangeRoot:l,selectedPath:h,activeDir:a,onDirChange:g,focusRequest:$,reloadSignal:S,showMessageBox:x}){const{t:f}=X(),[C,I]=i.useState(""),[w,F]=i.useState([]),[y,c]=i.useState(!1),[b,k]=i.useState(""),[L,j]=i.useState(null),[z,B]=i.useState(!1),[_,Y]=i.useState(null),O=i.useCallback(async m=>{c(!0),k("");try{const v=await Be(m,{showHidden:n});F(v),I(m);try{V.current!==m&&(g==null||g(m),V.current=m)}catch{}u==null||u();try{const U=ae.current;U&&requestAnimationFrame(()=>{const W=re.current;if(W)try{const se=W.querySelector(`[data-path="${CSS.escape(U)}"]`);se&&(se.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"}),se.focus())}catch{}})}catch{}}catch(v){v.message==="Permission denied"?k(f("permission_denied")):k(v.message||f("status_failed"))}finally{c(!1)}},[n,u,g,f]),V=i.useRef("");i.useEffect(()=>{typeof a>"u"||a!==C&&O(a)},[a,C,O]),i.useEffect(()=>{O("")},[O]),i.useEffect(()=>{O(C||"");const m=v=>{if(v.key==="Backspace"){const U=document.activeElement;if(U&&(U.tagName==="INPUT"||U.tagName==="TEXTAREA"||U.isContentEditable))return;v.preventDefault(),_e()}};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[C,O,S]);const _e=()=>{if(!C||C==="/"){O("");return}const m=C.split("/").filter(Boolean);m.pop();const v=`/${m.join("/")}`;O(v||"")},be=async(m,v)=>{if(!v||v.length===0)return;const U=async()=>{B(!0),k("");try{const W=new FormData;for(let ce=0;ce<v.length;ce++)W.append("file",v[ce],v[ce].name);const se=`?path=${encodeURIComponent(m)}`;if(!(await ee(`/api/upload${se}`,{method:"POST",body:W})).ok)throw new Error(f("status_failed"));await O(m)}catch(W){k(W.message||f("status_failed"))}finally{B(!1)}};if(x)x(f("upload"),f("upload_confirm",`Upload ${v.length} file(s) to ${m}?`),U,f("upload"));else{if(!confirm(f("upload_confirm",`Upload ${v.length} file(s) to ${m}?`)))return;U()}},me=(m,v)=>{m.preventDefault(),console.log("onDrop triggered",v),j(null),be(v,m.dataTransfer.files)},Z=(m,v)=>{m.preventDefault(),j(v)},te=m=>{m.preventDefault(),j(null)},re=i.useRef(null),ae=i.useRef("");i.useEffect(()=>{ae.current=h||""},[h]),i.useEffect(()=>{if(h)try{const m=re.current;if(!m)return;const v=m.querySelector(`li[key="${CSS.escape(h)}"]`),U=m.querySelector(`[data-path="${h}"]`),W=v||U;if(W){W.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"});const se=W.querySelector("button.entry");se&&se.focus()}}catch{}},[h,C]),i.useEffect(()=>{if($)try{const m=h||"";if(!m)return;const v=re.current;if(!v)return;const U=CSS.escape(m),W=v.querySelector(`[data-path="${U}"]`);W&&(W.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"}),W.focus())}catch{}},[$,h]);const le=async m=>{const v=async()=>{try{await qt(m),O(C)}catch(U){x?x(f("error"),f("status_failed")+": "+U.message):alert(f("status_failed")+": "+U.message)}};if(x)x(f("delete"),f("delete_confirm",{path:m}),v,f("delete"));else{if(!confirm(f("delete_confirm",{path:m})))return;v()}},ne=(m,v)=>{m.preventDefault(),m.stopPropagation(),Y({x:m.clientX,y:m.clientY,item:v})};return e.jsxs("div",{className:"explorer",children:[e.jsxs("div",{className:"explorer-header",children:[e.jsx("strong",{className:"hidden",children:e.jsx(T,{name:D("dir")})}),e.jsxs("div",{className:"explorer-controls",children:[e.jsx("button",{className:"link icon-btn",title:f("refresh"),onClick:()=>O(C||""),children:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M23 4v6h-6"}),e.jsx("path",{d:"M1 20v-6h6"}),e.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})}),l&&typeof d=="function"&&e.jsx("button",{className:"link icon-btn","aria-label":f("change_root"),title:f("change_root"),onClick:async()=>{try{await Promise.resolve(d(""))}catch{}},children:e.jsx(T,{name:D("dir")})})]}),e.jsxs("div",{className:"breadcrumbs",children:[e.jsx("button",{type:"button",className:"link icon-btn",onClick:()=>O(""),title:"Server Root",children:e.jsx(T,{name:D("terminal"),size:14})}),C&&C.split("/").filter(Boolean).map((m,v,U)=>{const W=`/${U.slice(0,v+1).join("/")}`;return e.jsxs("span",{children:[" / ",e.jsx("button",{className:"link",onClick:()=>O(W),children:m})]},W)})]})]}),e.jsxs("div",{className:"explorer-body",onDrop:m=>me(m,C||""),onDragOver:m=>Z(m,C||""),onDragLeave:te,children:[y&&e.jsx("div",{className:"muted",children:f("loading")}),b&&e.jsx("div",{className:"error",children:b}),z&&e.jsxs("div",{className:"muted",children:[f("upload"),"..."]}),!y&&!b&&e.jsxs("ul",{className:"entry-list",ref:re,children:[C&&C!=="/"&&e.jsx("li",{children:e.jsx("button",{type:"button",className:"entry",onClick:_e,children:".."})},"up"),w.map(m=>e.jsx("li",{onContextMenu:v=>ne(v,m),children:m.isDir?e.jsxs("button",{"data-path":m.path,type:"button",className:"entry"+(h===m.path?" selected":""),onClick:v=>{v.stopPropagation(),t(m.path,!0)},onDoubleClick:()=>{if(m.isRestricted){x?x(f("error"),f("permission_denied")):alert(f("permission_denied"));return}O(m.path)},onDrop:v=>me(v,m.path),onDragOver:v=>Z(v,m.path),onDragLeave:te,children:[e.jsx("span",{className:"icon",children:e.jsx(T,{name:he("dir")||D("dir")})})," ",m.name,m.isSymlink&&e.jsx("span",{title:"Symbolic Link",style:{marginLeft:4,opacity:.5},children:"ðŸ”—"}),m.isBroken&&e.jsx("span",{title:"Broken Link",style:{marginLeft:4},children:"âŒ"}),m.isExternal&&e.jsx("span",{title:"External Link",style:{marginLeft:4},children:"â†—ï¸"}),m.isReadOnly&&e.jsx("span",{title:"Read Only",style:{marginLeft:4},children:"ðŸ”’"}),m.isRestricted&&e.jsx("span",{title:f("permission_denied"),style:{marginLeft:4},children:"â›”"}),L===m.path?e.jsx("span",{style:{marginLeft:8,fontSize:12,color:"#888"},children:f("drop_to_upload")}):null]}):e.jsxs("div",{style:{display:"flex",gap:2,alignItems:"center"},children:[e.jsxs("button",{"data-path":m.path,type:"button",className:"entry",style:{flex:1,textAlign:"left"},onClick:()=>{if(o===!1){t(m.path,!1),r&&r("metadata");return}t(m.path,!1)},children:[e.jsx("span",{className:"icon",children:e.jsx(T,{name:Ge(void 0,m.name)||he(m.name.split(".").pop()||"")||D("view")||"icon-text"})})," ",m.name,m.isSymlink&&e.jsx("span",{title:"Symbolic Link",style:{marginLeft:4,opacity:.5},children:"ðŸ”—"}),m.isBroken&&e.jsx("span",{title:"Broken Link",style:{marginLeft:4},children:"âŒ"}),m.isExternal&&e.jsx("span",{title:"External Link",style:{marginLeft:4},children:"â†—ï¸"}),m.isReadOnly&&e.jsx("span",{title:"Read Only",style:{marginLeft:4},children:"ðŸ”’"}),m.isRestricted&&e.jsx("span",{title:f("permission_denied"),style:{marginLeft:4},children:"â›”"})]}),o?null:e.jsx("button",{className:"btn",onClick:()=>r?r(m.path):t(m.path,!1),title:f("view_file"),children:e.jsx(T,{name:D("view")})})]})},m.path))]})]}),_&&e.jsx(Ae,{x:_.x,y:_.y,onClose:()=>Y(null),items:[{label:f("open","Open"),icon:e.jsx(T,{name:D("view")}),action:()=>{_.item.isDir?(O(_.item.path),t(_.item.path,!0)):o?t(_.item.path,!1):r?r(_.item.path):t(_.item.path,!1)}},..._.item.isDir?[]:[{label:f("download"),icon:e.jsx(T,{name:D("download")}),action:()=>{const m=document.createElement("a");m.href=we(`/api/file?path=${encodeURIComponent(_.item.path)}${localStorage.getItem("mlcremote_token")?`&token=${encodeURIComponent(localStorage.getItem("mlcremote_token")||"")}`:""}`),m.download=_.item.name,document.body.appendChild(m),m.click(),document.body.removeChild(m)},separator:!0}],{label:f("copy_full_path"),icon:e.jsx(T,{name:D("copy")}),action:async()=>{try{await navigator.clipboard.writeText(_.item.path)}catch(m){console.error("Failed to copy",m)}}},{label:f("copy_relative_path"),icon:e.jsx(T,{name:D("link")}),action:async()=>{try{const m=_.item.path.startsWith("/")?_.item.path.slice(1):_.item.path;await navigator.clipboard.writeText(m)}catch(m){console.error("Failed to copy",m)}}},{label:f("copy_name"),icon:e.jsx(T,{name:D("text")}),action:async()=>{try{await navigator.clipboard.writeText(_.item.name)}catch(m){console.error(m)}},separator:!0},{label:f("delete"),icon:e.jsx(T,{name:D("trash")}),danger:!0,action:()=>le(_.item.path)}]})]})}const _t=({entry:t,depth:n,onToggle:s,onSelect:o,onOpen:r,selectedPath:u,showHidden:d,onContextMenu:l,refreshSignal:h})=>{const[a,g]=i.useState(null),[$,S]=i.useState(!1),[x,f]=i.useState(!1);i.useEffect(()=>{$&&(g(null),C())},[d]),i.useEffect(()=>{h&&h.path===t.path&&$&&C()},[h]);const C=async()=>{f(!0);try{const w=await Be(t.path,{showHidden:d});w.sort((F,y)=>F.isDir===y.isDir?F.name.localeCompare(y.name):F.isDir?-1:1),g(w)}catch(w){console.error(w)}f(!1)},I=async w=>{$?S(!1):(S(!0),a||C())};return t.path,e.jsxs("div",{className:"tree-item-container",children:[e.jsxs("div",{className:`tree-node ${u===t.path?"selected":""}`,style:{paddingLeft:n*12+8},onClick:w=>{w.stopPropagation(),o(t.path,t.isDir),t.isDir&&I(t.path)},onDoubleClick:w=>{w.stopPropagation(),!t.isDir&&r&&r(t.path)},onContextMenu:w=>{w.preventDefault(),w.stopPropagation(),l==null||l(t,w.clientX,w.clientY)},children:[e.jsx("div",{className:"tree-arrow",children:t.isDir&&e.jsx("div",{className:$?"rotate-90":"",children:e.jsx(T,{name:D("chevron-right"),size:14})})}),e.jsx("div",{className:"tree-icon",children:e.jsx(T,{name:t.isDir?D("folder"):Ge(void 0,t.name)||he(t.name.split(".").pop()||"")||D("view")})}),e.jsx("div",{className:"tree-label",children:t.name})]}),$&&e.jsxs("div",{children:[x&&e.jsx("div",{style:{paddingLeft:(n+1)*12+8,fontStyle:"italic",opacity:.5},children:"Loading..."}),a&&a.map(w=>e.jsx(_t,{entry:w,depth:n+1,onToggle:s,onSelect:o,onOpen:r,selectedPath:u,showHidden:d,onContextMenu:l,refreshSignal:h},w.path))]})]})};function sn({selectedPath:t,onSelect:n,onOpen:s,root:o="/",showHidden:r,onContextMenu:u,refreshSignal:d}){const{t:l}=X(),[h,a]=i.useState([]),[g,$]=i.useState(!1),S=()=>{$(!0),Be(o,{showHidden:r}).then(x=>{x.sort((f,C)=>f.isDir===C.isDir?f.name.localeCompare(C.name):f.isDir?-1:1),a(x)}).catch(console.error).finally(()=>$(!1))};return i.useEffect(()=>{S()},[o,r]),i.useEffect(()=>{d&&d.path===o&&S()},[d]),g?e.jsxs("div",{className:"muted",style:{padding:10},children:[l("loading"),"..."]}):e.jsx("div",{className:"file-tree",style:{paddingBottom:20},children:h.map(x=>e.jsx(_t,{entry:x,depth:0,onToggle:()=>{},onSelect:n,onOpen:s,selectedPath:t,showHidden:r,onContextMenu:u,refreshSignal:d},x.path))})}function on(t){const{showHidden:n,selectedPath:s,onSelect:o,root:r="/",onActivityChange:u,onRefresh:d}=t,[l,h]=i.useState("files"),a=g=>{h(g),u==null||u(g)};return e.jsxs("div",{className:"modern-sidebar",children:[e.jsxs("div",{className:"activity-bar",children:[e.jsx("div",{className:`activity-icon ${l==="files"?"active":""}`,onClick:()=>a("files"),title:"Explorer",children:e.jsx(T,{name:D("copy"),size:24})}),e.jsx("div",{className:"activity-icon",onClick:()=>{var g;return(g=t.onOpenTerminal)==null?void 0:g.call(t)},title:"New Terminal",children:e.jsx(T,{name:D("terminal"),size:24})}),e.jsx("div",{className:"activity-icon",onClick:()=>{var g;return(g=t.onOpenTrash)==null?void 0:g.call(t)},title:"Trash",children:e.jsx(T,{name:"icon-trash",size:24})}),e.jsx("div",{style:{flex:1}}),e.jsx("div",{className:`activity-icon ${l==="settings"?"active":""}`,onClick:()=>{var g;return(g=t.onToggleSettings)==null?void 0:g.call(t)},title:"Settings",children:e.jsx(T,{name:D("settings"),size:24})})]}),e.jsxs("div",{className:"side-panel",children:[l==="files"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"panel-title",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("span",{children:"EXPLORER"}),e.jsx("div",{style:{display:"flex",gap:4},children:d&&e.jsx("button",{className:"icon-btn",title:"Refresh",onClick:d,children:e.jsx(T,{name:D("refresh")||"icon-refresh",size:14})})})]}),e.jsx("div",{style:{flex:1,overflow:"auto"},children:e.jsx(sn,{root:r,showHidden:n,selectedPath:s,onSelect:o,onOpen:t.onOpen,onContextMenu:t.onContextMenu,refreshSignal:t.refreshSignal})})]}),l==="settings"&&e.jsx("div",{style:{padding:20,textAlign:"center",opacity:.5},children:"Settings via gear icon"})]})]})}function rn({autoOpen:t,showHidden:n,onToggleAutoOpen:s,onToggleShowHidden:o,showLogs:r,onToggleLogs:u,hideMemoryUsage:d,onToggleHideMemoryUsage:l,onClose:h,onLanguageChange:a,maxEditorSize:g,onMaxFileSizeChange:$,uiMode:S,onToggleUiMode:x}){const{t:f,i18n:C}=X(),[I,w]=J.useState(d),F=c=>{C.changeLanguage(c),a==null||a(c)},y=[{code:"en",name:"English"},{code:"de",name:"Deutsch"},{code:"es",name:"EspaÃ±ol"},{code:"fr",name:"FranÃ§ais"}];return e.jsx("div",{style:{position:"absolute",right:12,top:40,zIndex:5e3},children:e.jsxs("div",{style:{width:320,background:"var(--bg)",border:"1px solid var(--muted)",borderRadius:6,boxShadow:"0 6px 20px rgba(0,0,0,0.12)",padding:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("strong",{children:f("settings")}),e.jsx("button",{"aria-label":f("close"),title:f("close"),onClick:h,style:{background:"transparent",border:"none",cursor:"pointer"},children:e.jsx(T,{name:D("close"),size:16})})]}),e.jsxs("div",{style:{marginTop:12},children:[e.jsx("label",{style:{fontSize:11,fontWeight:600,textTransform:"uppercase",color:"var(--text-muted)",display:"block",marginBottom:8,letterSpacing:"0.05em"},children:f("language")}),e.jsx("div",{style:{display:"flex",gap:8,marginTop:4},children:y.map(c=>{const b=C.language===c.code||c.code==="en"&&!C.language,k=c.code==="en"?"gb":c.code;return e.jsx("button",{onClick:()=>F(c.code),title:c.name,style:{display:"flex",alignItems:"center",justifyContent:"center",padding:6,background:b?"var(--bg-select)":"var(--bg-panel)",border:b?"1px solid var(--accent)":"1px solid var(--border)",borderRadius:6,cursor:"pointer",transition:"all 0.2s",opacity:b?1:.7},onMouseOver:L=>{b||(L.currentTarget.style.opacity="1")},onMouseOut:L=>{b||(L.currentTarget.style.opacity="0.7")},children:e.jsx(T,{name:`icon-flag-${k}`,size:24})},c.code)})})]}),e.jsx("div",{style:{marginTop:12},children:e.jsxs("label",{style:{fontSize:13},children:[e.jsx("input",{type:"checkbox",checked:t,onChange:c=>s(c.target.checked)})," ",f("auto_open_files","Auto open files")]})}),e.jsx("div",{style:{marginTop:8},children:e.jsxs("label",{style:{fontSize:13},children:[e.jsx("input",{type:"checkbox",checked:n,onChange:c=>o(c.target.checked)})," ",f("show_hidden_files","Show hidden files")]})}),e.jsx("div",{style:{marginTop:8},children:e.jsxs("label",{style:{fontSize:13},children:[e.jsx("input",{type:"checkbox",checked:r,onChange:c=>u(c.target.checked)})," ",f("show_server_logs","Show server logs")]})}),e.jsx("div",{style:{marginTop:8},children:e.jsxs("label",{style:{fontSize:13},children:[e.jsx("input",{type:"checkbox",checked:I,onChange:c=>{w(c.target.checked),l(c.target.checked)}})," ",f("hide_memory_usage","Hide memory usage gauge")]})}),e.jsxs("div",{style:{marginTop:12,borderTop:"1px solid var(--border)",paddingTop:8},children:[e.jsx("strong",{style:{fontSize:12,color:"var(--text-muted)"},children:f("editor_settings","Editor Settings")}),e.jsxs("div",{style:{marginTop:6,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("label",{style:{fontSize:13},title:f("max_file_size_tooltip","Files larger than this (MB) will open in read-only mode"),children:f("max_file_size","Max File Size (MB)")}),e.jsx("input",{type:"number",min:"0.1",step:"0.5",style:{width:60,background:"var(--bg-panel)",border:"1px solid var(--border)",color:"var(--text)",borderRadius:4,padding:"2px 4px"},value:((g||parseInt(localStorage.getItem("mlc_max_editor_size")||"1048576"))/1024/1024).toFixed(1),onChange:c=>{const b=parseFloat(c.target.value);if(b>0){const k=Math.floor(b*1024*1024);localStorage.setItem("mlc_max_editor_size",k.toString()),$==null||$(k)}}})]})]}),e.jsxs("div",{style:{marginTop:12,borderTop:"1px solid var(--border)",paddingTop:8},children:[e.jsx("label",{style:{fontSize:13,display:"block",marginBottom:4},children:"UI Mode"}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("button",{className:"btn",style:{flex:1,background:S==="classic"?"var(--accent)":"transparent",color:S==="classic"?"#fff":"var(--text)",border:"1px solid var(--border)"},onClick:()=>x("classic"),children:"Classic"}),e.jsx("button",{className:"btn",style:{flex:1,background:S==="modern"?"var(--accent)":"transparent",color:S==="modern"?"#fff":"var(--text)",border:"1px solid var(--border)"},onClick:()=>x("modern"),children:"Modern (Beta)"})]})]})]})})}function an(){const{t}=X(),[n,s]=i.useState(null),[o,r]=i.useState(!1),u=i.useCallback(async()=>{r(!0);try{const h=await ee("/api/trash/recent");if(!h.ok)throw new Error("fetch failed");const a=await h.json();Array.isArray(a)&&a.length>0?s(a[0]):s(null)}catch(h){console.warn("Failed to fetch trash",h)}finally{r(!1)}},[]);if(i.useEffect(()=>{u();const h=setInterval(u,1e4);return()=>clearInterval(h)},[u]),o&&!n)return e.jsx("div",{className:"muted",children:t("loading_trash")});if(!n)return e.jsx("div",{className:"muted",children:t("trash_empty")});const d=n.originalPath.split("/").pop()||n.originalPath,l=Ge(void 0,d)||he(d.split(".").pop()||"")||"icon-trash";return e.jsxs("div",{style:{padding:12},children:[e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx(T,{name:l,size:20}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{fontWeight:600},children:d}),e.jsx("div",{className:"muted",style:{fontSize:12},children:new Date(n.deletedAt).toLocaleString()})]})]}),e.jsxs("div",{style:{marginTop:12},children:[e.jsxs("div",{className:"muted",children:[t("original_path"),": ",n.originalPath]}),e.jsxs("div",{className:"muted",children:[t("trash_path"),": ",n.trashPath]})]}),e.jsxs("div",{style:{marginTop:12},children:[e.jsx("button",{className:"btn",disabled:!0,children:t("undo_coming")}),(()=>{const h=Ue(),a=`/api/file?path=${encodeURIComponent(n.trashPath)}`+(h?`&token=${encodeURIComponent(h)}`:"");return e.jsx("a",{className:"btn",style:{marginLeft:8},href:a,download:d,children:t("download")})})()]})]})}const cn=new Set(["txt","md","markdown","yaml","yml","json","js","ts","jsx","tsx","html","css","env","ini","cfg","conf","csh","gitignore","dockerfile","sql"]),ln=new Set(["zip","gz","tar","rar","exe","dll","so","bin","jpg","jpeg","png","gif","webp","pdf"]);function Je(t){const n=t.split("/"),s=n[n.length-1]||"",o=s.lastIndexOf(".");return o===-1?"":s.slice(o+1).toLowerCase()}function yt(t){const n=Je(t);return!n||cn.has(n)?!0:!ln.has(n)}async function dn(t){if(!t)return{mime:"application/octet-stream",isText:!1,ext:""};try{const n=`?path=${encodeURIComponent(t)}`,s=await ee(`/api/filetype${n}`);if(!s.ok)throw new Error("probe failed");return await s.json()}catch{const s=Je(t);return{mime:"application/octet-stream",isText:yt(t),ext:s}}}function un(t){if(!t)return null;const n=t.split("/"),o=(n[n.length-1]||"").toLowerCase();return o===".bashrc"||o==="bashrc"||o===".bash_profile"||o===".profile"?"bashrc":o===".zshrc"||o==="zshrc"?"zshrc":o===".bash_history"||o==="bash_history"?"bash_history":o==="makefile"?"makefile":o==="dockerfile"?"dockerfile":o==="nginx.conf"||o==="nginx.conf.default"?"conf":null}function hn(t){const n=Ze.languages;switch(t){case"jsx":return n.jsx;case"tsx":return n.tsx;case"java":return n.java;case"ini":case"gitconfig":case"editorconfig":case"conf":case"config":return n.ini;case"js":return n.javascript;case"ts":return n.typescript;case"go":return n.go;case"php":return n.php;case"json":return n.json;case"yaml":case"yml":return n.yaml;case"toml":return n.toml||n.markup;case"md":case"markdown":return n.markdown;case"c":case"h":return n.c;case"cpp":case"hpp":return n.cpp;case"py":return n.python;case"makefile":return n.makefile;case"bashrc":case"zshrc":case"bash_history":case"profile":return n.bash;case"sh":case"bash":return n.bash;case"xml":case"xml-doc":return n["xml-doc"];case"html":case"htm":return n.markup;case"css":case"sass":case"scss":return n.sass;case"sql":return n.sql;default:return n.javascript}}function De(t){switch(t){case"js":case"jsx":return"javascript";case"ts":case"tsx":return"typescript";case"go":return"go";case"php":return"php";case"json":return"json";case"yaml":case"yml":return"yaml";case"toml":return"toml";case"ini":case"gitconfig":case"editorconfig":case"conf":case"config":return"ini";case"md":case"markdown":return"markdown";case"c":case"h":return"c";case"cpp":case"cxx":case"c++":case"hpp":return"cpp";case"py":return"python";case"makefile":return"makefile";case"dockerfile":return"dockerfile";case"sh":case"bash":case"csh":return"bash";case"bashrc":case"zshrc":case"bash_history":case"profile":return"bash";case"xml":case"xml-doc":return"xml-doc";case"html":case"htm":return"markup";case"sass":case"scss":return"sass";case"sql":return"sql";case"less":case"css":return"css";default:return"text"}}function dt(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function mn(t,n){try{const s=hn(n),o=De(n);return s?Ze.highlight(t,s,o):dt(t)}catch(s){return console.warn("Prism highlight failed",s),dt(t)}}function pn({content:t,setContent:n,origContent:s,ext:o,alias:r,textareaId:u,readOnly:d}){const{t:l}=X(),h=i.useRef(null),a=i.useRef(null);return i.useEffect(()=>{var $;const g=r||De(o);a.current&&a.current.setAttribute("data-grammar",g),h.current&&h.current.setAttribute("data-grammar",g);try{const S=($=a.current)==null?void 0:$.querySelector("code");S&&Ze.highlightElement(S)}catch{}},[r,t,o]),i.useEffect(()=>{h.current&&a.current&&(a.current.scrollTop=h.current.scrollTop,a.current.scrollLeft=h.current.scrollLeft)},[t]),e.jsxs("div",{className:"editor-edit-area",children:[e.jsx("pre",{"aria-hidden":!0,className:`highlight-wrap language-${r||De(o)}`,"data-grammar":r||De(o),ref:g=>{a.current=g},children:e.jsx("code",{className:`language-${r||De(o)}`,dangerouslySetInnerHTML:{__html:mn(t||"",o)}})}),e.jsx("textarea",{ref:h,className:"textarea",wrap:"off",value:t,name:u||"editor",id:u,"data-grammar":r,onChange:g=>n(g.target.value),onScroll:()=>{h.current&&a.current&&(a.current.scrollTop=h.current.scrollTop,a.current.scrollLeft=h.current.scrollLeft)},placeholder:d?l("empty_file_readonly","Empty file (Read Only)"):l("empty_file","Empty file"),spellCheck:!1,autoCorrect:"off",autoCapitalize:"off",autoComplete:"off",readOnly:d})]})}function fn({path:t,onDimensions:n}){const{t:s}=X(),o=Ue(),r=we(`/api/file?path=${encodeURIComponent(t)}${o?`&token=${encodeURIComponent(o)}`:""}`),[u,d]=i.useState(null),l=i.useRef(null);return e.jsxs("div",{style:{marginTop:8},children:[e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",overflow:"hidden"},children:e.jsx("img",{ref:l,src:r,alt:t.split("/").pop(),style:{maxWidth:"100%",maxHeight:"80vh",objectFit:"contain",borderRadius:6,boxShadow:"0 2px 8px rgba(0,0,0,0.4)"},onLoad:()=>{try{const h=l.current;if(h&&h.naturalWidth&&h.naturalHeight){d({w:h.naturalWidth,h:h.naturalHeight});try{n&&n(h.naturalWidth,h.naturalHeight)}catch{}}}catch{}}})}),e.jsxs("div",{style:{marginTop:8,display:"flex",gap:8,alignItems:"center"},children:[e.jsx("a",{className:"link",href:r,download:t.split("/").pop(),children:s("download")}),u?e.jsxs("span",{className:"muted",style:{marginLeft:8},children:[u.w," Ã— ",u.h]}):null]})]})}const gn=i.lazy(()=>Le(()=>import("./PdfPreview-XvE_bbUM.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57]),import.meta.url));function _n({path:t}){const{t:n}=X();return e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"muted",children:n("loading_pdf")}),children:e.jsx(gn,{path:t})})}const yn=i.lazy(()=>Le(()=>import("./ShellView-CQBCQynv.js"),__vite__mapDeps([58,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,59,54,55,52,53,56,57]),import.meta.url)),xn=i.lazy(()=>Le(()=>import("./MarkdownPreview-BnGPyL1a.js"),__vite__mapDeps([60,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81]),import.meta.url)),vn=i.lazy(()=>Le(()=>import("./ArchiveViewer-Vy94p192.js"),__vite__mapDeps([82,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57]),import.meta.url)),wn={name:"Shell",priority:100,matches:t=>!!(t.path&&t.path.startsWith("shell-")),view:({path:t})=>e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"muted",children:"Loading shellâ€¦"}),children:e.jsx(yn,{path:t})}),isEditable:!1},bn={name:"Directory",priority:90,matches:t=>!!(t.meta&&t.meta.isDir),view:({path:t,origContent:n})=>e.jsxs("div",{style:{padding:12},children:[e.jsxs("div",{style:{fontWeight:600},children:["Directory: ",t]}),e.jsxs("div",{className:"muted",style:{marginTop:6},children:[n?n.split(`
`).length:"0"," entries"]}),e.jsx("pre",{style:{marginTop:8,maxHeight:240,overflow:"auto",padding:8,background:"var(--panel)"},children:n})]}),isEditable:!1},jn={name:"PDF",priority:80,matches:t=>t.probe&&t.probe.mime==="application/pdf"||!!t.path&&t.path.toLowerCase().endsWith(".pdf"),view:({path:t})=>e.jsx(_n,{path:t}),isEditable:!1},$n={name:"Image",priority:70,matches:t=>{if(t.probe&&t.probe.mime&&t.probe.mime.startsWith("image/"))return!0;if(t.path){const n=t.path.toLowerCase();return n.endsWith(".png")||n.endsWith(".jpg")||n.endsWith(".jpeg")||n.endsWith(".gif")||n.endsWith(".svg")||n.endsWith(".webp")}return!1},view:({path:t,onDimensions:n})=>e.jsx(fn,{path:t,onDimensions:n}),isEditable:!1},kn={name:"Archive",priority:65,matches:t=>{if(!t.path)return!1;const n=t.path.toLowerCase();return n.endsWith(".zip")||n.endsWith(".tar")||n.endsWith(".tar.gz")||n.endsWith(".tgz")},view:({path:t})=>e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"muted",children:"Loading archive..."}),children:e.jsx(vn,{path:t})}),isEditable:!1},Sn={name:"Markdown",priority:60,matches:t=>t.intent==="view"&&!!(t.path&&t.path.toLowerCase().endsWith(".md")),view:({content:t})=>e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"muted",children:"Loading preview..."}),children:e.jsx(xn,{content:t||""})}),isEditable:!1},Cn={name:"Text",priority:50,matches:t=>t.probe&&t.probe.isText?!0:t.probe&&!t.probe.isText?!1:!!(t.path&&yt(t.path)),view:({content:t,setContent:n,origContent:s,ext:o,alias:r,textareaId:u,readOnly:d})=>e.jsx(pn,{content:t||"",setContent:n||(()=>{}),origContent:s||"",ext:o||"",alias:r,textareaId:u||"editor",readOnly:d}),isEditable:!0},En={name:"Binary",priority:10,matches:t=>!!(t.probe&&!t.probe.isText),view:({path:t})=>e.jsxs("div",{style:{marginTop:8,display:"flex",gap:8},children:[e.jsx("a",{className:"link",href:we(`/api/file?path=${encodeURIComponent(t)}`),download:t.split("/").pop(),children:"Download"}),e.jsx("span",{className:"muted",children:"(Binary or unsupported file type)"})]}),isEditable:!1},xt={name:"Unsupported",priority:0,matches:()=>!0,view:({path:t})=>e.jsxs("div",{style:{padding:12},className:"muted",children:["Unsupported file type: ",t]}),isEditable:!1},Ln=[wn,bn,jn,$n,kn,Sn,Cn,En,xt].sort((t,n)=>n.priority-t.priority);function Fe(t){for(const n of Ln)if(n.matches(t))return n;return xt}function Tn(t){return t.charCodeAt(0)===65279?{text:t.slice(1),hasBOM:!0}:{text:t,hasBOM:!1}}function zn(t){return"\uFEFF"+t}function vt({title:t,message:n,onClose:s,onConfirm:o,confirmLabel:r,cancelLabel:u}){const{t:d}=X();return i.useEffect(()=>{const l=h=>{h.key==="Escape"&&s()};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[s]),e.jsx("div",{className:"login-overlay",onClick:s,children:e.jsxs("div",{className:"login-box",onClick:l=>l.stopPropagation(),style:{minWidth:350,maxWidth:500},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[e.jsx("h3",{style:{margin:0,fontSize:18},children:t}),e.jsx("button",{className:"link icon-btn",onClick:s,"aria-label":d("close"),children:e.jsx(T,{name:D("close"),size:16})})]}),e.jsx("div",{style:{marginBottom:24,fontSize:14,lineHeight:"1.5",color:"var(--text-muted)"},children:n}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:12},children:o?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn",onClick:s,children:u||d("cancel")}),e.jsx("button",{className:"btn primary",onClick:o,children:r||d("continue")})]}):e.jsx("button",{className:"btn",onClick:s,children:d("close")})})]})})}function Nn({path:t,onSaved:n,settings:s,reloadTrigger:o,onUnsavedChange:r,onMeta:u,intent:d,onOpen:l,customLabel:h}){const{t:a}=X(),[g,$]=i.useState(""),[S,x]=i.useState(""),[f,C]=i.useState(!1),[I,w]=i.useState(""),[F,y]=i.useState(!1),[c,b]=i.useState(null),[k,L]=i.useState(!1),[j,z]=i.useState(null),[B,_]=i.useState(null),[Y,O]=i.useState(null),[V,_e]=i.useState(null),[be,me]=i.useState(!1),Z=i.useRef(null),te=i.useRef(null),re=i.useRef(null),[ae,le]=i.useState(null),ne=Fe({path:t,meta:c,probe:j,intent:d}),m=ne.view,v=i.useCallback(async(M=!1)=>{if(t){y(!0),w("");try{const P=await ge(t);if(b(P),typeof u=="function"&&u(P),!M&&Y&&V&&P.modTime!==V&&!confirm(a("confirm_reload_external","File has been modified externally. Reload?"))){y(!1);return}_e(P.modTime);const oe=await dn(t);z(oe);const K=Fe({path:t,meta:P,probe:oe,intent:d});if(P.isDir){$(""),y(!1);return}if(K.name==="Text"){const ve=await Vt(t),{text:Ne,hasBOM:Me}=Tn(ve);$(Ne),x(Ne),C(Me),O(Date.now()),me(!1)}else $(""),y(!1)}catch{j&&j.isText&&(w(a("failed_to_load","Failed to load")),me(!0)),O(null)}finally{y(!1)}}},[t,a]),W=(()=>{try{const M=localStorage.getItem("mlc_max_editor_size");if(M)return parseInt(M,10)}catch{}return 1024*1024})(),se=async(M,P=64*1024)=>{if(t){L(!0);try{const oe=`?path=${encodeURIComponent(t)}&offset=${M}&length=${P}`,K=await ee(`/api/file/section${oe}`);if(!K.ok)throw new Error("section fetch failed");const ve=await K.text();$(ve),x(ve)}catch{w(a("failed_to_load_section","Failed to load section"))}finally{L(!1)}}},ce=un(t)||j&&j.ext||Je(t),Ve=void 0,ze=j&&j.ext?j.ext:"text",ye=(M=>M?"editor-"+M.replace(/[^a-z0-9_-]/gi,"-").replace(/-+/g,"-"):"editor")(t||"");i.useEffect(()=>{v()},[v]),i.useEffect(()=>{let M=!0;return(async()=>{if(!(!c||!c.isDir||!t))try{const P=await Be(t);if(!M)return;$(""),x(P.map(oe=>oe.name).join(`
`))}catch{}})(),()=>{M=!1}},[c,t]),i.useEffect(()=>{o&&o>0&&v(!0)},[o,v]),i.useEffect(()=>{Z.current&&te.current&&(te.current.scrollTop=Z.current.scrollTop,te.current.scrollLeft=Z.current.scrollLeft)},[g]),i.useEffect(()=>{if(Z.current&&te.current){const M=window.getComputedStyle(te.current),P=M.lineHeight,oe=M.paddingTop,K=M.paddingBottom;P&&(Z.current.style.lineHeight=P),oe&&(Z.current.style.paddingTop=oe),K&&(Z.current.style.paddingBottom=K)}},[g,t]),i.useEffect(()=>{var M;te.current&&te.current.setAttribute("data-grammar",ze),Z.current&&(Z.current.setAttribute("data-grammar",ze),ye&&(Z.current.id=ye));try{const P=(M=te.current)==null?void 0:M.querySelector("code");P&&Prism.highlightElement(P)}catch{}},[ze,g,ye]),i.useEffect(()=>{if(!r||!ne.isEditable)return;const M=g!==S;if(re.current===null||re.current!==M){try{r(t,M)}catch(P){console.warn("onUnsavedChange threw",P)}re.current=M}},[g,S,r,t,ne.isEditable]);const xe=async()=>{if(t){w(a("saving","Saving..."));try{const M=f?zn(g):g;await Wt(t,M),w(a("saved","Saved")),setTimeout(()=>w(P=>P===a("saved","Saved")?"":P),1500),await v(!0),n&&n()}catch{w(a("save_failed","Save failed"))}}},We=async()=>{if(!t)return;const M=async()=>{w(a("reloading","Reloading..."));try{await v(!0),w(a("reloaded","Reloaded")),setTimeout(()=>w(P=>P===a("reloaded","Reloaded")?"":P),1500)}catch{w(a("reload_failed","Reload failed"))}};if(g!==S){le({title:a("unsaved_changes_title","Unsaved Changes"),message:a("confirm_reload_unsaved","You have unsaved changes. Reloading will discard them. Continue?"),onConfirm:()=>{le(null),M()}});return}M()};return i.useEffect(()=>{const M=P=>{(P.ctrlKey||P.metaKey)&&P.key==="s"&&(P.preventDefault(),xe())};return window.addEventListener("keydown",M),()=>window.removeEventListener("keydown",M)},[xe]),e.jsxs("div",{className:"editor",children:[ae&&e.jsx(vt,{title:ae.title,message:ae.message,onClose:()=>le(null),onConfirm:ae.onConfirm}),e.jsxs("div",{className:"editor-header",children:[e.jsx("strong",{children:a("editor")}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{className:"muted",children:c&&c.absPath?c.absPath:h||t||a("select_or_create")}),(c==null?void 0:c.isReadOnly)&&e.jsx("span",{className:"badge badge-error",style:{fontSize:10,padding:"1px 4px"},children:a("read_only","READ ONLY")}),d==="view"&&e.jsx("span",{className:"badge box-accent",style:{fontSize:10,padding:"1px 4px",background:"var(--accent)",color:"white",borderRadius:4},children:a("preview","PREVIEW")})]}),c&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"muted",style:{fontSize:11},children:[c.isDir?"directory":ne.name,"Â· ",c.mode," Â· ",new Date(c.modTime).toLocaleString()," ",c.size?`Â· ${ue(c.size)}`:""]}),B&&ne.name==="Image"?e.jsxs("span",{style:{fontSize:11,marginLeft:8},className:"muted",children:[B.w," Ã— ",B.h]}):null]})]}),e.jsxs("div",{className:"actions",children:[e.jsx("button",{className:"link icon-btn",title:a("refresh"),"aria-label":a("refresh"),onClick:We,disabled:!t,children:e.jsx(T,{name:he("refresh")||"icon-refresh",title:a("refresh"),size:16})}),(ce==="md"||ce==="markdown")&&l&&e.jsx("button",{className:"link icon-btn",title:a(d==="view"?"edit":"preview"),onClick:()=>l(t,void 0,void 0,d==="view"?"edit":"view"),children:e.jsx(T,{name:D(d==="view"?"terminal":"view")||"view",size:16})}),ne.isEditable&&g!==S&&e.jsx("button",{className:"link icon-btn",title:c!=null&&c.isReadOnly?a("read_only_file"):a("save"),"aria-label":a("save"),onClick:xe,disabled:!t||(c==null?void 0:c.isReadOnly),style:c!=null&&c.isReadOnly?{opacity:.5,cursor:"not-allowed"}:{},children:e.jsx(T,{name:he("upload")||"icon-upload",title:a("save"),size:16})})]}),c&&c.size&&c.size>W&&ne.isEditable?e.jsxs("div",{style:{marginLeft:12},children:[e.jsx("div",{className:"muted",style:{fontSize:12},children:a("file_too_large","File is large ({{size}}). Full edit disabled.",{size:ue(c.size)})}),e.jsxs("div",{style:{marginTop:6,display:"flex",gap:8},children:[e.jsx("button",{className:"btn",onClick:()=>se(0,64*1024),children:a("view_head","View head")}),e.jsx("button",{className:"btn",onClick:()=>se(Math.max(0,(c.size||0)-64*1024),64*1024),children:a("view_tail","View tail")})]}),k&&e.jsx("div",{className:"muted",children:a("loading_section","Loading section...")})]}):null,I&&e.jsx("div",{className:"muted",children:I})]}),e.jsx("div",{className:"editor-body",children:F?e.jsx("div",{className:"muted",children:a("loading")}):e.jsx(m,{path:t,content:g,setContent:$,origContent:S,ext:ce,alias:Ve,textareaId:ye,onDimensions:(M,P)=>_({w:M,h:P}),readOnly:c==null?void 0:c.isReadOnly,intent:d})})]})}function Rn({path:t}){const{t:n}=X(),[s,o]=i.useState(null),[r,u]=i.useState(null);return i.useEffect(()=>{let d=!0;return(async()=>{if(!t){o(null);return}try{const l=await ge(t);if(!d)return;o(l),u(null)}catch(l){if(!d)return;u((l==null?void 0:l.message)||n("failed_fetch_metadata")),o(null)}})(),()=>{d=!1}},[t,n]),t?e.jsxs("div",{style:{padding:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600},children:t.split("/").pop()}),e.jsx("div",{className:"muted",style:{fontSize:12},children:t})]}),e.jsx("div",{children:e.jsx("a",{className:"link",href:`/api/file?path=${encodeURIComponent(t)}`,download:t.split("/").pop(),children:n("download")})})]}),e.jsxs("div",{style:{marginTop:12},children:[r?e.jsx("div",{className:"error",children:r}):null,s?e.jsx("table",{style:{width:"100%",borderCollapse:"collapse"},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{width:160,padding:6},className:"muted",children:n("full_path")}),e.jsx("td",{style:{padding:6},children:s.path||t})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"muted",style:{padding:6},children:n("mime")}),e.jsx("td",{style:{padding:6},children:s.mime||"unknown"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"muted",style:{padding:6},children:n("size")}),e.jsx("td",{style:{padding:6},children:s.size?ue(s.size):"n/a"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"muted",style:{padding:6},children:n("mode")}),e.jsx("td",{style:{padding:6},children:s.mode||"n/a"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"muted",style:{padding:6},children:n("last_modified")}),e.jsx("td",{style:{padding:6},children:s.modTime?new Date(s.modTime).toLocaleString():"n/a"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"muted",style:{padding:6},children:n("is_dir")}),e.jsx("td",{style:{padding:6},children:s.isDir?n("yes"):n("no")})]})]})}):e.jsx("div",{className:"muted",children:n("loading_metadata")})]})]}):e.jsx("div",{style:{padding:12},className:"muted",children:n("no_file_selected")})}function Dn({path:t}){const{t:n}=X(),[s,o]=i.useState(null),[r,u]=i.useState(null);return i.useEffect(()=>{let d=!0;return(async()=>{if(!t){o(null);return}try{const l=await ge(t);if(!d)return;o(l),u(null)}catch(l){if(!d)return;u((l==null?void 0:l.message)||n("failed_fetch_metadata")),o(null)}})(),()=>{d=!1}},[t,n]),t?e.jsxs("div",{style:{padding:24,maxWidth:600,margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16,marginBottom:32},children:[e.jsx("div",{style:{fontSize:48,opacity:.8,color:s!=null&&s.isRestricted||s!=null&&s.isReadOnly?"var(--danger)":"inherit"},children:e.jsx(T,{name:s!=null&&s.isRestricted?D("lock"):s!=null&&s.isDir?D("folder"):he(t.split(".").pop()||"")||"icon-file",size:48})}),e.jsx("div",{style:{textAlign:"center"},children:e.jsxs("h2",{style:{margin:0,wordBreak:"break-all",display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[t.split("/").pop(),(s==null?void 0:s.isRestricted)&&e.jsx("span",{className:"badge badge-error",style:{fontSize:12,verticalAlign:"middle"},children:n("restricted","Restricted")}),(s==null?void 0:s.isReadOnly)&&!(s!=null&&s.isRestricted)&&e.jsx("span",{className:"badge badge-error",style:{fontSize:12,verticalAlign:"middle"},children:n("read_only","Read Only")})]})}),e.jsx("div",{style:{display:"flex",gap:12},children:s&&!s.isDir&&e.jsxs("a",{className:"btn primary",href:we(`/api/file?path=${encodeURIComponent(t)}`),download:t.split("/").pop(),children:[e.jsx("span",{style:{marginRight:6,display:"inline-flex"},children:e.jsx(T,{name:"icon-download",size:16})}),n("download")]})})]}),e.jsxs("div",{className:"panel",style:{padding:16,borderRadius:8,background:"var(--bg-subtle)"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:16,borderBottom:"1px solid var(--border)",paddingBottom:8},children:n("properties","Properties")}),r?e.jsx("div",{className:"error",children:r}):null,s?e.jsx("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:13},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{width:120,padding:"8px 0",color:"var(--text-muted)"},children:n("path","Path")}),e.jsx("td",{style:{padding:"8px 0",wordBreak:"break-all"},children:s.absPath||t})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{width:120,padding:"8px 0",color:"var(--text-muted)"},children:n("type")}),e.jsx("td",{style:{padding:"8px 0"},children:s.isDir?n("directory","Directory"):s.mime||"unknown"})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"8px 0",color:"var(--text-muted)"},children:n("size")}),e.jsx("td",{style:{padding:"8px 0"},children:s.size?ue(s.size):"0 B"})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"8px 0",color:"var(--text-muted)"},children:n("mode")}),e.jsx("td",{style:{padding:"8px 0"},children:e.jsx("span",{style:{fontFamily:"monospace",background:"var(--bg)",padding:"2px 4px",borderRadius:4},children:s.mode||"n/a"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"8px 0",color:"var(--text-muted)"},children:n("last_modified")}),e.jsx("td",{style:{padding:"8px 0"},children:s.modTime?new Date(s.modTime).toLocaleString():"n/a"})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"8px 0",color:"var(--text-muted)"},children:n("is_dir")}),e.jsx("td",{style:{padding:"8px 0"},children:s.isDir?n("yes"):n("no")})]})]})}):e.jsxs("div",{className:"muted",children:[n("loading"),"..."]})]})]}):e.jsx("div",{style:{padding:24,textAlign:"center"},className:"muted",children:n("no_file_selected")})}function Pn({tabs:t,activeId:n,onActivate:s,onClose:o,onCloseOthers:r,onCloseLeft:u,onSplitRight:d,onSplitDown:l}){const{t:h}=X(),[a,g]=i.useState(null),$=i.useRef(null),S=i.useRef(null),[x,f]=i.useState(!1),[C,I]=i.useState(!1),w=()=>{const y=S.current;if(!y){f(!1),I(!1);return}f(y.scrollLeft>0),I(y.scrollWidth>y.clientWidth+y.scrollLeft+1)},F=y=>{const c=S.current;c&&(c.scrollBy({left:y,behavior:"smooth"}),setTimeout(w,220))};return i.useEffect(()=>{function y(b){$.current&&(b.target instanceof Node&&$.current.contains(b.target)||g(null))}function c(b){b.key==="Escape"&&g(null)}return document.addEventListener("click",y),document.addEventListener("keydown",c),()=>{document.removeEventListener("click",y),document.removeEventListener("keydown",c)}},[]),i.useEffect(()=>{w();const y=new ResizeObserver(()=>{w()});return S.current&&y.observe(S.current),()=>{y.disconnect()}},[t]),e.jsxs("div",{className:"tabbar",ref:$,children:[x&&e.jsx("button",{className:"tab-scroll tab-scroll-left","aria-label":h("scroll_left"),onClick:()=>F(-200),children:"â—€"}),e.jsx("div",{className:"tab-scroll-area",ref:S,onScroll:w,children:t.map((y,c)=>e.jsx("div",{className:"tab-item",style:{display:"flex",alignItems:"center",gap:8,padding:"4px 8px"},children:e.jsxs("button",{className:y.id===n?"btn":"link",onClick:()=>s(y.id),onContextMenu:b=>{b.preventDefault(),b.stopPropagation(),g(c)},style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{className:"tab-icon",children:(()=>{if(y.label==="Desktop"||y.type,y.icon){const L=y.icon.startsWith("icon-")?y.icon:D(y.icon);return e.jsx(T,{name:L})}if(y.type==="terminal"||y.path.startsWith("shell-")||y.id.startsWith("shell-"))return e.jsx(T,{name:D("terminal")});if(y.type==="custom"&&y.id==="metadata")return e.jsx(T,{name:D("view")});if(y.type==="binary")return e.jsx(T,{name:D("file")});const b=(y.path.split(".").pop()||"").toLowerCase(),k=he(b);return e.jsx(T,{name:k})})()}),(()=>{const b=y.dirty,k=b?"tab-title tab-unsaved":"tab-title",L=y.label.length>20?y.label.slice(0,20)+"â€¦":y.label;return e.jsx("span",{title:y.path,className:k,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:120},children:b?`*${L}`:L})})()]})},y.id))}),a!==null&&(()=>{var k;const y=t[a];if(!y)return null;let c=0,b=0;try{const L=(k=S.current)==null?void 0:k.querySelectorAll(".tab-item"),j=L?L[a]:null;if(j){const z=j.getBoundingClientRect();c=z.left,b=z.bottom+4}}catch{}return e.jsx(Ae,{x:c,y:b,onClose:()=>g(null),items:[{label:h("close","Close"),action:()=>o&&o(y.id)},...t.length>1?[{label:"-",action:()=>{},separator:!0},{label:h("close_others","Close Others"),action:()=>r&&r(y.id)}]:[],...y.type==="editor"||y.type==="binary"||y.type==="terminal"?[{label:"-",action:()=>{},separator:!0},{label:h("copy_path","Copy Path"),action:()=>{navigator.clipboard.writeText(y.path)}},{label:h("copy_rel_path","Copy Relative Path"),action:()=>{navigator.clipboard.writeText(y.path)}},{label:"-",action:()=>{},separator:!0},{label:h("split_right","Split Right"),action:()=>d&&d(y.id)},{label:h("split_down","Split Down"),action:()=>l&&l(y.id)}]:[],...a>0?[{label:"-",action:()=>{},separator:!0},{label:h("close_left","Close to the Left"),action:()=>u&&u(y.id)}]:[]]})})(),C&&e.jsx("button",{className:"tab-scroll tab-scroll-right","aria-label":h("scroll_right"),onClick:()=>F(200),children:"â–¶"})]})}function In({visible:t=!0,onClose:n}){const{t:s}=X(),[,o]=i.useState(0);if(i.useEffect(()=>At(()=>o(l=>l+1)),[]),!t)return null;const r=Ot().slice(0,100);function u(d){const l=[],h=/([\w\/\.\-]+:\d+)/g;let a=0,g;for(;(g=h.exec(d))!==null;)g.index>a&&l.push({text:d.slice(a,g.index)}),l.push({text:g[0],cls:"log-path"}),a=g.index+g[0].length;return a<d.length&&l.push({text:d.slice(a)}),l.map(($,S)=>$.cls?e.jsx("span",{className:$.cls,children:$.text},S):e.jsx("span",{children:$.text},S))}return e.jsxs("div",{className:"log-overlay",children:[e.jsxs("div",{className:"log-header",children:[e.jsx("strong",{children:s("logs")}),e.jsxs("div",{children:[e.jsx("button",{className:"btn",onClick:()=>Ft(),children:s("clear")}),e.jsx("button",{className:"btn",onClick:()=>n&&n(),style:{marginLeft:8},children:s("close")})]})]}),e.jsx("div",{children:r.map((d,l)=>e.jsxs("div",{className:`log-entry log-level-${(d.level||"").toLowerCase()}`,children:[e.jsxs("div",{className:"log-meta",children:[d.ts," ",e.jsx("span",{className:"log-level",children:d.level})]}),e.jsx("div",{className:"log-message",children:u(d.msg)})]},l))})]})}async function ut(t,n="mlcremote-screenshot.png"){const s=await Rt(t,{backgroundColor:null,scale:2});return new Promise(o=>{s.toBlob(r=>{if(!r){o();return}const u=URL.createObjectURL(r),d=document.createElement("a");d.href=u,d.download=n,document.body.appendChild(d),d.click(),d.remove(),URL.revokeObjectURL(u),o()},"image/png")})}class Mn{constructor(n=""){rt(this,"prefix");this.prefix=n}key(n){return`${this.prefix}${n}`}get(n,s,o=null){try{const r=localStorage.getItem(this.key(n)),u=s.read(r);return u===null?o:u}catch{return o}}getOrDefault(n,s,o){const r=this.get(n,s,null);return r===null?o:r}set(n,s,o){try{localStorage.setItem(this.key(n),o.write(s))}catch{}}remove(n){try{localStorage.removeItem(this.key(n))}catch{}}}const Ye={read:t=>t===null?null:t,write:t=>String(t)},ht={read:t=>t===null?null:t==="1"||t==="true",write:t=>t?"1":"0"},Re=new Mn("mlc:");function On({health:t,isOnline:n,hideMemoryUsage:s,lastHealthAt:o}){const{t:r}=X(),[u,d]=i.useState(new Date);return i.useEffect(()=>{const l=window.setInterval(()=>d(new Date),1e3);return()=>window.clearInterval(l)},[]),e.jsxs("div",{className:"status-bar",style:{height:24,background:"var(--bg-alt)",borderTop:"1px solid var(--border)",display:"flex",alignItems:"center",padding:"0 8px",fontSize:12,color:"var(--text-muted)",justifyContent:"space-between",userSelect:"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},title:o?`${r("last_checked","Last checked")}: ${new Date(o).toLocaleTimeString()}`:"",children:[e.jsx("span",{style:{width:8,height:8,borderRadius:4,background:t&&t.host?"#10b981":n?"#f59e0b":"#ef4444"}}),e.jsx("span",{children:t&&t.host?t.host:n?r("connecting"):r("offline","Offline")})]}),e.jsxs("span",{className:n?"ok":"err",title:r(n?"status_connected":"disconnected"),children:[e.jsx(T,{name:"icon-circle-filled",size:10})," ",n?r("online","Online"):r("offline","Offline")]}),t&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"sep"}),e.jsxs("span",{title:`PID: ${t.pid}`,children:["Host: ",t.host||"localhost"]}),t.os&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"sep"}),e.jsx("span",{title:`OS: ${t.os} ${t.distro||""}`,children:t.distro||t.os})]}),e.jsx("span",{className:"sep"}),e.jsxs("span",{title:r("connected_since","Connected since"),children:[r("connected_since","Connected since"),": ",t.start_time," ",t.timezone]})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[!s&&t&&t.sys_mem_total_bytes?(()=>{const l=t.sys_mem_total_bytes||1,h=t.sys_mem_free_bytes||0,a=l-h,g=Math.round(a/l*100);return e.jsx("div",{style:{display:"flex",alignItems:"center",gap:6},title:`System Memory: ${ue(a)} / ${ue(l)} (${g}%)`,children:e.jsxs("div",{style:{width:32,height:14,background:"var(--bg-panel)",border:"1px solid var(--border)",borderRadius:3,position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{width:`${g}%`,height:"100%",background:g>85?"#ef4444":g>60?"#f59e0b":"#3b82f6",transition:"width 0.5s ease"}}),e.jsxs("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",fontSize:9,fontWeight:700,color:"var(--text)",textShadow:"0 0 2px var(--bg)"},children:[g,"%"]})]})})})():null,e.jsx("div",{title:u.toLocaleDateString(),children:new Intl.DateTimeFormat(void 0,{hour:"numeric",minute:"numeric",second:"numeric"}).format(u)})]})]})}function An({direction:t="vertical",initialSize:n=50,minSize:s=10,onResize:o,children:r,className:u}){const[d,l]=J.useState(n);J.useEffect(()=>{l(n)},[n]);const h=J.useRef(null),a=J.useRef(!1),g=J.useRef(n),$=t==="vertical",S=C=>{C.preventDefault(),a.current=!0,g.current=d,document.addEventListener("mousemove",x),document.addEventListener("mouseup",f),document.body.style.cursor=$?"col-resize":"row-resize",document.body.style.userSelect="none";const I=document.createElement("div");I.id="split-drag-overlay",I.style.position="fixed",I.style.top="0",I.style.left="0",I.style.width="100%",I.style.height="100%",I.style.zIndex="9999",I.style.cursor=$?"col-resize":"row-resize",document.body.appendChild(I)},x=C=>{if(!a.current||!h.current)return;const I=h.current.getBoundingClientRect();let w=0;$?w=(C.clientX-I.left)/I.width*100:w=(C.clientY-I.top)/I.height*100,w=Math.max(s,Math.min(100-s,w)),l(w),g.current=w},f=()=>{a.current=!1,document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",f),document.body.style.cursor="",document.body.style.userSelect="";const C=document.getElementById("split-drag-overlay");C&&C.remove(),o&&o(g.current)};return e.jsxs("div",{ref:h,className:`split-pane-container ${t} ${u||""}`,style:{display:"flex",flexDirection:$?"row":"column",width:"100%",height:"100%",overflow:"hidden"},children:[e.jsx("div",{style:{flexBasis:`${d}%`,flexGrow:0,flexShrink:0,overflow:"hidden",position:"relative"},children:r[0]}),e.jsx("div",{className:"split-resizer",style:{flexBasis:"4px",cursor:$?"col-resize":"row-resize",background:"var(--border-color, #444)",zIndex:100,transition:"background 0.2s",position:"relative",alignSelf:"stretch"},onMouseDown:S,children:e.jsx("div",{style:{position:"absolute",top:$?0:-4,bottom:$?0:-4,left:$?-4:0,right:$?-4:0,zIndex:10}})}),e.jsx("div",{style:{flex:1,overflow:"hidden",position:"relative"},children:r[1]})]})}const Fn=i.lazy(()=>Le(()=>import("./TerminalTab-e8oEJ8mY.js"),__vite__mapDeps([59,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,54,55,52,53,56,57]),import.meta.url));function Un(){const{t}=X(),{health:n,isOnline:s,lastHealthAt:o,refreshHealth:r}=gt(),[u,d]=i.useState(0),l=i.useRef(null);i.useEffect(()=>{!l.current&&n&&d(Date.now()),l.current=n},[n]);const[h,a]=i.useState(""),[g,$]=i.useState(""),S=i.useCallback(p=>$(p),[]),[x,f]=i.useState(0),{settings:C,loadedSettings:I,theme:w,setTheme:F,autoOpen:y,setAutoOpen:c,showHidden:b,setShowHidden:k,showLogs:L,toggleLogs:j,hideMemoryUsage:z,toggleHideMemoryUsage:B,canChangeRoot:_,maxEditorSize:Y,updateMaxEditorSize:O,uiMode:V,setUiMode:_e,i18n:be}=Zt(),{panes:me,setPanes:Z,layout:te,activePaneId:re,setActivePaneId:ae,openTabs:le,activeTabId:ne,setActiveTab:m,openFile:v,splitPane:U,closePane:W,handleLayoutResize:se,setFileMetas:He}=Gt(),[ce,Ve]=i.useState(300),[ze,Qe]=i.useState(!0),[ye,xe]=i.useState(!1),[We,M]=i.useState(void 0),[P,oe]=i.useState(!1),[K,ve]=i.useState(null),[Ne,Me]=i.useState({}),[Nu,wt]=i.useState(new Date),[je,$e]=i.useState(null),bt=(p,N,E)=>{ve({x:N,y:E,entry:p})},[qe,et]=i.useState(null),jt=i.useMemo(()=>{const p=new URLSearchParams(window.location.search);return!!p.get("controlled")||!!p.get("theme")},[]);i.useEffect(()=>{const p=N=>{if(N.data){if(N.data.type==="set-theme"){const E=N.data.theme;(E==="light"||E==="dark")&&(F(E),Re.set("theme",E,Ye),E==="light"?document.documentElement.classList.add("theme-light"):document.documentElement.classList.remove("theme-light"))}if(N.data.type==="screenshot"){const E=document.querySelector(".app"),H=N.data.filename||"mlcremote-screenshot.png";E&&ut(E,H)}}};return window.addEventListener("message",p),()=>window.removeEventListener("message",p)},[]);const[$t,Ru]=i.useState({}),[tt,nt]=i.useState({}),kt=i.useCallback((p,N)=>{nt(E=>({...E,[p]:N}))},[]),ke=i.useCallback(async()=>{await r()},[r]);i.useEffect(()=>{const p=window.setInterval(()=>wt(new Date),1e3);return()=>window.clearInterval(p)},[]);const[St,st]=i.useState(null),Ke=p=>p.type==="leaf"?Ct(p.paneId):e.jsxs(An,{direction:p.direction,initialSize:p.size,onResize:N=>se(p,N),children:[Ke(p.children[0]),Ke(p.children[1])]}),Ct=p=>{const N=me[p];if(!N)return e.jsx("div",{className:"muted",children:"Pane not found"});const E=N.tabs.map(R=>{let A=R.label;if(R.id==="metadata"&&(A=t("details","Details")),R.type==="terminal"){const q=Ne[R.id];if(q){const Q=q.split("/").filter(Boolean);Q.length>0?(A=Q[Q.length-1],Q.length>1&&A.includes(".")&&(A=Q[Q.length-1])):A="/"}}return{...R,label:A,dirty:tt[R.id]||!1}}),H=N.activeTabId||"",Se=R=>{ae(p),Z(q=>{const Q=q[p];return Q?{...q,[p]:{...Q,activeTabId:R}}:q});const A=N.tabs.find(q=>q.id===R);A&&A.type==="editor"&&!A.path.includes("metadata")&&A.path.split("/").filter(Boolean).pop(),A&&A.id!=="metadata"&&A.type==="editor"&&a(A.path),f(Date.now())},pe=R=>{const A=me[p];if(!A)return;const q=()=>{if(A.tabs.length===1&&A.tabs[0].id===R&&p!=="root"){W(p);return}Z(de=>{var it;const ie=de[p];if(!ie)return de;const Ce=ie.tabs.filter(Et=>Et.id!==R);let ot=ie.activeTabId;return ie.activeTabId===R&&(ot=((it=Ce[0])==null?void 0:it.id)||""),{...de,[p]:{...ie,tabs:Ce,activeTabId:ot}}})};if(tt[R]){$e({title:t("unsaved_changes_title","Unsaved Changes"),message:t("confirm_close_unsaved","You have unsaved changes. Close anyway?"),confirmLabel:t("close_discard","Close & Discard"),onConfirm:()=>{$e(null),nt(de=>{const ie={...de};return delete ie[R],ie}),q()}});return}q()},Oe=p===re;return e.jsxs("div",{className:`pane-content ${V==="modern"?"modern-tabs":""}`,style:{height:"100%",display:"flex",flexDirection:"column",position:"relative",minWidth:0,overflow:"hidden"},onClick:()=>{Oe||ae(p)},children:[Oe&&e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:2,background:"var(--accent)",zIndex:10}}),E.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{width:"100%",minWidth:0,overflow:"hidden",flexShrink:0},onContextMenu:R=>{R.preventDefault(),ae(p),et({x:R.clientX,y:R.clientY})},children:e.jsx(i.Suspense,{fallback:null,children:e.jsx(Pn,{tabs:E,activeId:H,onActivate:Se,onClose:pe,onCloseOthers:R=>{Z(A=>{const q=A[p];if(!q)return A;const Q=q.tabs.find(de=>de.id===R);return Q?{...A,[p]:{...q,tabs:[Q],activeTabId:R}}:A})},onCloseLeft:R=>{Z(A=>{const q=A[p];if(!q)return A;const Q=q.tabs.findIndex(Ce=>Ce.id===R);if(Q<=0)return A;const de=q.tabs.slice(Q);let ie=q.activeTabId;return de.map(Ce=>Ce.id).includes(ie)||(ie=R),{...A,[p]:{...q,tabs:de,activeTabId:ie}}})},onSplitRight:R=>U("vertical",R),onSplitDown:R=>U("horizontal",R)})})}),e.jsx("div",{style:{flex:1,position:"relative",minHeight:0,overflow:"hidden"},children:E.map(R=>e.jsx("div",{style:{display:R.id===H?"block":"none",height:"100%"},children:(()=>{switch(R.type){case"terminal":return e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"muted",children:t("loading")}),children:e.jsx(Fn,{shell:C&&C.defaultShell||"bash",path:Ne[R.id]||"",onExit:()=>pe(R.id)})});case"custom":return R.id==="trash"?e.jsx(an,{}):R.id==="metadata"?e.jsx(Dn,{path:h}):null;case"binary":return e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"muted",children:"Loadingâ€¦"}),children:e.jsx(Rn,{path:St||void 0})});case"editor":default:return e.jsx(Nn,{path:R.path,settings:C||void 0,onSaved:()=>{},reloadTrigger:$t[R.id]||0,onUnsavedChange:kt,onMeta:A=>{A&&A.path&&He(q=>({...q,[R.id]:A}))},intent:R.intent,onOpen:v})}})()},R.id))})]}):e.jsxs("div",{className:"welcome-message",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--text-muted)"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"10px",opacity:.2},children:e.jsx(T,{name:D("folder"),size:48})}),e.jsx("div",{style:{opacity:.5},children:t("no_files")}),p!=="root"&&e.jsxs("button",{className:"btn link",onClick:()=>W(p),children:[t("close")," Pane"]})]})]})};return I?e.jsxs("div",{className:`app ${w==="light"?"theme-light":"theme-dark"}`,children:[qe&&e.jsx(Ae,{x:qe.x,y:qe.y,onClose:()=>et(null),items:[{label:t("split_right","Split Right"),action:()=>U("vertical")},{label:t("split_down","Split Down"),action:()=>U("horizontal")}]}),V!=="modern"&&e.jsx(Qt,{logoVisible:ze,setLogoVisible:Qe,isControlled:jt,theme:w,onToggleTheme:()=>{const p=w==="dark"?"light":"dark";F(p),Re.set("theme",p,Ye)},onOpenTerminal:async()=>{let p=h||"";try{if(p){const E=await ge(p);if(!E.isDir&&E.absPath){const H=E.absPath.split("/").filter(Boolean);H.pop(),p=H.length?`/${H.join("/")}`:""}}else ne&&ne.startsWith("shell-")}catch{}const N=`shell-${Date.now()}`;Me(E=>({...E,[N]:p||"/"})),v(N,"terminal","Terminal")},onOpenTrash:()=>{const p="trash";le.find(E=>E.id===p)||v(p,"custom","Trash"),m(p)},onScreenshot:async()=>{const p=document.querySelector(".app");if(p)try{await ut(p,"mlcremote-screenshot.png")}catch(N){console.error("Screenshot failed",N)}},onSplitPane:U,onCloseActivePane:()=>W(re),canCloseActivePane:te.type!=="leaf",settingsOpen:ye,setSettingsOpen:xe,aboutOpen:P,setAboutOpen:oe,autoOpen:y,setAutoOpen:c,showHidden:b,setShowHidden:k,showLogs:L,toggleLogs:j,hideMemoryUsage:z,toggleHideMemoryUsage:B,maxEditorSize:Y,updateMaxEditorSize:O,uiMode:V,onToggleUiMode:_e,i18n:be}),e.jsxs("div",{className:"app-body",style:{alignItems:"stretch"},children:[e.jsx("aside",{className:"sidebar",style:{width:ce,padding:V==="modern"?0:8},children:V==="modern"?e.jsx(on,{showHidden:b,selectedPath:h,root:g||"/",onSelect:(p,N)=>{if(a(p),N){v("metadata","custom","Details");return}(async()=>{try{const E=await ge(p),H=Fe({path:p,meta:E});if(!y){le.find(pe=>pe.id===p)?m(p):ne!=="metadata"&&v("metadata","custom","Details"),ke();return}if(H.name==="Binary"||H.name==="Unsupported"){v("binary","binary","Binary View"),st(p),m("binary");return}v(p)}catch(E){$e({title:"Broken Link",message:`Cannot open file: ${E.message||"stat failed"}`});return}})(),ke()},onOpen:p=>{v(p)},onOpenTerminal:()=>{const p=`shell-${Date.now()}`;Me(N=>({...N,[p]:h||"/"})),v(p,"terminal","Terminal")},onToggleSettings:()=>xe(p=>!p),onOpenTrash:()=>{v("trash","custom","Trash"),m("trash")},onContextMenu:bt,refreshSignal:We,onRefresh:()=>M({path:"/",ts:Date.now()})}):e.jsx(nn,{showHidden:b,autoOpen:y,onToggleHidden:p=>k(p),selectedPath:h,activeDir:g,onDirChange:S,focusRequest:x,reloadSignal:u,showMessageBox:(p,N,E,H)=>$e({title:p,message:N,onConfirm:E,confirmLabel:H}),onSelect:(p,N)=>{if(a(p),N){v("metadata","custom","Details");return}(async()=>{try{const E=await ge(p),H=Fe({path:p,meta:E});if(!y){le.find(pe=>pe.id===p)?m(p):ne!=="metadata"&&v("metadata","custom","Details"),ke();return}if(H.name==="Binary"||H.name==="Unsupported"){v("binary","binary","Binary View"),st(p),m("binary");return}}catch(E){$e({title:"Broken Link",message:`Cannot open file: ${E.message||"stat failed"}`});return}v(p)})(),ke()},onView:p=>{le.find(E=>E.id===p)?m(p):v(p),p!=="metadata"&&a(p),ke()},onBackendActive:ke,onChangeRoot:async()=>{if(!_){alert("Changing root is not permitted by the server settings");return}const p=window.prompt("Enter the server directory path to use as new root (e.g. /home/user/project):",h||"/");if(!p)return;const N=p.trim();try{if(!(await ge(N)).isDir){alert("Selected path is not a directory");return}a(N);try{Re.set("lastRoot",N,Ye)}catch{}try{const H=Re.getOrDefault("showHidden",ht,!1);Re.set("showHidden",H,ht)}catch{}}catch(E){alert("Cannot access selected path: "+((E==null?void 0:E.message)||E))}}})}),e.jsx("div",{className:"resizer",onMouseDown:p=>{const N=p.clientX,E=ce;function H(pe){const Oe=pe.clientX-N;Ve(Math.max(160,Math.min(800,E+Oe)))}function Se(){window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",Se)}window.addEventListener("mousemove",H),window.addEventListener("mouseup",Se)},children:e.jsx("div",{className:"bar"})}),e.jsx("main",{className:"main",children:e.jsxs("div",{className:"main-content",children:[e.jsx(en,{}),je&&e.jsx(vt,{title:je.title,message:je.message,onClose:()=>$e(null),onConfirm:je.onConfirm,confirmLabel:je.confirmLabel,cancelLabel:je.cancelLabel}),ye&&e.jsx(rn,{autoOpen:y,showHidden:b,onToggleAutoOpen:c,onToggleShowHidden:k,showLogs:L,onToggleLogs:j,hideMemoryUsage:z,onToggleHideMemoryUsage:B,onClose:()=>xe(!1),onLanguageChange:p=>{p!==be.language&&(be.changeLanguage(p),fe({language:p}).catch(console.error))},maxEditorSize:Y,onMaxFileSizeChange:O,uiMode:V,onToggleUiMode:_e}),Ke(te)]})})]}),K&&e.jsx(Ae,{x:K.x,y:K.y,onClose:()=>ve(null),items:[{label:t("properties","Properties"),icon:e.jsx(T,{name:D("info")}),action:()=>{a(K.entry.path),v("metadata","custom","Details")}},...K.entry.isDir?[{label:t("upload_file","Upload File"),icon:e.jsx(T,{name:"icon-upload"}),action:()=>{const p=document.createElement("input");p.type="file",p.onchange=async N=>{const E=N.target.files[0];if(E)try{await Kt(K.entry.path,E);const H=(K.entry.path==="/"?"":K.entry.path)+"/"+E.name;a(H),v("metadata","custom","Details"),M({path:K.entry.path,ts:Date.now()})}catch(H){console.error(H),alert(t("upload_failed","Upload failed"))}},p.click()}}]:[{label:t("open","Open"),icon:e.jsx(T,{name:D("terminal")}),action:()=>{a(K.entry.path),v(K.entry.path,void 0,void 0,"edit")}},{label:t("preview","Open Preview"),icon:e.jsx(T,{name:D("view")}),action:()=>{a(K.entry.path),v(K.entry.path,void 0,void 0,"view")}},{label:t("download","Download"),icon:e.jsx(T,{name:"icon-download"}),action:()=>{const p=Ue(),N=we(`/api/file?path=${encodeURIComponent(K.entry.path)}&token=${p}&download=true`),E=document.createElement("a");E.href=N,E.download=K.entry.name,document.body.appendChild(E),E.click(),document.body.removeChild(E)}}]]}),e.jsx(On,{health:n,isOnline:s,hideMemoryUsage:z,lastHealthAt:o}),e.jsx(In,{visible:L,onClose:()=>j(!1)}),P&&e.jsx(tn,{onClose:()=>oe(!1),health:n,lastHealthAt:o})]}):null}const Bn="MLCRemote IDE",Hn="Files",Vn="Terminal",Wn="Settings",qn="Search",Kn="New File",Yn="New Folder",Xn="Rename",Zn="Save",Gn="Cancel",Jn="Theme",Qn="Screenshot",es="Language",ts="Editor",ns="Run",ss="Debug",os="Close",is="Edit",rs="Preview",as="Open",cs="Loading...",ls="No files open",ds="Switch to Remote View",us="Disconnected from server",hs="Refresh",ms="Change Root",ps="Upload",fs="Download",gs="Copy Full Path",_s="Copy Relative Path",ys="Copy Name",xs="Are you sure you want to delete {{path}}?",vs="Auto open files",ws="Show hidden files",bs="Show server logs",js="Hide memory usage gauge",$s="About MLCRemote",ks="Version",Ss="Copyright",Cs="Drop to upload",Es="View file",Ls="Loading trash...",Ts="Trash is empty",zs="Original path",Ns="Trash path",Rs="Undo (coming)",Ds="Connected to shell session: {{id}}",Ps="Connected to ephemeral shell",Is="Copy",Ms="Paste",Os="Paste text here",As="Logs",Fs="Clear",Us="Loading PDF support...",Bs="Loading PDF...",Hs="Prev",Vs="Next",Ws="No preview",qs="No file selected",Ks="Full path",Ys="MIME",Xs="Size",Zs="Mode",Gs="Last Modified",Js="Is Dir",Qs="Yes",eo="No",to="Loading metadata...",no="Open or create a file to edit",so="Close Others",oo="Close Left",io="Restore",ro="scroll left",ao="scroll right",co="Editor Settings",lo="Properties",uo="Max File Size (MB)",ho="Files larger than this will open in read-only mode.",mo="License Agreement",po="Please review and accept the license terms to continue.",fo="I accept the terms in the License Agreement",go="Back",_o="Not Authenticated",yo="You need to sign in or provide an access key to continue.",xo="I have an access key",vo="Please enter the server password to obtain an access token.",wo="Enter Access Token",bo="The server requires an access token. Paste it here to continue.",jo="Sign in",$o="Password",ko="Token",So="Login failed",Co="Failed to store token",Eo="Use token",Lo="Connected since",To="Host",zo="PID",No="App Memory",Ro="Permission denied",Do="Read only file",Po="System Memory",Io="CPU",Mo="Timezone",Oo="Last refresh",Ao="unknown",Fo="alloc",Uo="sys",Bo="used",Ho="Unsaved changes",Vo="You have unsaved changes. Reloading will discard them. Continue?",Wo="You have unsaved changes. Close anyway?",qo="Close & Discard",Ko="Error",Yo="Read Only",Xo="Restricted",Zo="Empty file",Go="Empty file (Read Only)",Jo="Path",Qo="Type",ei="Directory",ti={app_title:Bn,files:Hn,terminal:Vn,settings:Wn,search:qn,new_file:Kn,new_folder:Yn,rename:Xn,delete:"Delete",save:Zn,cancel:Gn,theme:Jn,screenshot:Qn,language:es,editor:ts,run:ns,debug:ss,close:os,edit:is,preview:rs,open:as,loading:cs,no_files:ls,switch_to_remote:ds,disconnected:us,refresh:hs,change_root:ms,upload:ps,download:fs,copy_full_path:gs,copy_relative_path:_s,copy_name:ys,delete_confirm:xs,auto_open_files:vs,show_hidden_files:ws,show_server_logs:bs,hide_memory_usage:js,about:$s,version:ks,copyright:Ss,drop_to_upload:Cs,view_file:Es,loading_trash:Ls,trash_empty:Ts,original_path:zs,trash_path:Ns,undo_coming:Rs,terminal_connected_session:Ds,terminal_connected_ephemeral:Ps,copy:Is,paste:Ms,paste_text_here:Os,logs:As,clear:Fs,loading_pdf_support:Us,loading_pdf:Bs,previous:Hs,next:Vs,no_preview:Ws,no_file_selected:qs,full_path:Ks,mime:Ys,size:Xs,mode:Zs,last_modified:Gs,is_dir:Js,yes:Qs,no:eo,loading_metadata:to,open_or_create_file:no,close_others:so,close_left:oo,restore:io,scroll_left:ro,scroll_right:ao,editor_settings:co,properties:lo,max_file_size:uo,max_file_size_tooltip:ho,license_agreement:mo,please_accept_license:po,i_accept_terms:fo,back:go,continue:"Continue",auth_not_authenticated:_o,auth_required_msg:yo,auth_have_key:xo,auth_enter_password:vo,auth_enter_token:wo,auth_token_msg:bo,sign_in:jo,password:$o,token:ko,login_failed:So,token_failed:Co,use_token:Eo,connected_since:Lo,host:To,pid:zo,app_memory:No,permission_denied:Ro,read_only_file:Do,system_memory:Po,cpu:Io,timezone:Mo,last_refresh:Oo,unknown:Ao,alloc:Fo,sys:Uo,used:Bo,unsaved_changes_title:Ho,confirm_reload_unsaved:Vo,confirm_close_unsaved:Wo,close_discard:qo,error:Ko,read_only:Yo,restricted:Xo,empty_file:Zo,empty_file_readonly:Go,path:Jo,type:Qo,directory:ei},ni="MLCRemote IDE",si="Dateien",oi="Terminal",ii="Einstellungen",ri="Suchen",ai="Neue Datei",ci="Neuer Ordner",li="Umbenennen",di="Speichern",ui="Abbrechen",hi="Design",mi="Sprache",pi="Editor",fi="AusfÃ¼hren",gi="Debuggen",_i="SchlieÃŸen",yi="Bearbeiten",xi="Vorschau",vi="Ã–ffnen",wi="Laden...",bi="Keine Dateien geÃ¶ffnet",ji="Zur Remote-Ansicht wechseln",$i="Vom Server getrennt",ki="Aktualisieren",Si="Wurzelverzeichnis Ã¤ndern",Ci="Hochladen",Ei="Herunterladen",Li="VollstÃ¤ndigen Pfad kopieren",Ti="Relativen Pfad kopieren",zi="Namen kopieren",Ni="Sind Sie sicher, dass Sie {{path}} lÃ¶schen mÃ¶chten?",Ri="Dateien automatisch Ã¶ffnen",Di="Versteckte Dateien anzeigen",Pi="Server-Logs anzeigen",Ii="Speicherauslastung ausblenden",Mi="Ãœber MLCRemote",Oi="Version",Ai="Copyright",Fi="Zum Hochladen hier ablegen",Ui="Datei anzeigen",Bi="Papierkorb wird geladen...",Hi="Papierkorb ist leer",Vi="UrsprÃ¼nglicher Pfad",Wi="Papierkorb-Pfad",qi="RÃ¼ckgÃ¤ngig (demnÃ¤chst)",Ki="Verbunden mit Shell-Sitzung: {{id}}",Yi="Verbunden mit temporÃ¤rer Shell",Xi="Kopieren",Zi="EinfÃ¼gen",Gi="Text hier einfÃ¼gen",Ji="Protokolle",Qi="LÃ¶schen",er="PDF-UnterstÃ¼tzung wird geladen...",tr="PDF wird geladen...",nr="ZurÃ¼ck",sr="Weiter",or="Keine Vorschau",ir="Keine Datei ausgewÃ¤hlt",rr="VollstÃ¤ndiger Pfad",ar="MIME-Typ",cr="GrÃ¶ÃŸe",lr="Modus",dr="Zuletzt geÃ¤ndert",ur="Ist Verzeichnis",hr="Ja",mr="Nein",pr="Metadaten werden geladen...",fr="Ã–ffnen oder erstellen Sie eine Datei zum Bearbeiten",gr="Andere schlieÃŸen",_r="Links schlieÃŸen",yr="Wiederherstellen",xr="nach links scrollen",vr="nach rechts scrollen",wr="Editor-Einstellungen",br="Eigenschaften",jr="Max. DateigrÃ¶ÃŸe (MB)",$r="Dateien, die grÃ¶ÃŸer sind, werden schreibgeschÃ¼tzt geÃ¶ffnet.",kr="Lizenzvereinbarung",Sr="Bitte Ã¼berprÃ¼fen und akzeptieren Sie die Lizenzbedingungen, um fortzufahren.",Cr="Ich akzeptiere die Bedingungen der Lizenzvereinbarung",Er="ZurÃ¼ck",Lr="Nicht authentifiziert",Tr="Sie mÃ¼ssen sich anmelden oder einen ZugriffsschlÃ¼ssel eingeben, um fortzufahren.",zr="Ich habe einen ZugriffsschlÃ¼ssel",Nr="Bitte geben Sie das Serverpasswort ein, um ein Zugriffstoken zu erhalten.",Rr="Zugriffstoken eingeben",Dr="Der Server benÃ¶tigt ein Zugriffstoken. FÃ¼gen Sie es hier ein, um fortzufahren.",Pr="Anmelden",Ir="Passwort",Mr="Token",Or="Anmeldung fehlgeschlagen",Ar="Token konnte nicht gespeichert werden",Fr="Token verwenden",Ur="Verbunden seit",Br="Host",Hr="PID",Vr="App Speicher",Wr="Zugriff verweigert",qr="SchreibgeschÃ¼tzt",Kr="System Speicher",Yr="CPU",Xr="Zeitzone",Zr="Letzte Aktualisierung",Gr="unbekannt",Jr="alloc",Qr="sys",ea="benutzt",ta="Ungespeicherte Ã„nderungen",na="Sie haben ungespeicherte Ã„nderungen. Beim Neuladen gehen diese verloren. Fortfahren?",sa="Sie haben ungespeicherte Ã„nderungen. Trotzdem schlieÃŸen?",oa="SchlieÃŸen & Verwerfen",ia="Fehler",ra="SchreibgeschÃ¼tzt",aa="EingeschrÃ¤nkt",ca="Leere Datei",la="Leere Datei (SchreibgeschÃ¼tzt)",da="Pfad",ua="Typ",ha="Verzeichnis",ma={app_title:ni,files:si,terminal:oi,settings:ii,search:ri,new_file:ai,new_folder:ci,rename:li,delete:"LÃ¶schen",save:di,cancel:ui,theme:hi,language:mi,editor:pi,run:fi,debug:gi,close:_i,edit:yi,preview:xi,open:vi,loading:wi,no_files:bi,switch_to_remote:ji,disconnected:$i,refresh:ki,change_root:Si,upload:Ci,download:Ei,copy_full_path:Li,copy_relative_path:Ti,copy_name:zi,delete_confirm:Ni,auto_open_files:Ri,show_hidden_files:Di,show_server_logs:Pi,hide_memory_usage:Ii,about:Mi,version:Oi,copyright:Ai,drop_to_upload:Fi,view_file:Ui,loading_trash:Bi,trash_empty:Hi,original_path:Vi,trash_path:Wi,undo_coming:qi,terminal_connected_session:Ki,terminal_connected_ephemeral:Yi,copy:Xi,paste:Zi,paste_text_here:Gi,logs:Ji,clear:Qi,loading_pdf_support:er,loading_pdf:tr,previous:nr,next:sr,no_preview:or,no_file_selected:ir,full_path:rr,mime:ar,size:cr,mode:lr,last_modified:dr,is_dir:ur,yes:hr,no:mr,loading_metadata:pr,open_or_create_file:fr,close_others:gr,close_left:_r,restore:yr,scroll_left:xr,scroll_right:vr,editor_settings:wr,properties:br,max_file_size:jr,max_file_size_tooltip:$r,license_agreement:kr,please_accept_license:Sr,i_accept_terms:Cr,back:Er,continue:"Weiter",auth_not_authenticated:Lr,auth_required_msg:Tr,auth_have_key:zr,auth_enter_password:Nr,auth_enter_token:Rr,auth_token_msg:Dr,sign_in:Pr,password:Ir,token:Mr,login_failed:Or,token_failed:Ar,use_token:Fr,connected_since:Ur,host:Br,pid:Hr,app_memory:Vr,permission_denied:Wr,read_only_file:qr,system_memory:Kr,cpu:Yr,timezone:Xr,last_refresh:Zr,unknown:Gr,alloc:Jr,sys:Qr,used:ea,unsaved_changes_title:ta,confirm_reload_unsaved:na,confirm_close_unsaved:sa,close_discard:oa,error:ia,read_only:ra,restricted:aa,empty_file:ca,empty_file_readonly:la,path:da,type:ua,directory:ha},pa="MLCRemote IDE",fa="Archivos",ga="Terminal",_a="ConfiguraciÃ³n",ya="Buscar",xa="Nuevo Archivo",va="Nueva Carpeta",wa="Renombrar",ba="Guardar",ja="Cancelar",$a="Tema",ka="Idioma",Sa="Editor",Ca="Ejecutar",Ea="Depurar",La="Cerrar",Ta="Editar",za="Vista previa",Na="Abrir",Ra="Cargando...",Da="No hay archivos abiertos",Pa="Cambiar a vista remota",Ia="Desconectado del servidor",Ma="Actualizar",Oa="Cambiar raÃ­z",Aa="Subir",Fa="Descargar",Ua="Copiar ruta completa",Ba="Copiar ruta relativa",Ha="Copiar nombre",Va="Â¿EstÃ¡s seguro de que deseas eliminar {{path}}?",Wa="Abrir archivos automÃ¡ticamente",qa="Mostrar archivos ocultos",Ka="Mostrar logs del servidor",Ya="Ocultar uso de memoria",Xa="Acerca de MLCRemote",Za="VersiÃ³n",Ga="Derechos de autor",Ja="Soltar para subir",Qa="Ver archivo",ec="Cargando papelera...",tc="La papelera estÃ¡ vacÃ­a",nc="Ruta original",sc="Ruta de la papelera",oc="Deshacer (prÃ³ximamente)",ic="Conectado a la sesiÃ³n de shell: {{id}}",rc="Conectado a la shell efÃ­mera",ac="Copiar",cc="Pegar",lc="Pegar texto aquÃ­",dc="Registros",uc="Limpiar",hc="Cargando soporte PDF...",mc="Cargando PDF...",pc="Ant",fc="Sig",gc="Sin vista previa",_c="NingÃºn archivo seleccionado",yc="Ruta completa",xc="MIME",vc="TamaÃ±o",wc="Modo",bc="Ãšltima modificaciÃ³n",jc="Es directorio",$c="SÃ­",kc="No",Sc="Cargando metadatos...",Cc="Abrir o crear un archivo para editar",Ec="Cerrar otros",Lc="Cerrar izquierda",Tc="Restaurar",zc="desplazarse a la izquierda",Nc="desplazarse a la derecha",Rc="Propiedades",Dc="Acuerdo de Licencia",Pc="Por favor, revise y acepte los tÃ©rminos de la licencia para continuar.",Ic="Acepto los tÃ©rminos del Acuerdo de Licencia",Mc="AtrÃ¡s",Oc="No autenticado",Ac="Debe iniciar sesiÃ³n o proporcionar una clave de acceso para continuar.",Fc="Tengo una clave de acceso",Uc="Por favor, introduzca la contraseÃ±a del servidor para obtener un token de acceso.",Bc="Introducir token de acceso",Hc="El servidor requiere un token de acceso. PÃ©guelo aquÃ­ para continuar.",Vc="Iniciar sesiÃ³n",Wc="ContraseÃ±a",qc="Token",Kc="Error de inicio de sesiÃ³n",Yc="Error al guardar el token",Xc="Usar token",Zc="Conectado desde",Gc="Host",Jc="PID",Qc="Memoria App",el="Permiso denegado",tl="Archivo de solo lectura",nl="Memoria Sistema",sl="CPU",ol="Zona horaria",il="Ãšltima actualizaciÃ³n",rl="desconocido",al="alloc",cl="sys",ll="usado",dl="Cambios no guardados",ul="Tiene cambios no guardados. Recargar los descartarÃ¡. Â¿Continuar?",hl="Â¿Tiene cambios no guardados. Cerrar de todos modos?",ml="Cerrar y descartar",pl="Error",fl="Solo lectura",gl="Restringido",_l="Archivo vacÃ­o",yl="Archivo vacÃ­o (Solo lectura)",xl="Ruta",vl="Tipo",wl="Directorio",bl={app_title:pa,files:fa,terminal:ga,settings:_a,search:ya,new_file:xa,new_folder:va,rename:wa,delete:"Eliminar",save:ba,cancel:ja,theme:$a,language:ka,editor:Sa,run:Ca,debug:Ea,close:La,edit:Ta,preview:za,open:Na,loading:Ra,no_files:Da,switch_to_remote:Pa,disconnected:Ia,refresh:Ma,change_root:Oa,upload:Aa,download:Fa,copy_full_path:Ua,copy_relative_path:Ba,copy_name:Ha,delete_confirm:Va,auto_open_files:Wa,show_hidden_files:qa,show_server_logs:Ka,hide_memory_usage:Ya,about:Xa,version:Za,copyright:Ga,drop_to_upload:Ja,view_file:Qa,loading_trash:ec,trash_empty:tc,original_path:nc,trash_path:sc,undo_coming:oc,terminal_connected_session:ic,terminal_connected_ephemeral:rc,copy:ac,paste:cc,paste_text_here:lc,logs:dc,clear:uc,loading_pdf_support:hc,loading_pdf:mc,previous:pc,next:fc,no_preview:gc,no_file_selected:_c,full_path:yc,mime:xc,size:vc,mode:wc,last_modified:bc,is_dir:jc,yes:$c,no:kc,loading_metadata:Sc,open_or_create_file:Cc,close_others:Ec,close_left:Lc,restore:Tc,scroll_left:zc,scroll_right:Nc,properties:Rc,license_agreement:Dc,please_accept_license:Pc,i_accept_terms:Ic,back:Mc,continue:"Continuar",auth_not_authenticated:Oc,auth_required_msg:Ac,auth_have_key:Fc,auth_enter_password:Uc,auth_enter_token:Bc,auth_token_msg:Hc,sign_in:Vc,password:Wc,token:qc,login_failed:Kc,token_failed:Yc,use_token:Xc,connected_since:Zc,host:Gc,pid:Jc,app_memory:Qc,permission_denied:el,read_only_file:tl,system_memory:nl,cpu:sl,timezone:ol,last_refresh:il,unknown:rl,alloc:al,sys:cl,used:ll,unsaved_changes_title:dl,confirm_reload_unsaved:ul,confirm_close_unsaved:hl,close_discard:ml,error:pl,read_only:fl,restricted:gl,empty_file:_l,empty_file_readonly:yl,path:xl,type:vl,directory:wl},jl="MLCRemote IDE",$l="Fichiers",kl="Terminal",Sl="ParamÃ¨tres",Cl="Rechercher",El="Nouveau Fichier",Ll="Nouveau Dossier",Tl="Renommer",zl="Enregistrer",Nl="Annuler",Rl="ThÃ¨me",Dl="Langue",Pl="Ã‰diteur",Il="ExÃ©cuter",Ml="DÃ©boguer",Ol="Fermer",Al="Ã‰diter",Fl="AperÃ§u",Ul="Ouvrir",Bl="Chargement...",Hl="Aucun fichier ouvert",Vl="Passer Ã  la vue distante",Wl="DÃ©connectÃ© du serveur",ql="Actualiser",Kl="Changer la racine",Yl="TÃ©lÃ©verser",Xl="TÃ©lÃ©charger",Zl="Copier le chemin complet",Gl="Copiar le chemin relatif",Jl="Copier le nom",Ql="ÃŠtes-vous sÃ»r de vouloir supprimer {{path}} ?",ed="Ouvrir les fichiers automatiquement",td="Afficher les fichiers cachÃ©s",nd="Afficher les logs du serveur",sd="Masquer l'utilisation de la mÃ©moire",od="Ã€ propos de MLCRemote",id="Version",rd="Copyright",ad="DÃ©poser pour tÃ©lÃ©verser",cd="Voir le fichier",ld="Chargement de la corbeille...",dd="La corbeille est vide",ud="Chemin d'origine",hd="Chemin de la corbeille",md="Annuler (prochainement)",pd="ConnectÃ© Ã  la session shell : {{id}}",fd="ConnectÃ© au shell Ã©phÃ©mÃ¨re",gd="Copier",_d="Coller",yd="Coller le texte ici",xd="Journaux",vd="Effacer",wd="Chargement du support PDF...",bd="Chargement du PDF...",jd="PrÃ©c",$d="Suiv",kd="Pas d'aperÃ§u",Sd="Aucun fichier sÃ©lectionnÃ©",Cd="Chemin complet",Ed="MIME",Ld="Taille",Td="Mode",zd="DerniÃ¨re modification",Nd="Est un rÃ©pertoire",Rd="Oui",Dd="Non",Pd="Chargement des mÃ©tadatos...",Id="Ouvrir ou crÃ©er un fichier Ã  Ã©diter",Md="Fermer les autres",Od="Fermer Ã  gauche",Ad="Restaurer",Fd="faire dÃ©filer vers la gauche",Ud="faire dÃ©filer vers la droite",Bd="PropriÃ©tÃ©s",Hd="Contrat de Licence",Vd="Veuillez consulter et accepter les conditions de licence pour continuer.",Wd="J'accepte les termes du Contrat de Licence",qd="Retour",Kd="Non authentifiÃ©",Yd="Vous devez vous connecter ou fournir une clÃ© d'accÃ¨s pour continuer.",Xd="J'ai une clÃ© d'accÃ¨s",Zd="Veuillez entrer le mot de passe du serveur pour obtenir un jeton d'accÃ¨s.",Gd="Entrer le jeton d'accÃ¨s",Jd="Le serveur nÃ©cessite un jeton d'accÃ¨s. Collez-le ici pour continuer.",Qd="Se connecter",eu="Mot de passe",tu="Jeton",nu="Ã‰chec de la connexion",su="Ã‰chec de l'enregistrement du jeton",ou="Utiliser le jeton",iu="ConnectÃ© depuis",ru="HÃ´te",au="PID",cu="MÃ©moire App",lu="Permission refusÃ©e",du="Fichier en lecture seule",uu="MÃ©moire SystÃ¨me",hu="CPU",mu="Fuseau horaire",pu="DerniÃ¨re actualisation",fu="inconnu",gu="alloc",_u="sys",yu="utilisÃ©",xu="Modifications non enregistrÃ©es",vu="Vous avez des modifications non enregistrÃ©es. Le rechargement les annulera. Continuer ?",wu="Vous avez des modifications non enregistrÃ©es. Fermer quand mÃªme ?",bu="Fermer et abandonner",ju="Erreur",$u="Lecture seule",ku="Restreint",Su="Fichier vide",Cu="Fichier vide (Lecture seule)",Eu="Chemin",Lu="Type",Tu="RÃ©pertoire",zu={app_title:jl,files:$l,terminal:kl,settings:Sl,search:Cl,new_file:El,new_folder:Ll,rename:Tl,delete:"Supprimer",save:zl,cancel:Nl,theme:Rl,language:Dl,editor:Pl,run:Il,debug:Ml,close:Ol,edit:Al,preview:Fl,open:Ul,loading:Bl,no_files:Hl,switch_to_remote:Vl,disconnected:Wl,refresh:ql,change_root:Kl,upload:Yl,download:Xl,copy_full_path:Zl,copy_relative_path:Gl,copy_name:Jl,delete_confirm:Ql,auto_open_files:ed,show_hidden_files:td,show_server_logs:nd,hide_memory_usage:sd,about:od,version:id,copyright:rd,drop_to_upload:ad,view_file:cd,loading_trash:ld,trash_empty:dd,original_path:ud,trash_path:hd,undo_coming:md,terminal_connected_session:pd,terminal_connected_ephemeral:fd,copy:gd,paste:_d,paste_text_here:yd,logs:xd,clear:vd,loading_pdf_support:wd,loading_pdf:bd,previous:jd,next:$d,no_preview:kd,no_file_selected:Sd,full_path:Cd,mime:Ed,size:Ld,mode:Td,last_modified:zd,is_dir:Nd,yes:Rd,no:Dd,loading_metadata:Pd,open_or_create_file:Id,close_others:Md,close_left:Od,restore:Ad,scroll_left:Fd,scroll_right:Ud,properties:Bd,license_agreement:Hd,please_accept_license:Vd,i_accept_terms:Wd,back:qd,continue:"Continuer",auth_not_authenticated:Kd,auth_required_msg:Yd,auth_have_key:Xd,auth_enter_password:Zd,auth_enter_token:Gd,auth_token_msg:Jd,sign_in:Qd,password:eu,token:tu,login_failed:nu,token_failed:su,use_token:ou,connected_since:iu,host:ru,pid:au,app_memory:cu,permission_denied:lu,read_only_file:du,system_memory:uu,cpu:hu,timezone:mu,last_refresh:pu,unknown:fu,alloc:gu,sys:_u,used:yu,unsaved_changes_title:xu,confirm_reload_unsaved:vu,confirm_close_unsaved:wu,close_discard:bu,error:ju,read_only:$u,restricted:ku,empty_file:Su,empty_file_readonly:Cu,path:Eu,type:Lu,directory:Tu};mt.use(Dt).use(zt).init({resources:{en:{translation:ti},de:{translation:ma},es:{translation:bl},fr:{translation:zu}},fallbackLng:"en",interpolation:{escapeValue:!1}});try{const n=new URLSearchParams(window.location.search).get("api");if(n)try{const o=new URL(n).searchParams.get("lang");o&&mt.changeLanguage(o)}catch{}typeof lt=="function"&&lt()}catch{}window.addEventListener("dragover",t=>t.preventDefault());window.addEventListener("drop",t=>t.preventDefault());(async()=>{try{const t=await Le(()=>import("./icons-sprite-DYpnKGhK.js"),[],import.meta.url),n=t&&(t.default||t);if(n&&typeof document<"u"){const s=document.createElement("div");s.style.width="0",s.style.height="0",s.style.position="absolute",s.style.visibility="hidden",s.innerHTML=n,document.body.insertBefore(s,document.body.firstChild)}}catch(t){alert("Failed to load icon sprite: "+((t==null?void 0:t.message)||t))}})();Nt(document.getElementById("root")).render(e.jsx(Xt,{children:e.jsx(Un,{})}));export{T as I,Le as _,ee as a,Mh as b,Ah as c,Je as e,ue as f,D as g,he as i,Oh as l,we as m,ge as s};
