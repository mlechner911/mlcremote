const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./PdfPreview-2l9YD0ie.js","./vendor-react-DgaSUS5F.js","./vendor-scheduler-DYLXRpC5.js","./vendor-prism-D73ALYcd.js","./vendor-prism-Cg1sXqY3.css","./vendor-html2canvas-BfYXEYrK.js","./vendor-xterm-DOcMqDAd.js","./vendor-xterm-DYP7pi_n.css","./vendor-i18next-BnqEsHlA.js","./vendor-i18next-browser-languagedetector-ClvlpAgo.js","./ShellView-CIPum43X.js","./TerminalTab-CP9TvBJL.js"])))=>i.map(i=>d[i]);
var Tt=Object.defineProperty;var zt=(t,n,s)=>n in t?Tt(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s;var lt=(t,n,s)=>zt(t,typeof n!="symbol"?n+"":n,s);import{r as X,R as r,j as e,u as ne,i as Rt,c as It}from"./vendor-react-DgaSUS5F.js";import{P as Ve}from"./vendor-prism-D73ALYcd.js";import{h as Dt}from"./vendor-html2canvas-BfYXEYrK.js";import"./vendor-xterm-DOcMqDAd.js";import{i as mt}from"./vendor-i18next-BnqEsHlA.js";import{B as Mt}from"./vendor-i18next-browser-languagedetector-ClvlpAgo.js";import"./vendor-scheduler-DYLXRpC5.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const f of a)if(f.type==="childList")for(const l of f.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function s(a){const f={};return a.integrity&&(f.integrity=a.integrity),a.referrerPolicy&&(f.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?f.credentials="include":a.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function o(a){if(a.ep)return;a.ep=!0;const f=s(a);fetch(a.href,f)}})();const Pt="modulepreload",Ft=function(t,n){return new URL(t,n).href},ct={},ze=function(n,s,o){let a=Promise.resolve();if(s&&s.length>0){const l=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),u=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));a=Promise.allSettled(s.map(m=>{if(m=Ft(m,o),m in ct)return;ct[m]=!0;const b=m.endsWith(".css"),S=b?'[rel="stylesheet"]':"";if(!!o)for(let v=l.length-1;v>=0;v--){const R=l[v];if(R.href===m&&(!b||R.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${m}"]${S}`))return;const x=document.createElement("link");if(x.rel=b?"stylesheet":Pt,b||(x.as="script"),x.crossOrigin="",x.href=m,u&&x.setAttribute("nonce",u),document.head.appendChild(x),b)return new Promise((v,R)=>{x.addEventListener("load",v),x.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${m}`)))})}))}function f(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return a.then(l=>{for(const c of l||[])c.status==="rejected"&&f(c.reason);return n().catch(f)})},Ot=200,ke=[],Ce=[];function pt(t,n){const s={ts:new Date().toISOString(),level:t,msg:n};for(ke.push(s);ke.length>Ot;)ke.shift();Ce.forEach(o=>o())}function Y(t){pt("info",t)}function Ee(t){pt("warn",t)}function At(){return ke.slice().reverse()}function Bt(t){return Ce.push(t),()=>{const n=Ce.indexOf(t);n>=0&&Ce.splice(n,1)}}function Wt(){ke.length=0,Ce.forEach(t=>t())}function qe(){try{return localStorage.getItem("mlcremote_token")}catch{return null}}function We(t){try{localStorage.setItem("mlcremote_token",t)}catch{}}let ve="";function dt(t){ve=t.replace(/\/$/,"")}function vl(){return ve}function Le(t){if(!ve||typeof t!="string"||t.startsWith("http"))return t;if(ve.includes("?")){const[n,s]=ve.split("?"),o=`${n.replace(/\/$/,"")}${t}`;return o.includes("?")?`${o}&${s}`:`${o}?${s}`}return`${ve}${t}`}async function se(t,n){const s=qe(),o=new Headers(n==null?void 0:n.headers);s&&o.set("X-Auth-Token",s);const a={...n||{},headers:o};let f=t;typeof t=="string"&&t.startsWith("/")&&(f=Le(t));const l=await fetch(f,a);if(l.status===401){try{localStorage.removeItem("mlcremote_token")}catch{}try{window.dispatchEvent(new CustomEvent("mlcremote:auth-failed",{detail:{url:typeof t=="string"?t:t.url}}))}catch{}}return l}async function Ut(t){Y("POST /api/login");const n=await fetch(Le("/api/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:t})});if(Y(`/api/login => ${n.status}`),!n.ok)throw new Error("login failed");const s=await n.json();if(s&&s.token)return We(s.token),s.token;throw new Error("no token in response")}async function Ht(){Y("GET /health");const t=await se("/health");if(Y(`/health => ${t.status}`),!t.ok)throw Ee("/health not ok"),new Error("health failed");return t.json()}function Ue(){try{const t=new URLSearchParams(window.location.search),n=t.get("token");n&&We(n);const s=t.get("api");if(s){Y(`[Debug] Found API param: ${s}`);try{const o=new URL(s);let a=o.origin+o.pathname;a.endsWith("/")&&(a=a.slice(0,-1)),Y(`[Debug] Setting Base URL: ${a}`),dt(a);const f=o.searchParams.get("token");f&&We(f)}catch(o){console.error("Failed to parse API URL",o),dt(s)}}else Y("[Debug] No API param found");return!!n}catch{}return!1}async function Vt(){try{return(await se("/api/auth/check")).status===200}catch{return!1}}async function gt(t="",n){const s=new URLSearchParams;t&&s.set("path",t),n!=null&&n.showHidden&&s.set("showHidden","1");const o=s.toString()?`?${s.toString()}`:"";Y(`GET /api/tree${o}`);const a=await se(`/api/tree${o}`);if(Y(`/api/tree${o} => ${a.status}`),!a.ok)throw Ee("/api/tree not ok"),new Error("tree failed");return a.json()}async function qt(t){Y(`GET /api/file?path=${t}`);const n=await se(`/api/file?path=${encodeURIComponent(t)}`);if(Y(`/api/file?path=${t} => ${n.status}`),!n.ok)throw Ee("/api/file read failed"),new Error("read failed");return n.text()}async function xe(t){Y(`GET /api/stat?path=${t}`);const n=await se(`/api/stat?path=${encodeURIComponent(t)}`);if(Y(`/api/stat?path=${t} => ${n.status}`),!n.ok)throw new Error("stat failed");return n.json()}async function Kt(t,n){Y(`POST /api/file path=${t} size=${n.length}`);const s=await se("/api/file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:t,content:n})});if(Y(`/api/file POST => ${s.status}`),!s.ok)throw Ee("/api/file save failed"),new Error("save failed")}async function Gt(t){Y(`DELETE /api/file?path=${t}`);const n=await se(`/api/file?path=${encodeURIComponent(t)}`,{method:"DELETE"});if(Y(`/api/file delete => ${n.status}`),!n.ok)throw Ee("/api/file delete failed"),new Error("delete failed")}async function Xt(){const t=await se("/api/settings");if(!t.ok)throw new Error("Failed to load settings");return t.json()}async function ge(t){const n=await se("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error("Failed to save settings");return n.json()}const xt=X.createContext(null);function Yt({children:t}){const[n,s]=X.useState(null),[o,a]=X.useState(null),[f,l]=X.useState(navigator.onLine),[c,u]=X.useState(!1),[m,b]=X.useState(!1),[S,E]=X.useState(!1);r.useState(()=>{if(typeof window>"u")return;const $=new URLSearchParams(window.location.search).get("token");if($){console.log("[Auth] Token found in URL (sync init):",$),localStorage.setItem("mlcremote_token",$);const P=window.location.protocol+"//"+window.location.host+window.location.pathname;window.history.replaceState({path:P},"",P)}});const x=X.useCallback(async()=>{if(navigator.onLine)try{const w=await Ht();s(w),a(Date.now()),await Vt()||(localStorage.removeItem("mlcremote_token"),w.password_auth?u(!0):w.auth_required&&b(!0))}catch{s(null)}},[]);X.useEffect(()=>{const w=()=>{l(!0),x()},$=()=>{l(!1),s(null)};window.addEventListener("online",w),window.addEventListener("offline",$);const P=setInterval(x,60*1e3);x();const K=()=>E(!0);return window.addEventListener("mlcremote:auth-failed",K),()=>{window.removeEventListener("online",w),window.removeEventListener("offline",$),window.removeEventListener("mlcremote:auth-failed",K),clearInterval(P)}},[x]),X.useEffect(()=>{if(!n){E(!1);return}const w=!!n.password_auth,$=!!n.auth_required&&!n.password_auth,P=localStorage.getItem("mlcremote_token");E(!!((w||$)&&!P))},[n]);const v=async w=>{await Ut(w),await x(),u(!1),E(!1)},R=w=>{localStorage.setItem("mlcremote_token",w),x(),b(!1),E(!1)},I=()=>{localStorage.removeItem("mlcremote_token"),x()};return e.jsx(xt.Provider,{value:{health:n,isOnline:f,lastHealthAt:o,refreshHealth:x,login:v,setToken:R,logout:I,showLogin:c,setShowLogin:u,showTokenInput:m,setShowTokenInput:b,showAuthChooser:S,setShowAuthChooser:E},children:t})}function Jt(){const t=X.useContext(xt);if(!t)throw new Error("useAuth must be used within AuthProvider");return t}const z=({name:t,className:n,title:s,size:o=16})=>{if(!t)return null;const a=`#${t}`;return e.jsxs("svg",{className:n,width:o,height:o,"aria-hidden":s?void 0:"true",role:s?"img":void 0,children:[s?e.jsx("title",{children:s}):null,e.jsx("use",{href:a})]})},Zt={"flag-gb":"icon-flag-gb",jpg:"icon-image",svg:"icon-image",x:"icon-close",info:"icon-info",search:"icon-search",user:"icon-user",link:"icon-link",stop:"icon-stop",view:"icon-view",trash:"icon-trash",copy:"icon-copy",dir:"icon-folder",pdf:"icon-pdf",gif:"icon-image",warn:"icon-warning",cr:"icon-chevron-right",moon:"icon-moon","flag-es":"icon-flag-es",jpeg:"icon-image",txt:"icon-text",zip:"icon-archive",gz:"icon-archive",bz2:"icon-archive",js:"icon-js",download:"icon-download",tar:"icon-archive",upload:"icon-upload",cfg:"icon-settings",settings:"icon-settings",close:"icon-close",shell:"icon-terminal",minus:"icon-minus",screenshot:"icon-screenshot","flag-de":"icon-flag-de","flag-fr":"icon-flag-fr",md:"icon-markdown",png:"icon-image",refresh:"icon-refresh",server:"icon-server",markdown:"icon-markdown",json:"icon-json",run:"icon-play",cl:"icon-chevron-left",home:"icon-home",log:"icon-log",sun:"icon-sun",mjs:"icon-js",sh:"icon-terminal",plus:"icon-plus",up:"icon-up"};function ye(t){if(t)return Zt[t.toLowerCase()]}function yt(t,n){if(n){const s=n.lastIndexOf(".");if(s>=0&&s<n.length-1){const o=n.slice(s+1).toLowerCase();return ye(o)}}}const W=t=>"icon-"+t;function Qt({x:t,y:n,items:s,onClose:o}){const a=r.useRef(null);r.useEffect(()=>{function c(u){a.current&&!a.current.contains(u.target)&&o()}return window.addEventListener("mousedown",c),window.addEventListener("scroll",o,!0),window.addEventListener("resize",o),()=>{window.removeEventListener("mousedown",c),window.removeEventListener("scroll",o,!0),window.removeEventListener("resize",o)}},[o]);const[f,l]=r.useState({x:t,y:n});return r.useLayoutEffect(()=>{if(a.current){const c=a.current.getBoundingClientRect();let u=t,m=n;u+c.width>window.innerWidth&&(u=window.innerWidth-c.width-8),m+c.height>window.innerHeight&&(m=window.innerHeight-c.height-8),l({x:u,y:m})}},[t,n]),e.jsx("div",{ref:a,style:{position:"fixed",left:f.x,top:f.y,background:"var(--panel)",border:"1px solid var(--border)",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",borderRadius:6,padding:4,zIndex:99999,minWidth:160,display:"flex",flexDirection:"column"},onContextMenu:c=>{c.preventDefault(),o()},children:s.map((c,u)=>c.separator?e.jsx("div",{style:{height:1,background:"var(--border)",margin:"4px 0"}},u):e.jsxs("button",{className:"context-menu-item",onClick:()=>{o(),c.action()},style:{display:"flex",alignItems:"center",gap:8,padding:"6px 10px",border:"none",background:"transparent",color:c.danger?"var(--danger)":"var(--text)",cursor:"pointer",textAlign:"left",borderRadius:4,fontSize:13},onMouseEnter:m=>m.currentTarget.style.background=c.danger?"rgba(239,68,68,0.1)":"var(--bg)",onMouseLeave:m=>m.currentTarget.style.background="transparent",children:[c.icon&&e.jsx("span",{style:{width:16,display:"flex"},children:c.icon}),c.label]},u))})}function en({onSelect:t,showHidden:n,onToggleHidden:s,autoOpen:o=!0,onView:a,onBackendActive:f,onChangeRoot:l,canChangeRoot:c,selectedPath:u,activeDir:m,onDirChange:b,focusRequest:S,reloadSignal:E}){const{t:x}=ne(),[v,R]=r.useState(""),[I,w]=r.useState([]),[$,P]=r.useState(!1),[K,A]=r.useState(""),[fe,oe]=r.useState(null),[ie,ce]=r.useState(!1),[g,M]=r.useState(null),_=r.useCallback(async d=>{P(!0),A("");try{const N=await gt(d,{showHidden:n});w(N),R(d);try{U.current!==d&&(b==null||b(d),U.current=d)}catch{}f==null||f();try{const H=Z.current;H&&requestAnimationFrame(()=>{const q=he.current;if(q)try{const Q=q.querySelector(`[data-path="${CSS.escape(H)}"]`);Q&&(Q.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"}),Q.focus())}catch{}})}catch{}}catch(N){A(N.message||x("status_failed"))}finally{P(!1)}},[n,f,b,x]),U=r.useRef("");r.useEffect(()=>{typeof m>"u"||m!==v&&_(m)},[m,v,_]),r.useEffect(()=>{_("")},[_]),r.useEffect(()=>{_(v||"")},[v,_,E]);const D=()=>{if(!v||v==="/"){_("");return}const d=v.split("/").filter(Boolean);d.pop();const N=`/${d.join("/")}`;_(N||"")},L=async(d,N)=>{if(!(!N||N.length===0)){ce(!0),A("");try{const H=new FormData;for(let me=0;me<N.length;me++)H.append("file",N[me],N[me].name);const q=`?path=${encodeURIComponent(d)}`;if(!(await se(`/api/upload${q}`,{method:"POST",body:H})).ok)throw new Error(x("status_failed"));await _(d)}catch(H){A(H.message||x("status_failed"))}finally{ce(!1)}}},V=(d,N)=>{d.preventDefault(),oe(null),L(N,d.dataTransfer.files)},ee=(d,N)=>{d.preventDefault(),oe(N)},J=d=>{d.preventDefault(),oe(null)},he=r.useRef(null),Z=r.useRef("");r.useEffect(()=>{Z.current=u||""},[u]),r.useEffect(()=>{if(u)try{const d=he.current;if(!d)return;const N=d.querySelector(`li[key="${CSS.escape(u)}"]`),H=d.querySelector(`[data-path="${u}"]`),q=N||H;if(q){q.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"});const Q=q.querySelector("button.entry");Q&&Q.focus()}}catch{}},[u,v]),r.useEffect(()=>{if(S)try{const d=u||"";if(!d)return;const N=he.current;if(!N)return;const H=CSS.escape(d),q=N.querySelector(`[data-path="${H}"]`);q&&(q.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"}),q.focus())}catch{}},[S,u]);const Re=async d=>{if(confirm(x("delete_confirm",{path:d})))try{await Gt(d),_(v)}catch(N){alert(x("status_failed")+": "+N.message)}},we=(d,N)=>{d.preventDefault(),d.stopPropagation(),M({x:d.clientX,y:d.clientY,item:N})};return e.jsxs("div",{className:"explorer",children:[e.jsxs("div",{className:"explorer-header",children:[e.jsx("strong",{className:"hidden",children:e.jsx(z,{name:W("dir")})}),e.jsxs("div",{className:"explorer-controls",children:[e.jsx("button",{className:"link icon-btn",title:x("refresh"),onClick:()=>_(v||""),children:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M23 4v6h-6"}),e.jsx("path",{d:"M1 20v-6h6"}),e.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})}),c&&typeof l=="function"&&e.jsx("button",{className:"link icon-btn","aria-label":x("change_root"),title:x("change_root"),onClick:async()=>{try{await Promise.resolve(l(""))}catch{}},children:e.jsx(z,{name:W("dir")})})]}),e.jsxs("div",{className:"breadcrumbs",children:[e.jsx("button",{type:"button",className:"link",onClick:()=>_(""),children:"root"}),v&&v.split("/").filter(Boolean).map((d,N,H)=>{const q=`/${H.slice(0,N+1).join("/")}`;return e.jsxs("span",{children:[" / ",e.jsx("button",{className:"link",onClick:()=>_(q),children:d})]},q)})]})]}),e.jsxs("div",{className:"explorer-body",onDrop:d=>V(d,v||""),onDragOver:d=>ee(d,v||""),onDragLeave:J,children:[$&&e.jsx("div",{className:"muted",children:x("loading")}),K&&e.jsx("div",{className:"error",children:K}),ie&&e.jsxs("div",{className:"muted",children:[x("upload"),"..."]}),!$&&!K&&e.jsxs("ul",{className:"entry-list",ref:he,children:[v&&v!=="/"&&e.jsx("li",{children:e.jsx("button",{type:"button",className:"entry",onClick:D,children:".."})},"up"),I.map(d=>e.jsx("li",{onContextMenu:N=>we(N,d),children:d.isDir?e.jsxs("button",{"data-path":d.path,type:"button",className:"entry"+(u===d.path?" selected":""),onClick:()=>{_(d.path),t(d.path,!0)},onDrop:N=>V(N,d.path),onDragOver:N=>ee(N,d.path),onDragLeave:J,children:[e.jsx("span",{className:"icon",children:e.jsx(z,{name:ye("dir")||W("dir")})})," ",d.name,d.isSymlink&&e.jsx("span",{title:"Symbolic Link",style:{marginLeft:4,opacity:.5},children:"ðŸ”—"}),d.isBroken&&e.jsx("span",{title:"Broken Link",style:{marginLeft:4},children:"âŒ"}),d.isExternal&&e.jsx("span",{title:"External Link",style:{marginLeft:4},children:"â†—ï¸"}),fe===d.path?e.jsx("span",{style:{marginLeft:8,fontSize:12,color:"#888"},children:x("drop_to_upload")}):null]}):e.jsxs("div",{style:{display:"flex",gap:2,alignItems:"center"},children:[e.jsxs("button",{"data-path":d.path,type:"button",className:"entry",style:{flex:1,textAlign:"left"},onClick:()=>{if(o===!1){t(d.path,!1);return}t(d.path,!1)},children:[e.jsx("span",{className:"icon",children:e.jsx(z,{name:yt(void 0,d.name)||ye(d.name.split(".").pop()||"")||W("view")||"icon-text"})})," ",d.name,d.isSymlink&&e.jsx("span",{title:"Symbolic Link",style:{marginLeft:4,opacity:.5},children:"ðŸ”—"}),d.isBroken&&e.jsx("span",{title:"Broken Link",style:{marginLeft:4},children:"âŒ"}),d.isExternal&&e.jsx("span",{title:"External Link",style:{marginLeft:4},children:"â†—ï¸"})]}),o?null:e.jsx("button",{className:"btn",onClick:()=>a?a(d.path):t(d.path,!1),title:x("view_file"),children:e.jsx(z,{name:W("view")})})]})},d.path))]})]}),g&&e.jsx(Qt,{x:g.x,y:g.y,onClose:()=>M(null),items:[{label:x("open"),icon:e.jsx(z,{name:W("view")}),action:()=>{g.item.isDir?(_(g.item.path),t(g.item.path,!0)):o?t(g.item.path,!1):a?a(g.item.path):t(g.item.path,!1)}},{label:x("download"),icon:e.jsx(z,{name:W("download")}),action:()=>{const d=document.createElement("a");d.href=Le(`/api/file?path=${encodeURIComponent(g.item.path)}${localStorage.getItem("mlcremote_token")?`&token=${encodeURIComponent(localStorage.getItem("mlcremote_token")||"")}`:""}`),d.download=g.item.name,document.body.appendChild(d),d.click(),document.body.removeChild(d)},separator:!0},{label:x("copy_full_path"),icon:e.jsx(z,{name:W("copy")}),action:async()=>{try{await navigator.clipboard.writeText(g.item.path)}catch(d){console.error("Failed to copy",d)}}},{label:x("copy_relative_path"),icon:e.jsx(z,{name:W("link")}),action:async()=>{try{const d=g.item.path.startsWith("/")?g.item.path.slice(1):g.item.path;await navigator.clipboard.writeText(d)}catch(d){console.error("Failed to copy",d)}}},{label:x("copy_name"),icon:e.jsx(z,{name:W("text")}),action:async()=>{try{await navigator.clipboard.writeText(g.item.name)}catch(d){console.error(d)}},separator:!0},{label:x("delete"),icon:e.jsx(z,{name:W("trash")}),danger:!0,action:()=>Re(g.item.path)}].filter(d=>!(d.label===x("download")&&g.item.isDir))})]})}function tn({autoOpen:t,showHidden:n,onToggleAutoOpen:s,onToggleShowHidden:o,showLogs:a,onToggleLogs:f,hideMemoryUsage:l,onToggleHideMemoryUsage:c,onClose:u,onLanguageChange:m,maxEditorSize:b,onMaxFileSizeChange:S}){const{t:E,i18n:x}=ne(),[v,R]=X.useState(l),I=$=>{x.changeLanguage($),m==null||m($)},w=[{code:"en",name:"English"},{code:"de",name:"Deutsch"},{code:"es",name:"EspaÃ±ol"},{code:"fr",name:"FranÃ§ais"}];return e.jsx("div",{style:{position:"absolute",right:12,top:40,zIndex:60},children:e.jsxs("div",{style:{width:320,background:"var(--bg)",border:"1px solid var(--muted)",borderRadius:6,boxShadow:"0 6px 20px rgba(0,0,0,0.12)",padding:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("strong",{children:E("settings")}),e.jsx("button",{"aria-label":E("close"),title:E("close"),onClick:u,style:{background:"transparent",border:"none",cursor:"pointer"},children:e.jsx(z,{name:W("close"),size:16})})]}),e.jsxs("div",{style:{marginTop:12},children:[e.jsx("label",{style:{fontSize:11,fontWeight:600,textTransform:"uppercase",color:"var(--text-muted)",display:"block",marginBottom:8,letterSpacing:"0.05em"},children:E("language")}),e.jsx("div",{style:{display:"flex",gap:8,marginTop:4},children:w.map($=>{const P=x.language===$.code||$.code==="en"&&!x.language,K=$.code==="en"?"gb":$.code;return e.jsx("button",{onClick:()=>I($.code),title:$.name,style:{display:"flex",alignItems:"center",justifyContent:"center",padding:6,background:P?"var(--bg-select)":"var(--bg-panel)",border:P?"1px solid var(--accent)":"1px solid var(--border)",borderRadius:6,cursor:"pointer",transition:"all 0.2s",opacity:P?1:.7},onMouseOver:A=>{P||(A.currentTarget.style.opacity="1")},onMouseOut:A=>{P||(A.currentTarget.style.opacity="0.7")},children:e.jsx(z,{name:`icon-flag-${K}`,size:24})},$.code)})})]}),e.jsx("div",{style:{marginTop:12},children:e.jsxs("label",{style:{fontSize:13},children:[e.jsx("input",{type:"checkbox",checked:t,onChange:$=>s($.target.checked)})," ",E("auto_open_files","Auto open files")]})}),e.jsx("div",{style:{marginTop:8},children:e.jsxs("label",{style:{fontSize:13},children:[e.jsx("input",{type:"checkbox",checked:n,onChange:$=>o($.target.checked)})," ",E("show_hidden_files","Show hidden files")]})}),e.jsx("div",{style:{marginTop:8},children:e.jsxs("label",{style:{fontSize:13},children:[e.jsx("input",{type:"checkbox",checked:a,onChange:$=>f($.target.checked)})," ",E("show_server_logs","Show server logs")]})}),e.jsx("div",{style:{marginTop:8},children:e.jsxs("label",{style:{fontSize:13},children:[e.jsx("input",{type:"checkbox",checked:v,onChange:$=>{R($.target.checked),c($.target.checked)}})," ",E("hide_memory_usage","Hide memory usage gauge")]})}),e.jsxs("div",{style:{marginTop:12,borderTop:"1px solid var(--border)",paddingTop:8},children:[e.jsx("strong",{style:{fontSize:12,color:"var(--text-muted)"},children:E("editor_settings","Editor Settings")}),e.jsxs("div",{style:{marginTop:6,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("label",{style:{fontSize:13},title:E("max_file_size_tooltip","Files larger than this (MB) will open in read-only mode"),children:E("max_file_size","Max File Size (MB)")}),e.jsx("input",{type:"number",min:"0.1",step:"0.5",style:{width:60,background:"var(--bg-panel)",border:"1px solid var(--border)",color:"var(--text)",borderRadius:4,padding:"2px 4px"},value:((b||parseInt(localStorage.getItem("mlc_max_editor_size")||"1048576"))/1024/1024).toFixed(1),onChange:$=>{const P=parseFloat($.target.value);if(P>0){const K=Math.floor(P*1024*1024);localStorage.setItem("mlc_max_editor_size",K.toString()),S==null||S(K)}}})]})]})]})})}function nn(){const{t}=ne(),[n,s]=r.useState(null),[o,a]=r.useState(!1),f=r.useCallback(async()=>{a(!0);try{const u=await se("/api/trash/recent");if(!u.ok)throw new Error("fetch failed");const m=await u.json();Array.isArray(m)&&m.length>0?s(m[0]):s(null)}catch(u){console.warn("Failed to fetch trash",u)}finally{a(!1)}},[]);if(r.useEffect(()=>{f();const u=setInterval(f,1e4);return()=>clearInterval(u)},[f]),o&&!n)return e.jsx("div",{className:"muted",children:t("loading_trash")});if(!n)return e.jsx("div",{className:"muted",children:t("trash_empty")});const l=n.originalPath.split("/").pop()||n.originalPath,c=yt(void 0,l)||ye(l.split(".").pop()||"")||"icon-trash";return e.jsxs("div",{style:{padding:12},children:[e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx(z,{name:c,size:20}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{fontWeight:600},children:l}),e.jsx("div",{className:"muted",style:{fontSize:12},children:new Date(n.deletedAt).toLocaleString()})]})]}),e.jsxs("div",{style:{marginTop:12},children:[e.jsxs("div",{className:"muted",children:[t("original_path"),": ",n.originalPath]}),e.jsxs("div",{className:"muted",children:[t("trash_path"),": ",n.trashPath]})]}),e.jsxs("div",{style:{marginTop:12},children:[e.jsx("button",{className:"btn",disabled:!0,children:t("undo_coming")}),(()=>{const u=qe(),m=`/api/file?path=${encodeURIComponent(n.trashPath)}`+(u?`&token=${encodeURIComponent(u)}`:"");return e.jsx("a",{className:"btn",style:{marginLeft:8},href:m,download:l,children:t("download")})})()]})]})}function ue(t){if(!t||t<=0)return"0 B";const n=1024,s=n*1024,o=s*1024;return t>=o?`${(t/o).toFixed(2)} GB`:t>=s?`${(t/s).toFixed(2)} MB`:t>=n?`${(t/n).toFixed(2)} KB`:`${t} B`}const sn=new Set(["txt","md","markdown","yaml","yml","json","js","ts","jsx","tsx","html","css","env","ini","cfg","conf","csh","gitignore","dockerfile","sql"]),on=new Set(["zip","gz","tar","rar","exe","dll","so","bin","jpg","jpeg","png","gif","webp","pdf"]);function Ke(t){const n=t.split("/"),s=n[n.length-1]||"",o=s.lastIndexOf(".");return o===-1?"":s.slice(o+1).toLowerCase()}function rn(t){const n=Ke(t);return!n||sn.has(n)?!0:!on.has(n)}async function an(t){if(!t)return{mime:"application/octet-stream",isText:!1,ext:""};try{const n=`?path=${encodeURIComponent(t)}`,s=await se(`/api/filetype${n}`);if(!s.ok)throw new Error("probe failed");return await s.json()}catch{const s=Ke(t);return{mime:"application/octet-stream",isText:rn(t),ext:s}}}function ln(t){if(!t)return null;const n=t.split("/"),o=(n[n.length-1]||"").toLowerCase();return o===".bashrc"||o==="bashrc"||o===".bash_profile"||o===".profile"?"bashrc":o===".zshrc"||o==="zshrc"?"zshrc":o===".bash_history"||o==="bash_history"?"bash_history":o==="makefile"?"makefile":o==="dockerfile"?"dockerfile":o==="nginx.conf"||o==="nginx.conf.default"?"conf":null}function cn(t){const n=Ve.languages;switch(t){case"jsx":return n.jsx;case"tsx":return n.tsx;case"java":return n.java;case"ini":case"gitconfig":case"editorconfig":case"conf":case"config":return n.ini;case"js":return n.javascript;case"ts":return n.typescript;case"go":return n.go;case"php":return n.php;case"json":return n.json;case"yaml":case"yml":return n.yaml;case"toml":return n.toml||n.markup;case"md":case"markdown":return n.markdown;case"c":case"h":return n.c;case"cpp":case"hpp":return n.cpp;case"py":return n.python;case"makefile":return n.makefile;case"bashrc":case"zshrc":case"bash_history":case"profile":return n.bash;case"sh":case"bash":return n.bash;case"xml":case"xml-doc":return n["xml-doc"];case"html":case"htm":return n.markup;case"css":case"sass":case"scss":return n.sass;case"sql":return n.sql;default:return n.javascript}}function Se(t){switch(t){case"js":case"jsx":return"javascript";case"ts":case"tsx":return"typescript";case"go":return"go";case"php":return"php";case"json":return"json";case"yaml":case"yml":return"yaml";case"toml":return"toml";case"ini":case"gitconfig":case"editorconfig":case"conf":case"config":return"ini";case"md":case"markdown":return"markdown";case"c":case"h":return"c";case"cpp":case"cxx":case"c++":case"hpp":return"cpp";case"py":return"python";case"makefile":return"makefile";case"dockerfile":return"dockerfile";case"sh":case"bash":case"csh":return"bash";case"bashrc":case"zshrc":case"bash_history":case"profile":return"bash";case"xml":case"xml-doc":return"xml-doc";case"html":case"htm":return"markup";case"sass":case"scss":return"sass";case"sql":return"sql";case"less":case"css":return"css";default:return"text"}}function ut(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function dn(t,n){try{const s=cn(n),o=Se(n);return s?Ve.highlight(t,s,o):ut(t)}catch(s){return console.warn("Prism highlight failed",s),ut(t)}}function un({content:t,setContent:n,origContent:s,ext:o,alias:a,textareaId:f}){const{t:l}=ne(),c=r.useRef(null),u=r.useRef(null);return r.useEffect(()=>{var b;const m=a||Se(o);u.current&&u.current.setAttribute("data-grammar",m),c.current&&c.current.setAttribute("data-grammar",m);try{const S=(b=u.current)==null?void 0:b.querySelector("code");S&&Ve.highlightElement(S)}catch{}},[a,t,o]),r.useEffect(()=>{c.current&&u.current&&(u.current.scrollTop=c.current.scrollTop,u.current.scrollLeft=c.current.scrollLeft)},[t]),e.jsxs("div",{className:"editor-edit-area",children:[e.jsx("pre",{"aria-hidden":!0,className:`highlight-wrap language-${a||Se(o)}`,"data-grammar":a||Se(o),ref:m=>{u.current=m},children:e.jsx("code",{className:`language-${a||Se(o)}`,dangerouslySetInnerHTML:{__html:dn(t||"",o)}})}),e.jsx("textarea",{ref:c,className:"textarea",wrap:"off",value:t,name:f||"editor",id:f,"data-grammar":a,onChange:m=>n(m.target.value),onScroll:()=>{c.current&&u.current&&(u.current.scrollTop=c.current.scrollTop,u.current.scrollLeft=c.current.scrollLeft)},placeholder:l("open_or_create_file"),spellCheck:!1,autoCorrect:"off",autoCapitalize:"off",autoComplete:"off"})]})}function hn({path:t,onDimensions:n}){const{t:s}=ne(),o=qe(),a=Le(`/api/file?path=${encodeURIComponent(t)}${o?`&token=${encodeURIComponent(o)}`:""}`),[f,l]=r.useState(null),c=r.useRef(null);return e.jsxs("div",{style:{marginTop:8},children:[e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",overflow:"hidden"},children:e.jsx("img",{ref:c,src:a,alt:t.split("/").pop(),style:{maxWidth:"100%",maxHeight:"80vh",objectFit:"contain",borderRadius:6,boxShadow:"0 2px 8px rgba(0,0,0,0.4)"},onLoad:()=>{try{const u=c.current;if(u&&u.naturalWidth&&u.naturalHeight){l({w:u.naturalWidth,h:u.naturalHeight});try{n&&n(u.naturalWidth,u.naturalHeight)}catch{}}}catch{}}})}),e.jsxs("div",{style:{marginTop:8,display:"flex",gap:8,alignItems:"center"},children:[e.jsx("a",{className:"link",href:a,download:t.split("/").pop(),children:s("download")}),f?e.jsxs("span",{className:"muted",style:{marginLeft:8},children:[f.w," Ã— ",f.h]}):null]})]})}const fn=r.lazy(()=>ze(()=>import("./PdfPreview-2l9YD0ie.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url));function mn({path:t}){const{t:n}=ne();return e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"muted",children:n("loading_pdf")}),children:e.jsx(fn,{path:t})})}const pn=r.lazy(()=>ze(()=>import("./ShellView-CIPum43X.js"),__vite__mapDeps([10,1,2,3,4,11,6,7,5,8,9]),import.meta.url)),gn={name:"Shell",priority:100,matches:t=>!!(t.path&&t.path.startsWith("shell-")),view:({path:t})=>e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"muted",children:"Loading shellâ€¦"}),children:e.jsx(pn,{path:t})}),isEditable:!1},xn={name:"Directory",priority:90,matches:t=>!!(t.meta&&t.meta.isDir),view:({path:t,origContent:n})=>e.jsxs("div",{style:{padding:12},children:[e.jsxs("div",{style:{fontWeight:600},children:["Directory: ",t]}),e.jsxs("div",{className:"muted",style:{marginTop:6},children:[n?n.split(`
`).length:"0"," entries"]}),e.jsx("pre",{style:{marginTop:8,maxHeight:240,overflow:"auto",padding:8,background:"var(--panel)"},children:n})]}),isEditable:!1},yn={name:"PDF",priority:80,matches:t=>t.probe&&t.probe.mime==="application/pdf"||!!t.path&&t.path.toLowerCase().endsWith(".pdf"),view:({path:t})=>e.jsx(mn,{path:t}),isEditable:!1},_n={name:"Image",priority:70,matches:t=>{if(t.probe&&t.probe.mime&&t.probe.mime.startsWith("image/"))return!0;if(t.path){const n=t.path.toLowerCase();return n.endsWith(".png")||n.endsWith(".jpg")||n.endsWith(".jpeg")||n.endsWith(".gif")||n.endsWith(".svg")||n.endsWith(".webp")}return!1},view:({path:t,onDimensions:n})=>e.jsx(hn,{path:t,onDimensions:n}),isEditable:!1},vn={name:"Text",priority:50,matches:t=>{if(t.probe&&t.probe.isText)return!0;if(t.path){const n=t.path.toLowerCase();if(n.endsWith(".md")||n.endsWith(".txt")||n.endsWith(".json")||n.endsWith(".js")||n.endsWith(".ts")||n.endsWith(".tsx")||n.endsWith(".css")||n.endsWith(".html")||n.endsWith(".go")||n.endsWith(".py")||n.endsWith(".java")||n.endsWith(".c")||n.endsWith(".cpp")||n.endsWith(".h")||n.endsWith(".sh")||n.endsWith(".bat")||n.endsWith(".ps1")||n.endsWith(".yaml")||n.endsWith(".yml")||n.endsWith(".toml")||n.endsWith(".ini")||n.endsWith(".bashrc")||n.endsWith(".zshrc")||n.endsWith(".profile")||n.endsWith(".bash_history")||n.endsWith(".gitconfig")||n.endsWith(".editorconfig")||n.endsWith(".conf")||n.endsWith(".config")||n.endsWith(".xml"))return!0}return!1},view:({content:t,setContent:n,origContent:s,ext:o,alias:a,textareaId:f})=>e.jsx(un,{content:t||"",setContent:n||(()=>{}),origContent:s||"",ext:o||"",alias:a,textareaId:f||"editor"}),isEditable:!0},wn={name:"Binary",priority:10,matches:t=>!!(t.probe&&!t.probe.isText),view:({path:t})=>e.jsxs("div",{style:{marginTop:8,display:"flex",gap:8},children:[e.jsx("a",{className:"link",href:Le(`/api/file?path=${encodeURIComponent(t)}`),download:t.split("/").pop(),children:"Download"}),e.jsx("span",{className:"muted",children:"(Binary or unsupported file type)"})]}),isEditable:!1},_t={name:"Unsupported",priority:0,matches:()=>!0,view:({path:t})=>e.jsxs("div",{style:{padding:12},className:"muted",children:["Unsupported file type: ",t]}),isEditable:!1},bn=[gn,xn,yn,_n,vn,wn,_t].sort((t,n)=>n.priority-t.priority);function He(t){for(const n of bn)if(n.matches(t))return n;return _t}function jn(t){return t.charCodeAt(0)===65279?{text:t.slice(1),hasBOM:!0}:{text:t,hasBOM:!1}}function $n(t){return"\uFEFF"+t}function Sn({path:t,onSaved:n,settings:s,reloadTrigger:o,onUnsavedChange:a,onMeta:f}){const{t:l}=ne(),[c,u]=r.useState(""),[m,b]=r.useState(""),[S,E]=r.useState(!1),[x,v]=r.useState(""),[R,I]=r.useState(!1),[w,$]=r.useState(null),[P,K]=r.useState(!1),[A,fe]=r.useState(null),[oe,ie]=r.useState(null),[ce,g]=r.useState(null),[M,_]=r.useState(null),[U,D]=r.useState(!1),L=r.useRef(null),V=r.useRef(null),ee=r.useRef(null),J=He({path:t,meta:w,probe:A}),he=J.view,Z=r.useCallback(async(k=!1)=>{if(t){I(!0),v("");try{const T=await xe(t);if($(T),typeof f=="function"&&f(T),!k&&ce&&M&&T.modTime!==M&&!confirm(l("confirm_reload_external","File has been modified externally. Reload?"))){I(!1);return}_(T.modTime);const te=await an(t);fe(te);const de=He({path:t,meta:T,probe:te});if(T.isDir){u(""),I(!1);return}if(de.name==="Text"){const _e=await qt(t),{text:be,hasBOM:je}=jn(_e);u(be),b(be),E(je),g(Date.now()),D(!1)}else u(""),I(!1)}catch{A&&A.isText&&(v(l("failed_to_load","Failed to load")),D(!0)),g(null)}finally{I(!1)}}},[t,l]),we=(()=>{try{const k=localStorage.getItem("mlc_max_editor_size");if(k)return parseInt(k,10)}catch{}return 1024*1024})(),d=async(k,T=64*1024)=>{if(t){K(!0);try{const te=`?path=${encodeURIComponent(t)}&offset=${k}&length=${T}`,de=await se(`/api/file/section${te}`);if(!de.ok)throw new Error("section fetch failed");const _e=await de.text();u(_e),b(_e)}catch{v(l("failed_to_load_section","Failed to load section"))}finally{K(!1)}}},H=ln(t)||A&&A.ext||Ke(t),q=void 0,Q=A&&A.ext?A.ext:"text",ae=(k=>k?"editor-"+k.replace(/[^a-z0-9_-]/gi,"-").replace(/-+/g,"-"):"editor")(t||"");r.useEffect(()=>{Z()},[Z]),r.useEffect(()=>{let k=!0;return(async()=>{if(!(!w||!w.isDir||!t))try{const T=await gt(t);if(!k)return;u(""),b(T.map(te=>te.name).join(`
`))}catch{}})(),()=>{k=!1}},[w,t]),r.useEffect(()=>{o&&o>0&&Z(!0)},[o,Z]),r.useEffect(()=>{L.current&&V.current&&(V.current.scrollTop=L.current.scrollTop,V.current.scrollLeft=L.current.scrollLeft)},[c]),r.useEffect(()=>{if(L.current&&V.current){const k=window.getComputedStyle(V.current),T=k.lineHeight,te=k.paddingTop,de=k.paddingBottom;T&&(L.current.style.lineHeight=T),te&&(L.current.style.paddingTop=te),de&&(L.current.style.paddingBottom=de)}},[c,t]),r.useEffect(()=>{var k;V.current&&V.current.setAttribute("data-grammar",Q),L.current&&(L.current.setAttribute("data-grammar",Q),ae&&(L.current.id=ae));try{const T=(k=V.current)==null?void 0:k.querySelector("code");T&&Prism.highlightElement(T)}catch{}},[Q,c,ae]),r.useEffect(()=>{if(!a||!J.isEditable)return;const k=c!==m;if(ee.current===null||ee.current!==k){try{a(t,k)}catch(T){console.warn("onUnsavedChange threw",T)}ee.current=k}},[c,m,a,t,J.isEditable]);const pe=async()=>{if(t){v(l("saving","Saving..."));try{const k=S?$n(c):c;await Kt(t,k),v(l("saved","Saved")),setTimeout(()=>v(T=>T===l("saved","Saved")?"":T),1500),await Z(!0),n&&n()}catch{v(l("save_failed","Save failed"))}}},Ie=async()=>{if(t&&!(c!==m&&!confirm(l("confirm_reload_unsaved","You have unsaved changes. Reloading will discard them. Continue?")))){v(l("reloading","Reloading..."));try{await Z(!0),v(l("reloaded","Reloaded")),setTimeout(()=>v(k=>k===l("reloaded","Reloaded")?"":k),1500)}catch{v(l("reload_failed","Reload failed"))}}};return r.useEffect(()=>{const k=T=>{(T.ctrlKey||T.metaKey)&&T.key==="s"&&(T.preventDefault(),pe())};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[pe]),e.jsxs("div",{className:"editor",children:[e.jsxs("div",{className:"editor-header",children:[e.jsx("strong",{children:l("editor")}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{className:"muted",children:w&&w.absPath?w.absPath:t||l("select_or_create")}),w&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"muted",style:{fontSize:11},children:[w.isDir?"directory":J.name,"Â· ",w.mode," Â· ",new Date(w.modTime).toLocaleString()," ",w.size?`Â· ${ue(w.size)}`:""]}),oe&&J.name==="Image"?e.jsxs("span",{style:{fontSize:11,marginLeft:8},className:"muted",children:[oe.w," Ã— ",oe.h]}):null]})]}),e.jsxs("div",{className:"actions",children:[e.jsx("button",{className:"link icon-btn",title:l("refresh"),"aria-label":l("refresh"),onClick:Ie,disabled:!t,children:e.jsx(z,{name:ye("refresh")||"icon-refresh",title:l("refresh"),size:16})}),J.isEditable&&c!==m&&e.jsx("button",{className:"link icon-btn",title:l("save"),"aria-label":l("save"),onClick:pe,disabled:!t,children:e.jsx(z,{name:ye("upload")||"icon-upload",title:l("save"),size:16})})]}),w&&w.size&&w.size>we&&J.isEditable?e.jsxs("div",{style:{marginLeft:12},children:[e.jsx("div",{className:"muted",style:{fontSize:12},children:l("file_too_large","File is large ({{size}}). Full edit disabled.",{size:ue(w.size)})}),e.jsxs("div",{style:{marginTop:6,display:"flex",gap:8},children:[e.jsx("button",{className:"btn",onClick:()=>d(0,64*1024),children:l("view_head","View head")}),e.jsx("button",{className:"btn",onClick:()=>d(Math.max(0,(w.size||0)-64*1024),64*1024),children:l("view_tail","View tail")})]}),P&&e.jsx("div",{className:"muted",children:l("loading_section","Loading section...")})]}):null,x&&e.jsx("div",{className:"muted",children:x})]}),e.jsx("div",{className:"editor-body",children:R?e.jsx("div",{className:"muted",children:l("loading")}):e.jsx(he,{path:t,content:c,setContent:u,origContent:m,ext:H,alias:q,textareaId:ae,onDimensions:(k,T)=>ie({w:k,h:T})})})]})}function kn({path:t}){const{t:n}=ne(),[s,o]=r.useState(null),[a,f]=r.useState(null);return r.useEffect(()=>{let l=!0;return(async()=>{if(!t){o(null);return}try{const c=await xe(t);if(!l)return;o(c),f(null)}catch(c){if(!l)return;f((c==null?void 0:c.message)||n("failed_fetch_metadata")),o(null)}})(),()=>{l=!1}},[t,n]),t?e.jsxs("div",{style:{padding:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600},children:t.split("/").pop()}),e.jsx("div",{className:"muted",style:{fontSize:12},children:t})]}),e.jsx("div",{children:e.jsx("a",{className:"link",href:`/api/file?path=${encodeURIComponent(t)}`,download:t.split("/").pop(),children:n("download")})})]}),e.jsxs("div",{style:{marginTop:12},children:[a?e.jsx("div",{className:"error",children:a}):null,s?e.jsx("table",{style:{width:"100%",borderCollapse:"collapse"},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{width:160,padding:6},className:"muted",children:n("full_path")}),e.jsx("td",{style:{padding:6},children:s.path||t})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"muted",style:{padding:6},children:n("mime")}),e.jsx("td",{style:{padding:6},children:s.mime||"unknown"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"muted",style:{padding:6},children:n("size")}),e.jsx("td",{style:{padding:6},children:s.size?ue(s.size):"n/a"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"muted",style:{padding:6},children:n("mode")}),e.jsx("td",{style:{padding:6},children:s.mode||"n/a"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"muted",style:{padding:6},children:n("last_modified")}),e.jsx("td",{style:{padding:6},children:s.modTime?new Date(s.modTime).toLocaleString():"n/a"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"muted",style:{padding:6},children:n("is_dir")}),e.jsx("td",{style:{padding:6},children:s.isDir?n("yes"):n("no")})]})]})}):e.jsx("div",{className:"muted",children:n("loading_metadata")})]})]}):e.jsx("div",{style:{padding:12},className:"muted",children:n("no_file_selected")})}function Cn({openFiles:t,active:n,onActivate:s,onClose:o,onCloseOthers:a,onCloseLeft:f,titles:l,fullPaths:c,types:u,evictedTabs:m=[],onRestoreEvicted:b}){const{t:S}=ne(),[E,x]=r.useState(null),v=r.useRef(null),R=r.useRef(null),[I,w]=r.useState(!1),[$,P]=r.useState(!1),[K,A]=r.useState(!1),[fe,oe]=r.useState(null),ie=()=>{const g=R.current;if(!g){w(!1),P(!1);return}w(g.scrollLeft>0),P(g.scrollWidth>g.clientWidth+g.scrollLeft+1)},ce=g=>{const M=R.current;M&&(M.scrollBy({left:g,behavior:"smooth"}),setTimeout(ie,220))};return r.useEffect(()=>{function g(_){v.current&&(_.target instanceof Node&&v.current.contains(_.target)||x(null))}function M(_){_.key==="Escape"&&x(null)}return document.addEventListener("click",g),document.addEventListener("keydown",M),()=>{document.removeEventListener("click",g),document.removeEventListener("keydown",M)}},[]),r.useEffect(()=>{ie();function g(){ie()}window.addEventListener("resize",g);function M(){const _=R.current,U=140;if(!_){oe(null);return}const D=_.clientWidth,L=Math.max(1,Math.floor(D/U));oe(L)}return window.addEventListener("resize",M),M(),()=>{window.removeEventListener("resize",g),window.removeEventListener("resize",M)}},[t]),e.jsxs("div",{className:"tabbar",ref:v,children:[(()=>{const M=R.current?R.current.clientWidth:600,_=fe??Math.max(1,Math.floor(M/140)),U=t.length>_?t.slice(0,t.length-_):[];return U.length===0?null:e.jsxs("div",{className:"tab-evicted-dropdown",style:{display:"flex",alignItems:"center",marginRight:8,position:"relative"},children:[e.jsx("button",{className:"btn",onClick:()=>A(D=>!D),children:"â‹¯"}),K&&e.jsx("div",{style:{position:"absolute",left:0,top:"100%",background:"var(--bg)",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",padding:8,zIndex:50},children:U.map(D=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"4px 8px"},children:[e.jsx("button",{className:"link",onClick:()=>{b&&b(D),A(!1)},style:{flex:1,textAlign:"left"},children:l&&l[D]||D.split("/").pop()}),e.jsxs("div",{style:{display:"flex",gap:6},children:[e.jsx("button",{className:"btn btn-small",title:S("restore"),onClick:()=>{b&&b(D),A(!1)},children:"â†º"}),e.jsx("button",{className:"btn btn-small",title:S("close"),onClick:()=>{o&&o(D),A(!1)},children:"âœ•"}),e.jsx("button",{className:"btn btn-small",title:S("close_others"),onClick:()=>{U.filter(L=>L!==D).forEach(L=>o&&o(L)),A(!1)},children:"â‹¯"})]})]},D))})]})})(),I&&e.jsx("button",{className:"tab-scroll tab-scroll-left","aria-label":S("scroll_left"),onClick:()=>ce(-200),children:"â—€"}),e.jsx("div",{className:"tab-scroll-area",ref:R,onScroll:ie,children:t.map((g,M)=>e.jsx("div",{className:"tab-item",style:{display:"flex",alignItems:"center",gap:8,padding:"4px 8px"},children:e.jsxs("button",{className:g===n?"btn":"link",onClick:()=>s(g),onContextMenu:_=>{_.preventDefault(),x(M)},style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{className:"tab-icon",children:(()=>{if((u&&u[g])==="shell")return e.jsx(z,{name:W("terminal")});if((u&&u[g])==="dir")return e.jsx(z,{name:W("folder")});const _=(g.split(".").pop()||"").toLowerCase(),U=ye(_);return e.jsx(z,{name:U})})()},`${(u==null?void 0:u[g])||"file"}-${g}`),(()=>{const _=l&&l[g]||g.split("/").pop()||g,U=_.length>10?_.slice(0,10)+"â€¦":_,D=l&&l[g]&&l[g].startsWith("*")?"tab-title tab-unsaved":"tab-title";return e.jsx("span",{title:(c==null?void 0:c[g])||_,className:D,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:120},children:U})})()]})},g))}),E!==null&&(()=>{const g=t[E];if(!g)return null;const M=v.current,_=R.current;let U={position:"absolute",right:8,top:40,padding:8,display:"flex",flexDirection:"column",gap:6};try{const D=_==null?void 0:_.querySelectorAll(".tab-item"),L=D?D[E]:null;if(L&&M){const V=M.getBoundingClientRect(),ee=L.getBoundingClientRect();U={position:"absolute",left:ee.left-V.left,top:ee.bottom-V.top+6,padding:8,display:"flex",flexDirection:"column",gap:6}}}catch{}return e.jsxs("div",{className:"dropdown",style:U,children:[e.jsx("button",{ref:D=>{D&&D.focus()},className:"link",onClick:()=>{o==null||o(g),x(null)},children:S("close")}),e.jsx("button",{className:"link",onClick:()=>{a==null||a(g),x(null)},children:S("close_others")}),e.jsx("button",{className:"link",onClick:()=>{f==null||f(g),x(null)},children:S("close_left")})]})})(),$&&e.jsx("button",{className:"tab-scroll tab-scroll-right","aria-label":S("scroll_right"),onClick:()=>ce(200),children:"â–¶"})]})}function En({visible:t=!0,onClose:n}){const{t:s}=ne(),[,o]=r.useState(0);if(r.useEffect(()=>Bt(()=>o(c=>c+1)),[]),!t)return null;const a=At().slice(0,100);function f(l){const c=[],u=/([\w\/\.\-]+:\d+)/g;let m=0,b;for(;(b=u.exec(l))!==null;)b.index>m&&c.push({text:l.slice(m,b.index)}),c.push({text:b[0],cls:"log-path"}),m=b.index+b[0].length;return m<l.length&&c.push({text:l.slice(m)}),c.map((S,E)=>S.cls?e.jsx("span",{className:S.cls,children:S.text},E):e.jsx("span",{children:S.text},E))}return e.jsxs("div",{className:"log-overlay",children:[e.jsxs("div",{className:"log-header",children:[e.jsx("strong",{children:s("logs")}),e.jsxs("div",{children:[e.jsx("button",{className:"btn",onClick:()=>Wt(),children:s("clear")}),e.jsx("button",{className:"btn",onClick:()=>n&&n(),style:{marginLeft:8},children:s("close")})]})]}),e.jsx("div",{children:a.map((l,c)=>e.jsxs("div",{className:`log-entry log-level-${(l.level||"").toLowerCase()}`,children:[e.jsxs("div",{className:"log-meta",children:[l.ts," ",e.jsx("span",{className:"log-level",children:l.level})]}),e.jsx("div",{className:"log-message",children:f(l.msg)})]},c))})]})}async function Ln(t,n="mlcremote-screenshot.png"){const s=await Dt(t,{backgroundColor:null,scale:2});return new Promise(o=>{s.toBlob(a=>{if(!a){o();return}const f=URL.createObjectURL(a),l=document.createElement("a");l.href=f,l.download=n,document.body.appendChild(l),l.click(),l.remove(),URL.revokeObjectURL(f),o()},"image/png")})}class Nn{constructor(n=""){lt(this,"prefix");this.prefix=n}key(n){return`${this.prefix}${n}`}get(n,s,o=null){try{const a=localStorage.getItem(this.key(n)),f=s.read(a);return f===null?o:f}catch{return o}}getOrDefault(n,s,o){const a=this.get(n,s,null);return a===null?o:a}set(n,s,o){try{localStorage.setItem(this.key(n),o.write(s))}catch{}}remove(n){try{localStorage.removeItem(this.key(n))}catch{}}}const ht={read:t=>t===null?null:t,write:t=>String(t)},ft={read:t=>t===null?null:t==="1"||t==="true",write:t=>t?"1":"0"},Te=new Nn("mlc:");function Tn({title:t,message:n,onClose:s}){const{t:o}=ne();return r.useEffect(()=>{const a=f=>{f.key==="Escape"&&s()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[s]),e.jsx("div",{className:"login-overlay",onClick:s,children:e.jsxs("div",{className:"login-box",onClick:a=>a.stopPropagation(),style:{minWidth:350,maxWidth:500},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[e.jsx("h3",{style:{margin:0,fontSize:18},children:t}),e.jsx("button",{className:"link icon-btn",onClick:s,"aria-label":o("close"),children:e.jsx(z,{name:W("close"),size:16})})]}),e.jsx("div",{style:{marginBottom:24,fontSize:14,lineHeight:"1.5",color:"var(--text-muted)"},children:n}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx("button",{className:"btn",onClick:s,children:o("close")})})]})})}function zn({health:t,isOnline:n,hideMemoryUsage:s,lastHealthAt:o}){const{t:a}=ne(),[f,l]=r.useState(new Date);return r.useEffect(()=>{const c=window.setInterval(()=>l(new Date),1e3);return()=>window.clearInterval(c)},[]),e.jsxs("div",{className:"status-bar",style:{height:24,background:"var(--bg-alt)",borderTop:"1px solid var(--border)",display:"flex",alignItems:"center",padding:"0 8px",fontSize:12,color:"var(--text-muted)",justifyContent:"space-between",userSelect:"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},title:o?`${a("last_checked","Last checked")}: ${new Date(o).toLocaleTimeString()}`:"",children:[e.jsx("span",{style:{width:8,height:8,borderRadius:4,background:t&&t.host?"#10b981":n?"#f59e0b":"#ef4444"}}),e.jsx("span",{children:t&&t.host?t.host:n?a("connecting"):a("offline","Offline")})]}),e.jsxs("span",{className:n?"ok":"err",title:a(n?"status_connected":"disconnected"),children:[e.jsx(z,{name:"icon-circle-filled",size:10})," ",n?a("online","Online"):a("offline","Offline")]}),t&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"sep"}),e.jsxs("span",{title:`PID: ${t.pid}`,children:["Host: ",t.host||"localhost"]}),t.os&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"sep"}),e.jsx("span",{title:`OS: ${t.os} ${t.distro||""}`,children:t.distro||t.os})]}),e.jsx("span",{className:"sep"}),e.jsx("span",{title:a("server_time","Server Time"),children:t.server_time?new Date(t.server_time).toLocaleTimeString():""})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[!s&&t&&t.sys_mem_total_bytes?(()=>{const c=t.sys_mem_total_bytes||1,u=t.sys_mem_free_bytes||0,m=c-u,b=Math.round(m/c*100);return e.jsx("div",{style:{display:"flex",alignItems:"center",gap:6},title:`System Memory: ${ue(m)} / ${ue(c)} (${b}%)`,children:e.jsxs("div",{style:{width:32,height:14,background:"var(--bg-panel)",border:"1px solid var(--border)",borderRadius:3,position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{width:`${b}%`,height:"100%",background:b>85?"#ef4444":b>60?"#f59e0b":"#3b82f6",transition:"width 0.5s ease"}}),e.jsxs("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",fontSize:9,fontWeight:700,color:"var(--text)",textShadow:"0 0 2px var(--bg)"},children:[b,"%"]})]})})})():null,e.jsx("div",{title:f.toLocaleDateString(),children:new Intl.DateTimeFormat(void 0,{hour:"numeric",minute:"numeric",second:"numeric"}).format(f)})]})]})}function Rn({direction:t="vertical",initialSize:n=50,minSize:s=10,onResize:o,children:a,className:f}){const[l,c]=X.useState(n);X.useEffect(()=>{c(n)},[n]);const u=X.useRef(null),m=X.useRef(!1),b=X.useRef(n),S=t==="vertical",E=R=>{R.preventDefault(),m.current=!0,b.current=l,document.addEventListener("mousemove",x),document.addEventListener("mouseup",v),document.body.style.cursor=S?"col-resize":"row-resize",document.body.style.userSelect="none";const I=document.createElement("div");I.id="split-drag-overlay",I.style.position="fixed",I.style.top="0",I.style.left="0",I.style.width="100%",I.style.height="100%",I.style.zIndex="9999",I.style.cursor=S?"col-resize":"row-resize",document.body.appendChild(I)},x=R=>{if(!m.current||!u.current)return;const I=u.current.getBoundingClientRect();let w=0;S?w=(R.clientX-I.left)/I.width*100:w=(R.clientY-I.top)/I.height*100,w=Math.max(s,Math.min(100-s,w)),c(w),b.current=w},v=()=>{m.current=!1,document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",v),document.body.style.cursor="",document.body.style.userSelect="";const R=document.getElementById("split-drag-overlay");R&&R.remove(),o&&o(b.current)};return e.jsxs("div",{ref:u,className:`split-pane-container ${t} ${f||""}`,style:{display:"flex",flexDirection:S?"row":"column",width:"100%",height:"100%",overflow:"hidden"},children:[e.jsx("div",{style:{flexBasis:`${l}%`,flexGrow:0,flexShrink:0,overflow:"hidden",position:"relative"},children:a[0]}),e.jsx("div",{className:"split-resizer",style:{flexBasis:"4px",cursor:S?"col-resize":"row-resize",background:"var(--border-color, #444)",zIndex:100,transition:"background 0.2s",position:"relative",alignSelf:"stretch"},onMouseDown:E,children:e.jsx("div",{style:{position:"absolute",top:S?0:-4,bottom:S?0:-4,left:S?-4:0,right:S?-4:0,zIndex:10}})}),e.jsx("div",{style:{flex:1,overflow:"hidden",position:"relative"},children:a[1]})]})}const In=r.lazy(()=>ze(()=>import("./TerminalTab-CP9TvBJL.js"),__vite__mapDeps([11,1,2,3,4,6,7,5,8,9]),import.meta.url));function Dn(){var rt,it;const{t,i18n:n}=ne(),{health:s,isOnline:o,lastHealthAt:a,refreshHealth:f,login:l,setToken:c,logout:u,showLogin:m,setShowLogin:b,showTokenInput:S,setShowTokenInput:E,showAuthChooser:x,setShowAuthChooser:v}=Jt(),[R,I]=r.useState(0),w=r.useRef(null);r.useEffect(()=>{!w.current&&s&&I(Date.now()),w.current=s},[s]);const[$,P]=r.useState(""),[K,A]=r.useState(""),fe=r.useCallback(i=>A(i),[]),[oe,ie]=r.useState(0),[ce,g]=r.useState(!0),[M,_]=r.useState({root:{id:"root",files:[],activeFile:null}}),[U,D]=r.useState({type:"leaf",paneId:"root"}),[L,V]=r.useState("root"),ee=((rt=M[L])==null?void 0:rt.files)||[],J=((it=M[L])==null?void 0:it.activeFile)||"",he=i=>{_(p=>{const h=p[L];if(!h)return p;const C=i(h.files);return{...p,[L]:{...h,files:C}}})},Z=i=>{_(p=>{const h=p[L];return h?{...p,[L]:{...h,activeFile:i}}:p})},[Re,we]=r.useState([]),[d,N]=r.useState(null),[H,q]=r.useState(!0),Q=i=>{q(i),ge({autoOpen:i}).catch(console.error)},me=8;function ae(i){he(p=>{if(p.includes(i))return p;const h=[...p,i];if(h.length<=me)return h;const C=h[0];try{we(y=>y.includes(C)?y:[...y,C])}catch{}return h.slice(1)}),Z(i),xe(i).then(p=>{nt(h=>({...h,[i]:p}))}).catch(()=>{})}const[pe,Ie]=r.useState({}),[k,T]=r.useState(!1),te=i=>{T(i),ge({showHidden:i}).catch(console.error)},[de,_e]=r.useState(!1),[be,je]=r.useState(!1),[vt,De]=r.useState(!1),[wt,Ge]=r.useState(!1),[Xe,Ye]=r.useState(!1),[al,ll]=r.useState(!1),[Me,Je]=r.useState(null),[Ze,bt]=r.useState(300),[Ne,Qe]=r.useState("dark"),[jt,et]=r.useState(0),[cl,$t]=r.useState(new Date),[Pe,tt]=r.useState(null),[St,dl]=r.useState({}),[kt,Ct]=r.useState({}),[ul,nt]=r.useState({}),Et=r.useCallback((i,p)=>{Ct(h=>({...h,[i]:p}))},[]),Fe=r.useCallback(async()=>{await f()},[f]);r.useEffect(()=>{const i=window.setInterval(()=>$t(new Date),1e3);return()=>window.clearInterval(i)},[]),r.useEffect(()=>{Xt().then(h=>{Je({allowDelete:h.allowDelete,defaultShell:h.defaultShell}),typeof h.allowDelete<"u"&&_e(!!h.allowDelete),h.theme&&Qe(h.theme),typeof h.autoOpen<"u"&&q(h.autoOpen),typeof h.showHidden<"u"&&T(h.showHidden),typeof h.showLogs<"u"&&je(h.showLogs),typeof h.hideMemoryUsage<"u"&&Ye(h.hideMemoryUsage),h.maxEditorSize&&(et(h.maxEditorSize),localStorage.setItem("mlc_max_editor_size",h.maxEditorSize.toString()));const C=new URLSearchParams(window.location.search),y=C.get("lng")||C.get("lang");y&&y!==h.language?(console.log(`[i18n] Syncing language from Desktop (${y}) -> Server`),ge({language:y}).catch(console.error),n.language!==y&&n.changeLanguage(y)):h.language&&n.language!==h.language&&n.changeLanguage(h.language)}).catch(()=>Je({allowDelete:!1,defaultShell:"bash"}));const p=new URLSearchParams(window.location.search).get("profileId");if(p){console.log("Restoring state for profile:",p);try{const h=localStorage.getItem(`workspace_state_${p}`);if(h){const C=JSON.parse(h);C.panes&&_(C.panes),C.layout&&D(C.layout),C.activePaneId&&V(C.activePaneId)}}catch(h){console.error("Failed to restore workspace state",h)}}},[]),r.useEffect(()=>{const p=new URLSearchParams(window.location.search).get("profileId");if(p){const h={panes:M,layout:U,activePaneId:L};localStorage.setItem(`workspace_state_${p}`,JSON.stringify(h))}},[M,U,L]),r.useEffect(()=>{Ne==="light"?document.documentElement.classList.add("theme-light"):document.documentElement.classList.remove("theme-light")},[Ne]);const st=i=>{const p=`pane-${Date.now()}`,h=M[L],C=h==null?void 0:h.activeFile;_(y=>({...y,[p]:{id:p,files:C?[C]:[],activeFile:C||null}})),D(y=>{const B=G=>G.type==="leaf"?G.paneId===L?{type:"branch",direction:i,size:50,children:[G,{type:"leaf",paneId:p}]}:G:{...G,children:[B(G.children[0]),B(G.children[1])]};return B(y)}),V(p)},ot=i=>{i==="root"&&U.type==="leaf"||(D(p=>{const h=y=>{if(y.type==="leaf")return y.paneId===i?null:y;const B=h(y.children[0]),G=h(y.children[1]);return!B&&!G?null:B?G?{...y,children:[B,G]}:B:G};return h(p)||{type:"leaf",paneId:"root"}}),_(p=>{const h={...p};return delete h[i],h}),L===i&&V("root"))},Lt=(i,p)=>{D(h=>{const C=y=>y===i?{...y,size:p}:y.type==="branch"?{...y,children:[C(y.children[0]),C(y.children[1])]}:y;return C(h)})},Oe=i=>i.type==="leaf"?Nt(i.paneId):e.jsxs(Rn,{direction:i.direction,initialSize:i.size,onResize:p=>Lt(i,p),children:[Oe(i.children[0]),Oe(i.children[1])]}),Nt=i=>{const p=M[i];if(!p)return e.jsx("div",{className:"muted",children:"Pane not found"});const h=p.files,C=p.activeFile||"",y=j=>{if(V(i),_(F=>{const O=F[i];return O?(j&&!j.startsWith("shell-")&&j.includes("."),{...F,[i]:{...O,activeFile:j}}):F}),j&&!j.startsWith("shell-")){const F=j.split("/").filter(Boolean);F.pop(),F.length&&`${F.join("/")}`}P(j),ie(Date.now())},B=j=>{_(F=>{const O=F[i];if(!O)return F;const re=O.files.filter($e=>$e!==j);let le=O.activeFile;return O.activeFile===j&&(le=re[0]||null),{...F,[i]:{...O,files:re,activeFile:le}}})},G={};for(const j of h)if(j.startsWith("shell-")){const O=(pe[j]||""||"/").split("/").filter(Boolean);let re="/";if(O.length){const le=O[O.length-1];le.includes(".")&&O.length>1?re=O[O.length-2]:re=le}G[j]=re}else{const F=j.split("/").pop()||j;G[j]=kt[j]?`*${F}`:F}const Ae={},Be={};for(const j of h)j.startsWith("shell-")?(Ae[j]="shell",Be[j]=pe[j]||"/"):(Ae[j]="file",Be[j]=j);const at=i===L;return e.jsxs("div",{className:"pane-content",style:{height:"100%",display:"flex",flexDirection:"column",position:"relative"},onClick:()=>{at||V(i)},children:[at&&e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:2,background:"var(--accent)",zIndex:10}}),h.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{onContextMenu:j=>{j.preventDefault()},children:e.jsx(r.Suspense,{fallback:null,children:e.jsx(Cn,{openFiles:h,active:C,titles:G,fullPaths:Be,types:Ae,onRestoreEvicted:()=>{},onActivate:y,onClose:B,onCloseOthers:j=>{_(F=>{const O=F[i];if(!O)return F;const re=O.files.filter(le=>le===j);return{...F,[i]:{...O,files:re,activeFile:j}}})},onCloseLeft:j=>{_(F=>{const O=F[i];if(!O)return F;const re=O.files.indexOf(j);if(re<=0)return F;const le=O.files.slice(re);let $e=O.activeFile;return le.includes($e||"")||($e=j),{...F,[i]:{...O,files:le,activeFile:$e}}})}})})}),e.jsx("div",{style:{flex:1,position:"relative"},children:h.map(j=>e.jsx("div",{style:{display:j===C?"block":"none",height:"100%"},children:j.startsWith("shell-")?e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"muted",children:t("loading")}),children:e.jsx(In,{shell:Me&&Me.defaultShell||"bash",path:pe[j]||"",onExit:()=>B(j)},j)}):j==="trash"?e.jsx(nn,{}):j==="binary"?e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"muted",children:"Loadingâ€¦"}),children:e.jsx(kn,{path:d||void 0})}):e.jsx(Sn,{path:j,settings:Me||void 0,onSaved:()=>{},reloadTrigger:St[j]||0,onUnsavedChange:Et,onMeta:F=>{F&&F.path&&nt(O=>({...O,[j]:F}))}})},j))})]}):e.jsxs("div",{className:"welcome-message",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--text-muted)"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"10px",opacity:.2},children:e.jsx(z,{name:W("folder"),size:48})}),e.jsx("div",{style:{opacity:.5},children:t("no_files")}),i!=="root"&&e.jsxs("button",{className:"btn link",onClick:()=>ot(i),children:[t("close")," Pane"]})]})]})};return e.jsxs("div",{className:"app",children:[e.jsxs("header",{className:"app-header",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("img",{src:"/logo.png",alt:"MLCRemote logo",style:{height:28,display:"block"},onLoad:()=>g(!0),onError:()=>g(!1)}),!ce&&e.jsx("h1",{style:{margin:0},children:"MLCRemote"})]}),e.jsxs("div",{className:"status",children:[e.jsx("button",{className:"link icon-btn",onClick:async()=>{var C;let i=$||"";try{if(i){const y=await xe(i);if(!y.isDir&&y.path){const B=y.path.split("/").filter(Boolean);B.pop(),i=B.length?`/${B.join("/")}`:""}}else if(J&&!J.startsWith("shell-"))try{const y=await xe(J);if(y.isDir)i=y.path||J;else if(y.path){const B=y.path.split("/").filter(Boolean);B.pop(),i=B.length?`/${B.join("/")}`:""}}catch{const B=J.split("/").filter(Boolean);B.pop(),i=B.length?`/${B.join("/")}`:""}}catch{}const p=`shell-${Date.now()}`;let h=i||"";if(h&&((C=h.split("/").pop())!=null&&C.includes("."))){const y=h.split("/").filter(Boolean);y.pop(),h=y.length?`/${y.join("/")}`:"/"}Ie(y=>({...y,[p]:h})),ae(p)},title:t("terminal"),"aria-label":t("terminal"),children:e.jsx(z,{name:W("terminal"),title:t("terminal"),size:16})}),e.jsx("button",{className:"link icon-btn","aria-label":"Toggle theme",onClick:()=>{const i=Ne==="dark"?"light":"dark";Qe(i),Te.set("theme",i,ht),i==="light"?document.documentElement.classList.add("theme-light"):document.documentElement.classList.remove("theme-light")},children:Ne==="dark"?e.jsx(z,{name:W("moon"),title:t("theme"),size:16}):e.jsx(z,{name:W("sun"),title:t("theme"),size:16})}),e.jsx("button",{className:"link icon-btn",title:t("about"),"aria-label":t("about"),onClick:()=>De(!0),children:e.jsx(z,{name:W("info"),title:t("about"),size:16})}),e.jsx("button",{className:"link icon-btn",title:"Screenshot","aria-label":"Screenshot",onClick:async()=>{const i=document.querySelector(".app");if(i)try{await Ln(i,"mlcremote-screenshot.png")}catch(p){console.error("Screenshot failed",p)}},children:e.jsx(z,{name:W("screenshot"),title:"Screenshot",size:16})}),e.jsx("button",{className:"link icon-btn",title:"Trash","aria-label":"Trash",onClick:()=>{ee.includes("trash")||ae("trash"),Z("trash")},children:e.jsx(z,{name:"icon-trash",title:"Trash",size:16})}),e.jsx("button",{className:"link icon-btn",title:"Split Right","aria-label":"Split Right",onClick:()=>st("vertical"),children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",style:{display:"block"},children:[e.jsx("path",{fillRule:"evenodd",d:"M14 3H2a1 1 0 00-1 1v8a1 1 0 001 1h12a1 1 0 001-1V4a1 1 0 00-1-1zM2 2a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V4a2 2 0 00-2-2H2z",clipRule:"evenodd"}),e.jsx("path",{d:"M8 4v8H7V4h1z"})]})}),e.jsx("button",{className:"link icon-btn",title:"Split Down","aria-label":"Split Down",onClick:()=>st("horizontal"),children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",style:{display:"block"},children:[e.jsx("path",{fillRule:"evenodd",d:"M14 3H2a1 1 0 00-1 1v8a1 1 0 001 1h12a1 1 0 001-1V4a1 1 0 00-1-1zM2 2a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V4a2 2 0 00-2-2H2z",clipRule:"evenodd"}),e.jsx("path",{d:"M2 8h12v1H2V8z"})]})}),U.type!=="leaf"&&e.jsx("button",{className:"link icon-btn",title:"Close Active Pane","aria-label":"Close Active Pane",onClick:()=>ot(L),style:{marginLeft:4},children:e.jsx(z,{name:W("close"),size:16})}),e.jsx("button",{className:"link icon-btn","aria-label":t("settings"),title:t("settings"),onClick:()=>Ge(i=>!i),children:e.jsx(z,{name:W("settings"),title:t("settings"),size:16})})]}),wt&&e.jsx(tn,{autoOpen:H,showHidden:k,onToggleAutoOpen:i=>Q(i),onToggleShowHidden:i=>te(i),showLogs:be,onToggleLogs:i=>{je(i),ge({showLogs:i}).catch(console.error)},hideMemoryUsage:Xe,onToggleHideMemoryUsage:i=>{Ye(i),ge({hideMemoryUsage:i}).catch(console.error)},onClose:()=>Ge(!1),onLanguageChange:i=>{i!==n.language&&(n.changeLanguage(i),ge({language:i}).catch(console.error))},maxEditorSize:jt,onMaxFileSizeChange:i=>{et(i),ge({maxEditorSize:i}).catch(console.error)}})]}),e.jsxs("div",{className:"app-body",style:{alignItems:"stretch"},children:[e.jsx("aside",{className:"sidebar",style:{width:Ze},children:e.jsx(en,{showHidden:k,autoOpen:H,onToggleHidden:i=>te(i),selectedPath:$,activeDir:K,onDirChange:fe,focusRequest:oe,reloadSignal:R,onSelect:(i,p)=>{if(P(i),p){Z(i);return}(async()=>{try{const h=await xe(i),C=He({path:i,meta:h});if(C.name==="Binary"||C.name==="Unsupported"){ee.includes("binary")||ae("binary"),N(i),Z("binary");return}}catch(h){tt({title:"Broken Link",message:`Cannot open file: ${h.message||"stat failed"}`});return}H?ae(i):Z(i)})(),Fe()},onView:i=>{ee.includes(i)?Z(i):ae(i),P(i),Fe()},onBackendActive:Fe,onChangeRoot:async()=>{if(!de){alert("Changing root is not permitted by the server settings");return}const i=window.prompt("Enter the server directory path to use as new root (e.g. /home/user/project):",$||"/");if(!i)return;const p=i.trim();try{if(!(await xe(p)).isDir){alert("Selected path is not a directory");return}P(p);try{Te.set("lastRoot",p,ht)}catch{}try{const C=Te.getOrDefault("showHidden",ft,!1);Te.set("showHidden",C,ft)}catch{}}catch(h){alert("Cannot access selected path: "+((h==null?void 0:h.message)||h))}}})}),e.jsx("div",{className:"resizer",onMouseDown:i=>{const p=i.clientX,h=Ze;function C(B){const G=B.clientX-p;bt(Math.max(160,Math.min(800,h+G)))}function y(){window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",y)}window.addEventListener("mousemove",C),window.addEventListener("mouseup",y)},children:e.jsx("div",{className:"bar"})}),e.jsx("main",{className:"main",children:e.jsxs("div",{className:"main-content",children:[x&&e.jsx("div",{className:"login-overlay",children:e.jsxs("div",{className:"login-box",children:[e.jsx("h3",{children:"Not Authenticated"}),e.jsx("p",{children:"You need to sign in or provide an access key to continue."}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[e.jsxs("button",{className:"btn",onClick:()=>{v(!1),b(!0)},children:[t("open")," (password)"]}),e.jsx("button",{className:"btn",onClick:()=>{v(!1),E(!0)},children:"I have an access key"})]})]})}),m&&e.jsx("div",{className:"login-overlay",children:e.jsxs("div",{className:"login-box",children:[e.jsx("h3",{children:"Sign in"}),e.jsx("p",{children:"Please enter the server password to obtain an access token."}),e.jsx("input",{id:"mlc-login-pwd",type:"password",placeholder:"Password"}),e.jsx("div",{style:{marginTop:8},children:e.jsx("button",{className:"btn",onClick:async()=>{const i=document.getElementById("mlc-login-pwd");if(i)try{await l(i.value)}catch(p){alert("Login failed: "+((p==null?void 0:p.message)||p))}},children:t("open")})})]})}),S&&e.jsx("div",{className:"login-overlay",children:e.jsxs("div",{className:"login-box",children:[e.jsx("h3",{children:"Enter Access Token"}),e.jsx("p",{children:"The server requires an access token. Paste it here to continue."}),e.jsx("input",{id:"mlc-token-input",type:"text",placeholder:"token"}),e.jsx("div",{style:{marginTop:8},children:e.jsx("button",{className:"btn",onClick:async()=>{const i=document.getElementById("mlc-token-input");if(i)try{c(i.value.trim())}catch(p){alert("Failed to store token: "+((p==null?void 0:p.message)||p))}},children:"Use token"})})]})}),Pe&&e.jsx(Tn,{title:Pe.title,message:Pe.message,onClose:()=>tt(null)}),Oe(U)]})})]}),e.jsx(zn,{health:s,isOnline:o,hideMemoryUsage:Xe,lastHealthAt:a}),e.jsx(En,{visible:be,onClose:()=>je(!1)}),vt&&e.jsx("div",{className:"about-backdrop",onClick:()=>De(!1),children:e.jsxs("div",{className:"about-modal",onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h3",{style:{margin:0},children:"MLCRemote"}),e.jsx("button",{"aria-label":t("close"),title:t("close"),onClick:()=>De(!1),style:{background:"transparent",border:"none",cursor:"pointer"},children:e.jsx(z,{name:"icon-close",size:16})})]}),e.jsxs("div",{style:{marginBottom:8},children:["Copyright Â© ",new Date().getFullYear()," Michael Lechner"]}),e.jsxs("div",{style:{marginBottom:8},children:["Version: ",s?`${s.status}@${s.version}`:"unknown"]}),s&&e.jsxs("div",{style:{maxHeight:"40vh",overflow:"auto",background:"#0b0b0b",color:"white",padding:12,borderRadius:6},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Host:"})," ",s.host]}),e.jsxs("div",{children:[e.jsx("strong",{children:"PID:"})," ",s.pid]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Version:"})," ",s.version]}),e.jsxs("div",{children:[e.jsx("strong",{children:"App Memory:"})," ",ue(s.go_alloc_bytes)," (alloc) / ",ue(s.go_sys_bytes)," (sys)"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"System Memory:"})," ",ue((s.sys_mem_total_bytes||0)-(s.sys_mem_free_bytes||0))," / ",ue(s.sys_mem_total_bytes||0)," used"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"CPU:"})," ",Math.round((s.cpu_percent||0)*10)/10,"%"]}),e.jsxs("div",{style:{marginTop:8},children:[e.jsx("strong",{children:"Server time:"})," ",s.server_time]}),e.jsxs("div",{style:{marginTop:4},children:[e.jsx("strong",{children:"Timezone:"})," ",s.timezone]}),e.jsxs("div",{className:"muted",style:{marginTop:8,fontSize:12},children:["Last refresh: ",a?new Date(a).toLocaleString():"n/a"]})]})]})})]})}const Mn="MLCRemote IDE",Pn="Files",Fn="Terminal",On="Settings",An="Search",Bn="New File",Wn="New Folder",Un="Rename",Hn="Save",Vn="Cancel",qn="Theme",Kn="Language",Gn="Editor",Xn="Run",Yn="Debug",Jn="Close",Zn="Open",Qn="Loading...",es="No files open",ts="Switch to Remote View",ns="Disconnected from server",ss="Refresh",os="Change Root",rs="Upload",is="Download",as="Copy Full Path",ls="Copy Relative Path",cs="Copy Name",ds="Are you sure you want to delete {{path}}?",us="Auto open files",hs="Show hidden files",fs="Show server logs",ms="Hide memory usage gauge",ps="About MLCRemote",gs="Version",xs="Copyright",ys="Drop to upload",_s="View file",vs="Loading trash...",ws="Trash is empty",bs="Original path",js="Trash path",$s="Undo (coming)",Ss="Connected to shell session: {{id}}",ks="Connected to ephemeral shell",Cs="Copy",Es="Paste",Ls="Paste text here",Ns="Logs",Ts="Clear",zs="Loading PDF support...",Rs="Loading PDF...",Is="Prev",Ds="Next",Ms="No preview",Ps="No file selected",Fs="Full path",Os="MIME",As="Size",Bs="Mode",Ws="Last Modified",Us="Is Dir",Hs="Yes",Vs="No",qs="Loading metadata...",Ks="Open or create a file to edit",Gs="Close Others",Xs="Close Left",Ys="Restore",Js="scroll left",Zs="scroll right",Qs="Editor Settings",eo="Max File Size (MB)",to="Files larger than this will open in read-only mode.",no={app_title:Mn,files:Pn,terminal:Fn,settings:On,search:An,new_file:Bn,new_folder:Wn,rename:Un,delete:"Delete",save:Hn,cancel:Vn,theme:qn,language:Kn,editor:Gn,run:Xn,debug:Yn,close:Jn,open:Zn,loading:Qn,no_files:es,switch_to_remote:ts,disconnected:ns,refresh:ss,change_root:os,upload:rs,download:is,copy_full_path:as,copy_relative_path:ls,copy_name:cs,delete_confirm:ds,auto_open_files:us,show_hidden_files:hs,show_server_logs:fs,hide_memory_usage:ms,about:ps,version:gs,copyright:xs,drop_to_upload:ys,view_file:_s,loading_trash:vs,trash_empty:ws,original_path:bs,trash_path:js,undo_coming:$s,terminal_connected_session:Ss,terminal_connected_ephemeral:ks,copy:Cs,paste:Es,paste_text_here:Ls,logs:Ns,clear:Ts,loading_pdf_support:zs,loading_pdf:Rs,previous:Is,next:Ds,no_preview:Ms,no_file_selected:Ps,full_path:Fs,mime:Os,size:As,mode:Bs,last_modified:Ws,is_dir:Us,yes:Hs,no:Vs,loading_metadata:qs,open_or_create_file:Ks,close_others:Gs,close_left:Xs,restore:Ys,scroll_left:Js,scroll_right:Zs,editor_settings:Qs,max_file_size:eo,max_file_size_tooltip:to},so="MLCRemote IDE",oo="Dateien",ro="Terminal",io="Einstellungen",ao="Suchen",lo="Neue Datei",co="Neuer Ordner",uo="Umbenennen",ho="Speichern",fo="Abbrechen",mo="Design",po="Sprache",go="Editor",xo="AusfÃ¼hren",yo="Debuggen",_o="SchlieÃŸen",vo="Ã–ffnen",wo="Laden...",bo="Keine Dateien geÃ¶ffnet",jo="Zur Remote-Ansicht wechseln",$o="Vom Server getrennt",So="Aktualisieren",ko="Wurzelverzeichnis Ã¤ndern",Co="Hochladen",Eo="Herunterladen",Lo="VollstÃ¤ndigen Pfad kopieren",No="Relativen Pfad kopieren",To="Namen kopieren",zo="Sind Sie sicher, dass Sie {{path}} lÃ¶schen mÃ¶chten?",Ro="Dateien automatisch Ã¶ffnen",Io="Versteckte Dateien anzeigen",Do="Server-Logs anzeigen",Mo="Speicherauslastung ausblenden",Po="Ãœber MLCRemote",Fo="Version",Oo="Urheberrecht",Ao="Zum Hochladen hier ablegen",Bo="Datei anzeigen",Wo="Papierkorb wird geladen...",Uo="Papierkorb ist leer",Ho="UrsprÃ¼nglicher Pfad",Vo="Papierkorb-Pfad",qo="RÃ¼ckgÃ¤ngig (demnÃ¤chst)",Ko="Verbunden mit Shell-Sitzung: {{id}}",Go="Verbunden mit temporÃ¤rer Shell",Xo="Kopieren",Yo="EinfÃ¼gen",Jo="Text hier einfÃ¼gen",Zo="Protokolle",Qo="LÃ¶schen",er="PDF-UnterstÃ¼tzung wird geladen...",tr="PDF wird geladen...",nr="ZurÃ¼ck",sr="Weiter",or="Keine Vorschau",rr="Keine Datei ausgewÃ¤hlt",ir="VollstÃ¤ndiger Pfad",ar="MIME-Typ",lr="GrÃ¶ÃŸe",cr="Modus",dr="Zuletzt geÃ¤ndert",ur="Ist Verzeichnis",hr="Ja",fr="Nein",mr="Metadaten werden geladen...",pr="Ã–ffnen oder erstellen Sie eine Datei zum Bearbeiten",gr="Andere schlieÃŸen",xr="Links schlieÃŸen",yr="Wiederherstellen",_r="nach links scrollen",vr="nach rechts scrollen",wr="Editor-Einstellungen",br="Max. DateigrÃ¶ÃŸe (MB)",jr="Dateien, die grÃ¶ÃŸer sind, werden schreibgeschÃ¼tzt geÃ¶ffnet.",$r={app_title:so,files:oo,terminal:ro,settings:io,search:ao,new_file:lo,new_folder:co,rename:uo,delete:"LÃ¶schen",save:ho,cancel:fo,theme:mo,language:po,editor:go,run:xo,debug:yo,close:_o,open:vo,loading:wo,no_files:bo,switch_to_remote:jo,disconnected:$o,refresh:So,change_root:ko,upload:Co,download:Eo,copy_full_path:Lo,copy_relative_path:No,copy_name:To,delete_confirm:zo,auto_open_files:Ro,show_hidden_files:Io,show_server_logs:Do,hide_memory_usage:Mo,about:Po,version:Fo,copyright:Oo,drop_to_upload:Ao,view_file:Bo,loading_trash:Wo,trash_empty:Uo,original_path:Ho,trash_path:Vo,undo_coming:qo,terminal_connected_session:Ko,terminal_connected_ephemeral:Go,copy:Xo,paste:Yo,paste_text_here:Jo,logs:Zo,clear:Qo,loading_pdf_support:er,loading_pdf:tr,previous:nr,next:sr,no_preview:or,no_file_selected:rr,full_path:ir,mime:ar,size:lr,mode:cr,last_modified:dr,is_dir:ur,yes:hr,no:fr,loading_metadata:mr,open_or_create_file:pr,close_others:gr,close_left:xr,restore:yr,scroll_left:_r,scroll_right:vr,editor_settings:wr,max_file_size:br,max_file_size_tooltip:jr},Sr="MLCRemote IDE",kr="Archivos",Cr="Terminal",Er="ConfiguraciÃ³n",Lr="Buscar",Nr="Nuevo Archivo",Tr="Nueva Carpeta",zr="Renombrar",Rr="Guardar",Ir="Cancelar",Dr="Tema",Mr="Idioma",Pr="Editor",Fr="Ejecutar",Or="Depurar",Ar="Cerrar",Br="Abrir",Wr="Cargando...",Ur="No hay archivos abiertos",Hr="Cambiar a vista remota",Vr="Desconectado del servidor",qr="Actualizar",Kr="Cambiar raÃ­z",Gr="Subir",Xr="Descargar",Yr="Copiar ruta completa",Jr="Copiar ruta relativa",Zr="Copiar nombre",Qr="Â¿EstÃ¡s seguro de que deseas eliminar {{path}}?",ei="Abrir archivos automÃ¡ticamente",ti="Mostrar archivos ocultos",ni="Mostrar logs del servidor",si="Ocultar uso de memoria",oi="Acerca de MLCRemote",ri="VersiÃ³n",ii="Derechos de autor",ai="Soltar para subir",li="Ver archivo",ci="Cargando papelera...",di="La papelera estÃ¡ vacÃ­a",ui="Ruta original",hi="Ruta de la papelera",fi="Deshacer (prÃ³ximamente)",mi="Conectado a la sesiÃ³n de shell: {{id}}",pi="Conectado a la shell efÃ­mera",gi="Copiar",xi="Pegar",yi="Pegar texto aquÃ­",_i="Registros",vi="Limpiar",wi="Cargando soporte PDF...",bi="Cargando PDF...",ji="Ant",$i="Sig",Si="Sin vista previa",ki="NingÃºn archivo seleccionado",Ci="Ruta completa",Ei="MIME",Li="TamaÃ±o",Ni="Modo",Ti="Ãšltima modificaciÃ³n",zi="Es directorio",Ri="SÃ­",Ii="No",Di="Cargando metadatos...",Mi="Abrir o crear un archivo para editar",Pi="Cerrar otros",Fi="Cerrar izquierda",Oi="Restaurar",Ai="desplazarse a la izquierda",Bi="desplazarse a la derecha",Wi={app_title:Sr,files:kr,terminal:Cr,settings:Er,search:Lr,new_file:Nr,new_folder:Tr,rename:zr,delete:"Eliminar",save:Rr,cancel:Ir,theme:Dr,language:Mr,editor:Pr,run:Fr,debug:Or,close:Ar,open:Br,loading:Wr,no_files:Ur,switch_to_remote:Hr,disconnected:Vr,refresh:qr,change_root:Kr,upload:Gr,download:Xr,copy_full_path:Yr,copy_relative_path:Jr,copy_name:Zr,delete_confirm:Qr,auto_open_files:ei,show_hidden_files:ti,show_server_logs:ni,hide_memory_usage:si,about:oi,version:ri,copyright:ii,drop_to_upload:ai,view_file:li,loading_trash:ci,trash_empty:di,original_path:ui,trash_path:hi,undo_coming:fi,terminal_connected_session:mi,terminal_connected_ephemeral:pi,copy:gi,paste:xi,paste_text_here:yi,logs:_i,clear:vi,loading_pdf_support:wi,loading_pdf:bi,previous:ji,next:$i,no_preview:Si,no_file_selected:ki,full_path:Ci,mime:Ei,size:Li,mode:Ni,last_modified:Ti,is_dir:zi,yes:Ri,no:Ii,loading_metadata:Di,open_or_create_file:Mi,close_others:Pi,close_left:Fi,restore:Oi,scroll_left:Ai,scroll_right:Bi},Ui="MLCRemote IDE",Hi="Fichiers",Vi="Terminal",qi="ParamÃ¨tres",Ki="Rechercher",Gi="Nouveau Fichier",Xi="Nouveau Dossier",Yi="Renommer",Ji="Enregistrer",Zi="Annuler",Qi="ThÃ¨me",ea="Langue",ta="Ã‰diteur",na="ExÃ©cuter",sa="DÃ©boguer",oa="Fermer",ra="Ouvrir",ia="Chargement...",aa="Aucun fichier ouvert",la="Passer Ã  la vue distante",ca="DÃ©connectÃ© du serveur",da="Actualiser",ua="Changer la racine",ha="TÃ©lÃ©verser",fa="TÃ©lÃ©charger",ma="Copier le chemin complet",pa="Copiar le chemin relatif",ga="Copier le nom",xa="ÃŠtes-vous sÃ»r de vouloir supprimer {{path}} ?",ya="Ouvrir les fichiers automatiquement",_a="Afficher les fichiers cachÃ©s",va="Afficher les logs du serveur",wa="Masquer l'utilisation de la mÃ©moire",ba="Ã€ propos de MLCRemote",ja="Version",$a="Copyright",Sa="DÃ©poser pour tÃ©lÃ©verser",ka="Voir le fichier",Ca="Chargement de la corbeille...",Ea="La corbeille est vide",La="Chemin d'origine",Na="Chemin de la corbeille",Ta="Annuler (prochainement)",za="ConnectÃ© Ã  la session shell : {{id}}",Ra="ConnectÃ© au shell Ã©phÃ©mÃ¨re",Ia="Copier",Da="Coller",Ma="Coller le texte ici",Pa="Journaux",Fa="Effacer",Oa="Chargement du support PDF...",Aa="Chargement du PDF...",Ba="PrÃ©c",Wa="Suiv",Ua="Pas d'aperÃ§u",Ha="Aucun fichier sÃ©lectionnÃ©",Va="Chemin complet",qa="MIME",Ka="Taille",Ga="Mode",Xa="DerniÃ¨re modification",Ya="Est un rÃ©pertoire",Ja="Oui",Za="Non",Qa="Chargement des mÃ©tadatos...",el="Ouvrir ou crÃ©er un fichier Ã  Ã©diter",tl="Fermer les autres",nl="Fermer Ã  gauche",sl="Restaurer",ol="faire dÃ©filer vers la gauche",rl="faire dÃ©filer vers la droite",il={app_title:Ui,files:Hi,terminal:Vi,settings:qi,search:Ki,new_file:Gi,new_folder:Xi,rename:Yi,delete:"Supprimer",save:Ji,cancel:Zi,theme:Qi,language:ea,editor:ta,run:na,debug:sa,close:oa,open:ra,loading:ia,no_files:aa,switch_to_remote:la,disconnected:ca,refresh:da,change_root:ua,upload:ha,download:fa,copy_full_path:ma,copy_relative_path:pa,copy_name:ga,delete_confirm:xa,auto_open_files:ya,show_hidden_files:_a,show_server_logs:va,hide_memory_usage:wa,about:ba,version:ja,copyright:$a,drop_to_upload:Sa,view_file:ka,loading_trash:Ca,trash_empty:Ea,original_path:La,trash_path:Na,undo_coming:Ta,terminal_connected_session:za,terminal_connected_ephemeral:Ra,copy:Ia,paste:Da,paste_text_here:Ma,logs:Pa,clear:Fa,loading_pdf_support:Oa,loading_pdf:Aa,previous:Ba,next:Wa,no_preview:Ua,no_file_selected:Ha,full_path:Va,mime:qa,size:Ka,mode:Ga,last_modified:Xa,is_dir:Ya,yes:Ja,no:Za,loading_metadata:Qa,open_or_create_file:el,close_others:tl,close_left:nl,restore:sl,scroll_left:ol,scroll_right:rl};mt.use(Mt).use(Rt).init({resources:{en:{translation:no},de:{translation:$r},es:{translation:Wi},fr:{translation:il}},fallbackLng:"en",interpolation:{escapeValue:!1}});console.log("MLCRemote: captureTokenFromURL type:",typeof Ue);try{const n=new URLSearchParams(window.location.search).get("api");if(n)try{const o=new URL(n).searchParams.get("lang");o&&(console.log("MLCRemote: Setting language to",o),mt.changeLanguage(o))}catch(s){console.error("Failed to parse api url for lang",s)}typeof Ue=="function"?Ue():console.error("MLCRemote: captureTokenFromURL is not a function!")}catch(t){console.error("MLCRemote: Initialization error",t)}(async()=>{try{const t=await ze(()=>import("./icons-sprite-CPT79syg.js"),[],import.meta.url),n=t&&(t.default||t);if(n&&typeof document<"u"){const s=document.createElement("div");s.style.width="0",s.style.height="0",s.style.position="absolute",s.style.visibility="hidden",s.innerHTML=n,document.body.insertBefore(s,document.body.firstChild)}}catch(t){alert("Failed to load icon sprite: "+((t==null?void 0:t.message)||t))}})();It(document.getElementById("root")).render(e.jsx(Yt,{children:e.jsx(Dn,{})}));export{ze as _,se as a,vl as g,Le as m,xe as s};
