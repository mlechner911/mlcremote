const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./PdfPreview-D_VfPOpD.js","./vendor-react-DgaSUS5F.js","./vendor-scheduler-DYLXRpC5.js","./vendor-prism-D73ALYcd.js","./vendor-prism-Cg1sXqY3.css","./vendor-html2canvas-BfYXEYrK.js","./vendor-xterm-DOcMqDAd.js","./vendor-xterm-DYP7pi_n.css","./vendor-i18next-BnqEsHlA.js","./vendor-i18next-browser-languagedetector-ClvlpAgo.js","./ShellView-Cc6iVa1x.js","./TerminalTab-DFvuj4VI.js"])))=>i.map(i=>d[i]);
var zt=Object.defineProperty;var Rt=(t,n,s)=>n in t?zt(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s;var lt=(t,n,s)=>Rt(t,typeof n!="symbol"?n+"":n,s);import{r as X,R as r,j as e,u as te,i as Dt,c as It}from"./vendor-react-DgaSUS5F.js";import{P as Ve}from"./vendor-prism-D73ALYcd.js";import{h as Mt}from"./vendor-html2canvas-BfYXEYrK.js";import"./vendor-xterm-DOcMqDAd.js";import{i as mt}from"./vendor-i18next-BnqEsHlA.js";import{B as Pt}from"./vendor-i18next-browser-languagedetector-ClvlpAgo.js";import"./vendor-scheduler-DYLXRpC5.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const f of a)if(f.type==="childList")for(const c of f.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function s(a){const f={};return a.integrity&&(f.integrity=a.integrity),a.referrerPolicy&&(f.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?f.credentials="include":a.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function o(a){if(a.ep)return;a.ep=!0;const f=s(a);fetch(a.href,f)}})();const Ft="modulepreload",Bt=function(t,n){return new URL(t,n).href},ct={},ze=function(n,s,o){let a=Promise.resolve();if(s&&s.length>0){const c=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=Promise.allSettled(s.map(m=>{if(m=Bt(m,o),m in ct)return;ct[m]=!0;const j=m.endsWith(".css"),S=j?'[rel="stylesheet"]':"";if(!!o)for(let w=c.length-1;w>=0;w--){const R=c[w];if(R.href===m&&(!j||R.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${m}"]${S}`))return;const x=document.createElement("link");if(x.rel=j?"stylesheet":Ft,j||(x.as="script"),x.crossOrigin="",x.href=m,u&&x.setAttribute("nonce",u),document.head.appendChild(x),j)return new Promise((w,R)=>{x.addEventListener("load",w),x.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${m}`)))})}))}function f(c){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=c,window.dispatchEvent(l),!l.defaultPrevented)throw c}return a.then(c=>{for(const l of c||[])l.status==="rejected"&&f(l.reason);return n().catch(f)})},Ot=200,Ee=[],Le=[];function pt(t,n){const s={ts:new Date().toISOString(),level:t,msg:n};for(Ee.push(s);Ee.length>Ot;)Ee.shift();Le.forEach(o=>o())}function Y(t){pt("info",t)}function Ce(t){pt("warn",t)}function At(){return Ee.slice().reverse()}function Ut(t){return Le.push(t),()=>{const n=Le.indexOf(t);n>=0&&Le.splice(n,1)}}function Ht(){Ee.length=0,Le.forEach(t=>t())}function qe(){try{return localStorage.getItem("mlcremote_token")}catch{return null}}function Ue(t){try{localStorage.setItem("mlcremote_token",t)}catch{}}let ve="";function dt(t){ve=t.replace(/\/$/,"")}function wl(){return ve}function we(t){if(!ve||typeof t!="string"||t.startsWith("http"))return t;if(ve.includes("?")){const[n,s]=ve.split("?"),o=`${n.replace(/\/$/,"")}${t}`;return o.includes("?")?`${o}&${s}`:`${o}?${s}`}return`${ve}${t}`}async function se(t,n){const s=qe(),o=new Headers(n==null?void 0:n.headers);s&&o.set("X-Auth-Token",s);const a={...n||{},headers:o};let f=t;typeof t=="string"&&t.startsWith("/")&&(f=we(t));const c=await fetch(f,a);if(c.status===401){try{localStorage.removeItem("mlcremote_token")}catch{}try{window.dispatchEvent(new CustomEvent("mlcremote:auth-failed",{detail:{url:typeof t=="string"?t:t.url}}))}catch{}}return c}async function Wt(t){Y("POST /api/login");const n=await fetch(we("/api/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:t})});if(Y(`/api/login => ${n.status}`),!n.ok)throw new Error("login failed");const s=await n.json();if(s&&s.token)return Ue(s.token),s.token;throw new Error("no token in response")}async function Vt(){Y("GET /health");const t=await se("/health");if(Y(`/health => ${t.status}`),!t.ok)throw Ce("/health not ok"),new Error("health failed");return t.json()}function He(){try{const t=new URLSearchParams(window.location.search),n=t.get("token");n&&Ue(n);const s=t.get("api");if(s){Y(`[Debug] Found API param: ${s}`);try{const o=new URL(s);let a=o.origin+o.pathname;a.endsWith("/")&&(a=a.slice(0,-1)),Y(`[Debug] Setting Base URL: ${a}`),dt(a);const f=o.searchParams.get("token");f&&Ue(f)}catch(o){console.error("Failed to parse API URL",o),dt(s)}}else Y("[Debug] No API param found");return!!n}catch{}return!1}async function qt(){try{return(await se("/api/auth/check")).status===200}catch{return!1}}async function gt(t="",n){const s=new URLSearchParams;t&&s.set("path",t),n!=null&&n.showHidden&&s.set("showHidden","1");const o=s.toString()?`?${s.toString()}`:"";Y(`GET /api/tree${o}`);const a=await se(`/api/tree${o}`);if(Y(`/api/tree${o} => ${a.status}`),!a.ok)throw Ce("/api/tree not ok"),new Error("tree failed");return a.json()}async function Kt(t){Y(`GET /api/file?path=${t}`);const n=await se(`/api/file?path=${encodeURIComponent(t)}`);if(Y(`/api/file?path=${t} => ${n.status}`),!n.ok)throw Ce("/api/file read failed"),new Error("read failed");return n.text()}async function fe(t){Y(`GET /api/stat?path=${t}`);const n=await se(`/api/stat?path=${encodeURIComponent(t)}`);if(Y(`/api/stat?path=${t} => ${n.status}`),!n.ok)throw new Error("stat failed");return n.json()}async function Gt(t,n){Y(`POST /api/file path=${t} size=${n.length}`);const s=await se("/api/file",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:t,content:n})});if(Y(`/api/file POST => ${s.status}`),!s.ok)throw Ce("/api/file save failed"),new Error("save failed")}async function Xt(t){Y(`DELETE /api/file?path=${t}`);const n=await se(`/api/file?path=${encodeURIComponent(t)}`,{method:"DELETE"});if(Y(`/api/file delete => ${n.status}`),!n.ok)throw Ce("/api/file delete failed"),new Error("delete failed")}async function Yt(){const t=await se("/api/settings");if(!t.ok)throw new Error("Failed to load settings");return t.json()}async function ye(t){const n=await se("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error("Failed to save settings");return n.json()}const xt=X.createContext(null);function Jt({children:t}){const[n,s]=X.useState(null),[o,a]=X.useState(null),[f,c]=X.useState(navigator.onLine),[l,u]=X.useState(!1),[m,j]=X.useState(!1),[S,C]=X.useState(!1);r.useState(()=>{if(typeof window>"u")return;const $=new URLSearchParams(window.location.search).get("token");if($){console.log("[Auth] Token found in URL (sync init):",$),localStorage.setItem("mlcremote_token",$);const P=window.location.protocol+"//"+window.location.host+window.location.pathname;window.history.replaceState({path:P},"",P)}});const x=X.useCallback(async()=>{if(navigator.onLine)try{const b=await Vt();s(b),a(Date.now()),await qt()||(localStorage.removeItem("mlcremote_token"),b.password_auth?u(!0):b.auth_required&&j(!0))}catch{s(null)}},[]);X.useEffect(()=>{const b=()=>{c(!0),x()},$=()=>{c(!1),s(null)};window.addEventListener("online",b),window.addEventListener("offline",$);const P=setInterval(x,60*1e3);x();const G=()=>C(!0);return window.addEventListener("mlcremote:auth-failed",G),()=>{window.removeEventListener("online",b),window.removeEventListener("offline",$),window.removeEventListener("mlcremote:auth-failed",G),clearInterval(P)}},[x]),X.useEffect(()=>{if(!n){C(!1);return}const b=!!n.password_auth,$=!!n.auth_required&&!n.password_auth,P=localStorage.getItem("mlcremote_token");C(!!((b||$)&&!P))},[n]);const w=async b=>{await Wt(b),await x(),u(!1),C(!1)},R=b=>{localStorage.setItem("mlcremote_token",b),x(),j(!1),C(!1)},D=()=>{localStorage.removeItem("mlcremote_token"),x()};return e.jsx(xt.Provider,{value:{health:n,isOnline:f,lastHealthAt:o,refreshHealth:x,login:w,setToken:R,logout:D,showLogin:l,setShowLogin:u,showTokenInput:m,setShowTokenInput:j,showAuthChooser:S,setShowAuthChooser:C},children:t})}function Zt(){const t=X.useContext(xt);if(!t)throw new Error("useAuth must be used within AuthProvider");return t}const z=({name:t,className:n,title:s,size:o=16})=>{if(!t)return null;const a=`#${t}`;return e.jsxs("svg",{className:n,width:o,height:o,"aria-hidden":s?void 0:"true",role:s?"img":void 0,children:[s?e.jsx("title",{children:s}):null,e.jsx("use",{href:a})]})},Qt={"flag-gb":"icon-flag-gb",jpg:"icon-image",svg:"icon-image",x:"icon-close",info:"icon-info",search:"icon-search",user:"icon-user",link:"icon-link",stop:"icon-stop",view:"icon-view",trash:"icon-trash",copy:"icon-copy",dir:"icon-folder",pdf:"icon-pdf",gif:"icon-image",warn:"icon-warning",cr:"icon-chevron-right",moon:"icon-moon","flag-es":"icon-flag-es",jpeg:"icon-image",txt:"icon-text",zip:"icon-archive",gz:"icon-archive",bz2:"icon-archive",js:"icon-js",download:"icon-download",tar:"icon-archive",upload:"icon-upload",cfg:"icon-settings",settings:"icon-settings",close:"icon-close",shell:"icon-terminal",minus:"icon-minus",screenshot:"icon-screenshot","flag-de":"icon-flag-de","flag-fr":"icon-flag-fr",md:"icon-markdown",png:"icon-image",refresh:"icon-refresh",server:"icon-server",markdown:"icon-markdown",json:"icon-json",run:"icon-play",cl:"icon-chevron-left",home:"icon-home",log:"icon-log",sun:"icon-sun",mjs:"icon-js",sh:"icon-terminal",plus:"icon-plus",up:"icon-up"};function me(t){if(t)return Qt[t.toLowerCase()]}function yt(t,n){if(n){const s=n.lastIndexOf(".");if(s>=0&&s<n.length-1){const o=n.slice(s+1).toLowerCase();return me(o)}}}const U=t=>"icon-"+t;function en({x:t,y:n,items:s,onClose:o}){const a=r.useRef(null);r.useEffect(()=>{function l(u){a.current&&!a.current.contains(u.target)&&o()}return window.addEventListener("mousedown",l),window.addEventListener("scroll",o,!0),window.addEventListener("resize",o),()=>{window.removeEventListener("mousedown",l),window.removeEventListener("scroll",o,!0),window.removeEventListener("resize",o)}},[o]);const[f,c]=r.useState({x:t,y:n});return r.useLayoutEffect(()=>{if(a.current){const l=a.current.getBoundingClientRect();let u=t,m=n;u+l.width>window.innerWidth&&(u=window.innerWidth-l.width-8),m+l.height>window.innerHeight&&(m=window.innerHeight-l.height-8),c({x:u,y:m})}},[t,n]),e.jsx("div",{ref:a,style:{position:"fixed",left:f.x,top:f.y,background:"var(--panel)",border:"1px solid var(--border)",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",borderRadius:6,padding:4,zIndex:99999,minWidth:160,display:"flex",flexDirection:"column"},onContextMenu:l=>{l.preventDefault(),o()},children:s.map((l,u)=>l.separator?e.jsx("div",{style:{height:1,background:"var(--border)",margin:"4px 0"}},u):e.jsxs("button",{className:"context-menu-item",onClick:()=>{o(),l.action()},style:{display:"flex",alignItems:"center",gap:8,padding:"6px 10px",border:"none",background:"transparent",color:l.danger?"var(--danger)":"var(--text)",cursor:"pointer",textAlign:"left",borderRadius:4,fontSize:13},onMouseEnter:m=>m.currentTarget.style.background=l.danger?"rgba(239,68,68,0.1)":"var(--bg)",onMouseLeave:m=>m.currentTarget.style.background="transparent",children:[l.icon&&e.jsx("span",{style:{width:16,display:"flex"},children:l.icon}),l.label]},u))})}function tn({onSelect:t,showHidden:n,onToggleHidden:s,autoOpen:o=!0,onView:a,onBackendActive:f,onChangeRoot:c,canChangeRoot:l,selectedPath:u,activeDir:m,onDirChange:j,focusRequest:S,reloadSignal:C}){const{t:x}=te(),[w,R]=r.useState(""),[D,b]=r.useState([]),[$,P]=r.useState(!1),[G,O]=r.useState(""),[pe,oe]=r.useState(null),[ie,de]=r.useState(!1),[g,M]=r.useState(null),v=r.useCallback(async d=>{P(!0),O("");try{const k=await gt(d,{showHidden:n});b(k),R(d);try{H.current!==d&&(j==null||j(d),H.current=d)}catch{}f==null||f();try{const W=Z.current;W&&requestAnimationFrame(()=>{const q=he.current;if(q)try{const ee=q.querySelector(`[data-path="${CSS.escape(W)}"]`);ee&&(ee.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"}),ee.focus())}catch{}})}catch{}}catch(k){O(k.message||x("status_failed"))}finally{P(!1)}},[n,f,j,x]),H=r.useRef("");r.useEffect(()=>{typeof m>"u"||m!==w&&v(m)},[m,w,v]),r.useEffect(()=>{v("")},[v]),r.useEffect(()=>{v(w||"")},[w,v,C]);const I=()=>{if(!w||w==="/"){v("");return}const d=w.split("/").filter(Boolean);d.pop();const k=`/${d.join("/")}`;v(k||"")},N=async(d,k)=>{if(!(!k||k.length===0)&&(console.log("Dropping files:",k.length,"to",d),!!confirm(x("upload_confirm",`Upload ${k.length} file(s) to ${d}?`)))){de(!0),O("");try{const W=new FormData;for(let ge=0;ge<k.length;ge++)W.append("file",k[ge],k[ge].name);const q=`?path=${encodeURIComponent(d)}`;if(!(await se(`/api/upload${q}`,{method:"POST",body:W})).ok)throw new Error(x("status_failed"));await v(d)}catch(W){O(W.message||x("status_failed"))}finally{de(!1)}}},V=(d,k)=>{d.preventDefault(),console.log("onDrop triggered",k),oe(null),N(k,d.dataTransfer.files)},Q=(d,k)=>{d.preventDefault(),oe(k)},J=d=>{d.preventDefault(),oe(null)},he=r.useRef(null),Z=r.useRef("");r.useEffect(()=>{Z.current=u||""},[u]),r.useEffect(()=>{if(u)try{const d=he.current;if(!d)return;const k=d.querySelector(`li[key="${CSS.escape(u)}"]`),W=d.querySelector(`[data-path="${u}"]`),q=k||W;if(q){q.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"});const ee=q.querySelector("button.entry");ee&&ee.focus()}}catch{}},[u,w]),r.useEffect(()=>{if(S)try{const d=u||"";if(!d)return;const k=he.current;if(!k)return;const W=CSS.escape(d),q=k.querySelector(`[data-path="${W}"]`);q&&(q.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"}),q.focus())}catch{}},[S,u]);const Re=async d=>{if(confirm(x("delete_confirm",{path:d})))try{await Xt(d),v(w)}catch(k){alert(x("status_failed")+": "+k.message)}},be=(d,k)=>{d.preventDefault(),d.stopPropagation(),M({x:d.clientX,y:d.clientY,item:k})};return e.jsxs("div",{className:"explorer",children:[e.jsxs("div",{className:"explorer-header",children:[e.jsx("strong",{className:"hidden",children:e.jsx(z,{name:U("dir")})}),e.jsxs("div",{className:"explorer-controls",children:[e.jsx("button",{className:"link icon-btn",title:x("refresh"),onClick:()=>v(w||""),children:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M23 4v6h-6"}),e.jsx("path",{d:"M1 20v-6h6"}),e.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})}),l&&typeof c=="function"&&e.jsx("button",{className:"link icon-btn","aria-label":x("change_root"),title:x("change_root"),onClick:async()=>{try{await Promise.resolve(c(""))}catch{}},children:e.jsx(z,{name:U("dir")})})]}),e.jsxs("div",{className:"breadcrumbs",children:[e.jsx("button",{type:"button",className:"link",onClick:()=>v(""),children:"root"}),w&&w.split("/").filter(Boolean).map((d,k,W)=>{const q=`/${W.slice(0,k+1).join("/")}`;return e.jsxs("span",{children:[" / ",e.jsx("button",{className:"link",onClick:()=>v(q),children:d})]},q)})]})]}),e.jsxs("div",{className:"explorer-body",onDrop:d=>V(d,w||""),onDragOver:d=>Q(d,w||""),onDragLeave:J,children:[$&&e.jsx("div",{className:"muted",children:x("loading")}),G&&e.jsx("div",{className:"error",children:G}),ie&&e.jsxs("div",{className:"muted",children:[x("upload"),"..."]}),!$&&!G&&e.jsxs("ul",{className:"entry-list",ref:he,children:[w&&w!=="/"&&e.jsx("li",{children:e.jsx("button",{type:"button",className:"entry",onClick:I,children:".."})},"up"),D.map(d=>e.jsx("li",{onContextMenu:k=>be(k,d),children:d.isDir?e.jsxs("button",{"data-path":d.path,type:"button",className:"entry"+(u===d.path?" selected":""),onClick:()=>{v(d.path),t(d.path,!0)},onDrop:k=>V(k,d.path),onDragOver:k=>Q(k,d.path),onDragLeave:J,children:[e.jsx("span",{className:"icon",children:e.jsx(z,{name:me("dir")||U("dir")})})," ",d.name,d.isSymlink&&e.jsx("span",{title:"Symbolic Link",style:{marginLeft:4,opacity:.5},children:"ðŸ”—"}),d.isBroken&&e.jsx("span",{title:"Broken Link",style:{marginLeft:4},children:"âŒ"}),d.isExternal&&e.jsx("span",{title:"External Link",style:{marginLeft:4},children:"â†—ï¸"}),pe===d.path?e.jsx("span",{style:{marginLeft:8,fontSize:12,color:"#888"},children:x("drop_to_upload")}):null]}):e.jsxs("div",{style:{display:"flex",gap:2,alignItems:"center"},children:[e.jsxs("button",{"data-path":d.path,type:"button",className:"entry",style:{flex:1,textAlign:"left"},onClick:()=>{if(o===!1){t(d.path,!1),a&&a("metadata");return}t(d.path,!1)},children:[e.jsx("span",{className:"icon",children:e.jsx(z,{name:yt(void 0,d.name)||me(d.name.split(".").pop()||"")||U("view")||"icon-text"})})," ",d.name,d.isSymlink&&e.jsx("span",{title:"Symbolic Link",style:{marginLeft:4,opacity:.5},children:"ðŸ”—"}),d.isBroken&&e.jsx("span",{title:"Broken Link",style:{marginLeft:4},children:"âŒ"}),d.isExternal&&e.jsx("span",{title:"External Link",style:{marginLeft:4},children:"â†—ï¸"})]}),o?null:e.jsx("button",{className:"btn",onClick:()=>a?a(d.path):t(d.path,!1),title:x("view_file"),children:e.jsx(z,{name:U("view")})})]})},d.path))]})]}),g&&e.jsx(en,{x:g.x,y:g.y,onClose:()=>M(null),items:[{label:"OPEN TEST",icon:e.jsx(z,{name:U("view")}),action:()=>{g.item.isDir?(v(g.item.path),t(g.item.path,!0)):o?t(g.item.path,!1):a?a(g.item.path):t(g.item.path,!1)}},{label:`${x("download")} ${g.item.isDir?"(Dir)":""}`,icon:e.jsx(z,{name:U("download")}),action:()=>{const d=document.createElement("a");d.href=we(`/api/file?path=${encodeURIComponent(g.item.path)}${localStorage.getItem("mlcremote_token")?`&token=${encodeURIComponent(localStorage.getItem("mlcremote_token")||"")}`:""}`),d.download=g.item.name,document.body.appendChild(d),d.click(),document.body.removeChild(d)},separator:!0},{label:x("copy_full_path"),icon:e.jsx(z,{name:U("copy")}),action:async()=>{try{await navigator.clipboard.writeText(g.item.path)}catch(d){console.error("Failed to copy",d)}}},{label:x("copy_relative_path"),icon:e.jsx(z,{name:U("link")}),action:async()=>{try{const d=g.item.path.startsWith("/")?g.item.path.slice(1):g.item.path;await navigator.clipboard.writeText(d)}catch(d){console.error("Failed to copy",d)}}},{label:x("copy_name"),icon:e.jsx(z,{name:U("text")}),action:async()=>{try{await navigator.clipboard.writeText(g.item.name)}catch(d){console.error(d)}},separator:!0},{label:x("delete"),icon:e.jsx(z,{name:U("trash")}),danger:!0,action:()=>Re(g.item.path)}]})]})}function nn({autoOpen:t,showHidden:n,onToggleAutoOpen:s,onToggleShowHidden:o,showLogs:a,onToggleLogs:f,hideMemoryUsage:c,onToggleHideMemoryUsage:l,onClose:u,onLanguageChange:m,maxEditorSize:j,onMaxFileSizeChange:S}){const{t:C,i18n:x}=te(),[w,R]=X.useState(c),D=$=>{x.changeLanguage($),m==null||m($)},b=[{code:"en",name:"English"},{code:"de",name:"Deutsch"},{code:"es",name:"EspaÃ±ol"},{code:"fr",name:"FranÃ§ais"}];return e.jsx("div",{style:{position:"absolute",right:12,top:40,zIndex:60},children:e.jsxs("div",{style:{width:320,background:"var(--bg)",border:"1px solid var(--muted)",borderRadius:6,boxShadow:"0 6px 20px rgba(0,0,0,0.12)",padding:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("strong",{children:C("settings")}),e.jsx("button",{"aria-label":C("close"),title:C("close"),onClick:u,style:{background:"transparent",border:"none",cursor:"pointer"},children:e.jsx(z,{name:U("close"),size:16})})]}),e.jsxs("div",{style:{marginTop:12},children:[e.jsx("label",{style:{fontSize:11,fontWeight:600,textTransform:"uppercase",color:"var(--text-muted)",display:"block",marginBottom:8,letterSpacing:"0.05em"},children:C("language")}),e.jsx("div",{style:{display:"flex",gap:8,marginTop:4},children:b.map($=>{const P=x.language===$.code||$.code==="en"&&!x.language,G=$.code==="en"?"gb":$.code;return e.jsx("button",{onClick:()=>D($.code),title:$.name,style:{display:"flex",alignItems:"center",justifyContent:"center",padding:6,background:P?"var(--bg-select)":"var(--bg-panel)",border:P?"1px solid var(--accent)":"1px solid var(--border)",borderRadius:6,cursor:"pointer",transition:"all 0.2s",opacity:P?1:.7},onMouseOver:O=>{P||(O.currentTarget.style.opacity="1")},onMouseOut:O=>{P||(O.currentTarget.style.opacity="0.7")},children:e.jsx(z,{name:`icon-flag-${G}`,size:24})},$.code)})})]}),e.jsx("div",{style:{marginTop:12},children:e.jsxs("label",{style:{fontSize:13},children:[e.jsx("input",{type:"checkbox",checked:t,onChange:$=>s($.target.checked)})," ",C("auto_open_files","Auto open files")]})}),e.jsx("div",{style:{marginTop:8},children:e.jsxs("label",{style:{fontSize:13},children:[e.jsx("input",{type:"checkbox",checked:n,onChange:$=>o($.target.checked)})," ",C("show_hidden_files","Show hidden files")]})}),e.jsx("div",{style:{marginTop:8},children:e.jsxs("label",{style:{fontSize:13},children:[e.jsx("input",{type:"checkbox",checked:a,onChange:$=>f($.target.checked)})," ",C("show_server_logs","Show server logs")]})}),e.jsx("div",{style:{marginTop:8},children:e.jsxs("label",{style:{fontSize:13},children:[e.jsx("input",{type:"checkbox",checked:w,onChange:$=>{R($.target.checked),l($.target.checked)}})," ",C("hide_memory_usage","Hide memory usage gauge")]})}),e.jsxs("div",{style:{marginTop:12,borderTop:"1px solid var(--border)",paddingTop:8},children:[e.jsx("strong",{style:{fontSize:12,color:"var(--text-muted)"},children:C("editor_settings","Editor Settings")}),e.jsxs("div",{style:{marginTop:6,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx("label",{style:{fontSize:13},title:C("max_file_size_tooltip","Files larger than this (MB) will open in read-only mode"),children:C("max_file_size","Max File Size (MB)")}),e.jsx("input",{type:"number",min:"0.1",step:"0.5",style:{width:60,background:"var(--bg-panel)",border:"1px solid var(--border)",color:"var(--text)",borderRadius:4,padding:"2px 4px"},value:((j||parseInt(localStorage.getItem("mlc_max_editor_size")||"1048576"))/1024/1024).toFixed(1),onChange:$=>{const P=parseFloat($.target.value);if(P>0){const G=Math.floor(P*1024*1024);localStorage.setItem("mlc_max_editor_size",G.toString()),S==null||S(G)}}})]})]})]})})}function sn(){const{t}=te(),[n,s]=r.useState(null),[o,a]=r.useState(!1),f=r.useCallback(async()=>{a(!0);try{const u=await se("/api/trash/recent");if(!u.ok)throw new Error("fetch failed");const m=await u.json();Array.isArray(m)&&m.length>0?s(m[0]):s(null)}catch(u){console.warn("Failed to fetch trash",u)}finally{a(!1)}},[]);if(r.useEffect(()=>{f();const u=setInterval(f,1e4);return()=>clearInterval(u)},[f]),o&&!n)return e.jsx("div",{className:"muted",children:t("loading_trash")});if(!n)return e.jsx("div",{className:"muted",children:t("trash_empty")});const c=n.originalPath.split("/").pop()||n.originalPath,l=yt(void 0,c)||me(c.split(".").pop()||"")||"icon-trash";return e.jsxs("div",{style:{padding:12},children:[e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx(z,{name:l,size:20}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("div",{style:{fontWeight:600},children:c}),e.jsx("div",{className:"muted",style:{fontSize:12},children:new Date(n.deletedAt).toLocaleString()})]})]}),e.jsxs("div",{style:{marginTop:12},children:[e.jsxs("div",{className:"muted",children:[t("original_path"),": ",n.originalPath]}),e.jsxs("div",{className:"muted",children:[t("trash_path"),": ",n.trashPath]})]}),e.jsxs("div",{style:{marginTop:12},children:[e.jsx("button",{className:"btn",disabled:!0,children:t("undo_coming")}),(()=>{const u=qe(),m=`/api/file?path=${encodeURIComponent(n.trashPath)}`+(u?`&token=${encodeURIComponent(u)}`:"");return e.jsx("a",{className:"btn",style:{marginLeft:8},href:m,download:c,children:t("download")})})()]})]})}function ce(t){if(!t||t<=0)return"0 B";const n=1024,s=n*1024,o=s*1024;return t>=o?`${(t/o).toFixed(2)} GB`:t>=s?`${(t/s).toFixed(2)} MB`:t>=n?`${(t/n).toFixed(2)} KB`:`${t} B`}const on=new Set(["txt","md","markdown","yaml","yml","json","js","ts","jsx","tsx","html","css","env","ini","cfg","conf","csh","gitignore","dockerfile","sql"]),rn=new Set(["zip","gz","tar","rar","exe","dll","so","bin","jpg","jpeg","png","gif","webp","pdf"]);function Ke(t){const n=t.split("/"),s=n[n.length-1]||"",o=s.lastIndexOf(".");return o===-1?"":s.slice(o+1).toLowerCase()}function _t(t){const n=Ke(t);return!n||on.has(n)?!0:!rn.has(n)}async function an(t){if(!t)return{mime:"application/octet-stream",isText:!1,ext:""};try{const n=`?path=${encodeURIComponent(t)}`,s=await se(`/api/filetype${n}`);if(!s.ok)throw new Error("probe failed");return await s.json()}catch{const s=Ke(t);return{mime:"application/octet-stream",isText:_t(t),ext:s}}}function ln(t){if(!t)return null;const n=t.split("/"),o=(n[n.length-1]||"").toLowerCase();return o===".bashrc"||o==="bashrc"||o===".bash_profile"||o===".profile"?"bashrc":o===".zshrc"||o==="zshrc"?"zshrc":o===".bash_history"||o==="bash_history"?"bash_history":o==="makefile"?"makefile":o==="dockerfile"?"dockerfile":o==="nginx.conf"||o==="nginx.conf.default"?"conf":null}function cn(t){const n=Ve.languages;switch(t){case"jsx":return n.jsx;case"tsx":return n.tsx;case"java":return n.java;case"ini":case"gitconfig":case"editorconfig":case"conf":case"config":return n.ini;case"js":return n.javascript;case"ts":return n.typescript;case"go":return n.go;case"php":return n.php;case"json":return n.json;case"yaml":case"yml":return n.yaml;case"toml":return n.toml||n.markup;case"md":case"markdown":return n.markdown;case"c":case"h":return n.c;case"cpp":case"hpp":return n.cpp;case"py":return n.python;case"makefile":return n.makefile;case"bashrc":case"zshrc":case"bash_history":case"profile":return n.bash;case"sh":case"bash":return n.bash;case"xml":case"xml-doc":return n["xml-doc"];case"html":case"htm":return n.markup;case"css":case"sass":case"scss":return n.sass;case"sql":return n.sql;default:return n.javascript}}function ke(t){switch(t){case"js":case"jsx":return"javascript";case"ts":case"tsx":return"typescript";case"go":return"go";case"php":return"php";case"json":return"json";case"yaml":case"yml":return"yaml";case"toml":return"toml";case"ini":case"gitconfig":case"editorconfig":case"conf":case"config":return"ini";case"md":case"markdown":return"markdown";case"c":case"h":return"c";case"cpp":case"cxx":case"c++":case"hpp":return"cpp";case"py":return"python";case"makefile":return"makefile";case"dockerfile":return"dockerfile";case"sh":case"bash":case"csh":return"bash";case"bashrc":case"zshrc":case"bash_history":case"profile":return"bash";case"xml":case"xml-doc":return"xml-doc";case"html":case"htm":return"markup";case"sass":case"scss":return"sass";case"sql":return"sql";case"less":case"css":return"css";default:return"text"}}function ut(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function dn(t,n){try{const s=cn(n),o=ke(n);return s?Ve.highlight(t,s,o):ut(t)}catch(s){return console.warn("Prism highlight failed",s),ut(t)}}function un({content:t,setContent:n,origContent:s,ext:o,alias:a,textareaId:f}){const{t:c}=te(),l=r.useRef(null),u=r.useRef(null);return r.useEffect(()=>{var j;const m=a||ke(o);u.current&&u.current.setAttribute("data-grammar",m),l.current&&l.current.setAttribute("data-grammar",m);try{const S=(j=u.current)==null?void 0:j.querySelector("code");S&&Ve.highlightElement(S)}catch{}},[a,t,o]),r.useEffect(()=>{l.current&&u.current&&(u.current.scrollTop=l.current.scrollTop,u.current.scrollLeft=l.current.scrollLeft)},[t]),e.jsxs("div",{className:"editor-edit-area",children:[e.jsx("pre",{"aria-hidden":!0,className:`highlight-wrap language-${a||ke(o)}`,"data-grammar":a||ke(o),ref:m=>{u.current=m},children:e.jsx("code",{className:`language-${a||ke(o)}`,dangerouslySetInnerHTML:{__html:dn(t||"",o)}})}),e.jsx("textarea",{ref:l,className:"textarea",wrap:"off",value:t,name:f||"editor",id:f,"data-grammar":a,onChange:m=>n(m.target.value),onScroll:()=>{l.current&&u.current&&(u.current.scrollTop=l.current.scrollTop,u.current.scrollLeft=l.current.scrollLeft)},placeholder:c("open_or_create_file"),spellCheck:!1,autoCorrect:"off",autoCapitalize:"off",autoComplete:"off"})]})}function hn({path:t,onDimensions:n}){const{t:s}=te(),o=qe(),a=we(`/api/file?path=${encodeURIComponent(t)}${o?`&token=${encodeURIComponent(o)}`:""}`),[f,c]=r.useState(null),l=r.useRef(null);return e.jsxs("div",{style:{marginTop:8},children:[e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",overflow:"hidden"},children:e.jsx("img",{ref:l,src:a,alt:t.split("/").pop(),style:{maxWidth:"100%",maxHeight:"80vh",objectFit:"contain",borderRadius:6,boxShadow:"0 2px 8px rgba(0,0,0,0.4)"},onLoad:()=>{try{const u=l.current;if(u&&u.naturalWidth&&u.naturalHeight){c({w:u.naturalWidth,h:u.naturalHeight});try{n&&n(u.naturalWidth,u.naturalHeight)}catch{}}}catch{}}})}),e.jsxs("div",{style:{marginTop:8,display:"flex",gap:8,alignItems:"center"},children:[e.jsx("a",{className:"link",href:a,download:t.split("/").pop(),children:s("download")}),f?e.jsxs("span",{className:"muted",style:{marginLeft:8},children:[f.w," Ã— ",f.h]}):null]})]})}const fn=r.lazy(()=>ze(()=>import("./PdfPreview-D_VfPOpD.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url));function mn({path:t}){const{t:n}=te();return e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"muted",children:n("loading_pdf")}),children:e.jsx(fn,{path:t})})}const pn=r.lazy(()=>ze(()=>import("./ShellView-Cc6iVa1x.js"),__vite__mapDeps([10,1,2,3,4,11,6,7,5,8,9]),import.meta.url)),gn={name:"Shell",priority:100,matches:t=>!!(t.path&&t.path.startsWith("shell-")),view:({path:t})=>e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"muted",children:"Loading shellâ€¦"}),children:e.jsx(pn,{path:t})}),isEditable:!1},xn={name:"Directory",priority:90,matches:t=>!!(t.meta&&t.meta.isDir),view:({path:t,origContent:n})=>e.jsxs("div",{style:{padding:12},children:[e.jsxs("div",{style:{fontWeight:600},children:["Directory: ",t]}),e.jsxs("div",{className:"muted",style:{marginTop:6},children:[n?n.split(`
`).length:"0"," entries"]}),e.jsx("pre",{style:{marginTop:8,maxHeight:240,overflow:"auto",padding:8,background:"var(--panel)"},children:n})]}),isEditable:!1},yn={name:"PDF",priority:80,matches:t=>t.probe&&t.probe.mime==="application/pdf"||!!t.path&&t.path.toLowerCase().endsWith(".pdf"),view:({path:t})=>e.jsx(mn,{path:t}),isEditable:!1},_n={name:"Image",priority:70,matches:t=>{if(t.probe&&t.probe.mime&&t.probe.mime.startsWith("image/"))return!0;if(t.path){const n=t.path.toLowerCase();return n.endsWith(".png")||n.endsWith(".jpg")||n.endsWith(".jpeg")||n.endsWith(".gif")||n.endsWith(".svg")||n.endsWith(".webp")}return!1},view:({path:t,onDimensions:n})=>e.jsx(hn,{path:t,onDimensions:n}),isEditable:!1},vn={name:"Text",priority:50,matches:t=>t.probe&&t.probe.isText?!0:t.probe&&!t.probe.isText?!1:!!(t.path&&_t(t.path)),view:({content:t,setContent:n,origContent:s,ext:o,alias:a,textareaId:f})=>e.jsx(un,{content:t||"",setContent:n||(()=>{}),origContent:s||"",ext:o||"",alias:a,textareaId:f||"editor"}),isEditable:!0},wn={name:"Binary",priority:10,matches:t=>!!(t.probe&&!t.probe.isText),view:({path:t})=>e.jsxs("div",{style:{marginTop:8,display:"flex",gap:8},children:[e.jsx("a",{className:"link",href:we(`/api/file?path=${encodeURIComponent(t)}`),download:t.split("/").pop(),children:"Download"}),e.jsx("span",{className:"muted",children:"(Binary or unsupported file type)"})]}),isEditable:!1},vt={name:"Unsupported",priority:0,matches:()=>!0,view:({path:t})=>e.jsxs("div",{style:{padding:12},className:"muted",children:["Unsupported file type: ",t]}),isEditable:!1},bn=[gn,xn,yn,_n,vn,wn,vt].sort((t,n)=>n.priority-t.priority);function We(t){for(const n of bn)if(n.matches(t))return n;return vt}function jn(t){return t.charCodeAt(0)===65279?{text:t.slice(1),hasBOM:!0}:{text:t,hasBOM:!1}}function $n(t){return"\uFEFF"+t}function Sn({path:t,onSaved:n,settings:s,reloadTrigger:o,onUnsavedChange:a,onMeta:f}){const{t:c}=te(),[l,u]=r.useState(""),[m,j]=r.useState(""),[S,C]=r.useState(!1),[x,w]=r.useState(""),[R,D]=r.useState(!1),[b,$]=r.useState(null),[P,G]=r.useState(!1),[O,pe]=r.useState(null),[oe,ie]=r.useState(null),[de,g]=r.useState(null),[M,v]=r.useState(null),[H,I]=r.useState(!1),N=r.useRef(null),V=r.useRef(null),Q=r.useRef(null),J=We({path:t,meta:b,probe:O}),he=J.view,Z=r.useCallback(async(E=!1)=>{if(t){D(!0),w("");try{const T=await fe(t);if($(T),typeof f=="function"&&f(T),!E&&de&&M&&T.modTime!==M&&!confirm(c("confirm_reload_external","File has been modified externally. Reload?"))){D(!1);return}v(T.modTime);const ne=await an(t);pe(ne);const ue=We({path:t,meta:T,probe:ne});if(T.isDir){u(""),D(!1);return}if(ue.name==="Text"){const _e=await Kt(t),{text:je,hasBOM:$e}=jn(_e);u(je),j(je),C($e),g(Date.now()),I(!1)}else u(""),D(!1)}catch{O&&O.isText&&(w(c("failed_to_load","Failed to load")),I(!0)),g(null)}finally{D(!1)}}},[t,c]),be=(()=>{try{const E=localStorage.getItem("mlc_max_editor_size");if(E)return parseInt(E,10)}catch{}return 1024*1024})(),d=async(E,T=64*1024)=>{if(t){G(!0);try{const ne=`?path=${encodeURIComponent(t)}&offset=${E}&length=${T}`,ue=await se(`/api/file/section${ne}`);if(!ue.ok)throw new Error("section fetch failed");const _e=await ue.text();u(_e),j(_e)}catch{w(c("failed_to_load_section","Failed to load section"))}finally{G(!1)}}},W=ln(t)||O&&O.ext||Ke(t),q=void 0,ee=O&&O.ext?O.ext:"text",ae=(E=>E?"editor-"+E.replace(/[^a-z0-9_-]/gi,"-").replace(/-+/g,"-"):"editor")(t||"");r.useEffect(()=>{Z()},[Z]),r.useEffect(()=>{let E=!0;return(async()=>{if(!(!b||!b.isDir||!t))try{const T=await gt(t);if(!E)return;u(""),j(T.map(ne=>ne.name).join(`
`))}catch{}})(),()=>{E=!1}},[b,t]),r.useEffect(()=>{o&&o>0&&Z(!0)},[o,Z]),r.useEffect(()=>{N.current&&V.current&&(V.current.scrollTop=N.current.scrollTop,V.current.scrollLeft=N.current.scrollLeft)},[l]),r.useEffect(()=>{if(N.current&&V.current){const E=window.getComputedStyle(V.current),T=E.lineHeight,ne=E.paddingTop,ue=E.paddingBottom;T&&(N.current.style.lineHeight=T),ne&&(N.current.style.paddingTop=ne),ue&&(N.current.style.paddingBottom=ue)}},[l,t]),r.useEffect(()=>{var E;V.current&&V.current.setAttribute("data-grammar",ee),N.current&&(N.current.setAttribute("data-grammar",ee),ae&&(N.current.id=ae));try{const T=(E=V.current)==null?void 0:E.querySelector("code");T&&Prism.highlightElement(T)}catch{}},[ee,l,ae]),r.useEffect(()=>{if(!a||!J.isEditable)return;const E=l!==m;if(Q.current===null||Q.current!==E){try{a(t,E)}catch(T){console.warn("onUnsavedChange threw",T)}Q.current=E}},[l,m,a,t,J.isEditable]);const xe=async()=>{if(t){w(c("saving","Saving..."));try{const E=S?$n(l):l;await Gt(t,E),w(c("saved","Saved")),setTimeout(()=>w(T=>T===c("saved","Saved")?"":T),1500),await Z(!0),n&&n()}catch{w(c("save_failed","Save failed"))}}},De=async()=>{if(t&&!(l!==m&&!confirm(c("confirm_reload_unsaved","You have unsaved changes. Reloading will discard them. Continue?")))){w(c("reloading","Reloading..."));try{await Z(!0),w(c("reloaded","Reloaded")),setTimeout(()=>w(E=>E===c("reloaded","Reloaded")?"":E),1500)}catch{w(c("reload_failed","Reload failed"))}}};return r.useEffect(()=>{const E=T=>{(T.ctrlKey||T.metaKey)&&T.key==="s"&&(T.preventDefault(),xe())};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[xe]),e.jsxs("div",{className:"editor",children:[e.jsxs("div",{className:"editor-header",children:[e.jsx("strong",{children:c("editor")}),e.jsxs("div",{style:{display:"flex",flexDirection:"column"},children:[e.jsx("span",{className:"muted",children:b&&b.absPath?b.absPath:t||c("select_or_create")}),b&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"muted",style:{fontSize:11},children:[b.isDir?"directory":J.name,"Â· ",b.mode," Â· ",new Date(b.modTime).toLocaleString()," ",b.size?`Â· ${ce(b.size)}`:""]}),oe&&J.name==="Image"?e.jsxs("span",{style:{fontSize:11,marginLeft:8},className:"muted",children:[oe.w," Ã— ",oe.h]}):null]})]}),e.jsxs("div",{className:"actions",children:[e.jsx("button",{className:"link icon-btn",title:c("refresh"),"aria-label":c("refresh"),onClick:De,disabled:!t,children:e.jsx(z,{name:me("refresh")||"icon-refresh",title:c("refresh"),size:16})}),J.isEditable&&l!==m&&e.jsx("button",{className:"link icon-btn",title:c("save"),"aria-label":c("save"),onClick:xe,disabled:!t,children:e.jsx(z,{name:me("upload")||"icon-upload",title:c("save"),size:16})})]}),b&&b.size&&b.size>be&&J.isEditable?e.jsxs("div",{style:{marginLeft:12},children:[e.jsx("div",{className:"muted",style:{fontSize:12},children:c("file_too_large","File is large ({{size}}). Full edit disabled.",{size:ce(b.size)})}),e.jsxs("div",{style:{marginTop:6,display:"flex",gap:8},children:[e.jsx("button",{className:"btn",onClick:()=>d(0,64*1024),children:c("view_head","View head")}),e.jsx("button",{className:"btn",onClick:()=>d(Math.max(0,(b.size||0)-64*1024),64*1024),children:c("view_tail","View tail")})]}),P&&e.jsx("div",{className:"muted",children:c("loading_section","Loading section...")})]}):null,x&&e.jsx("div",{className:"muted",children:x})]}),e.jsx("div",{className:"editor-body",children:R?e.jsx("div",{className:"muted",children:c("loading")}):e.jsx(he,{path:t,content:l,setContent:u,origContent:m,ext:W,alias:q,textareaId:ae,onDimensions:(E,T)=>ie({w:E,h:T})})})]})}function kn({path:t}){const{t:n}=te(),[s,o]=r.useState(null),[a,f]=r.useState(null);return r.useEffect(()=>{let c=!0;return(async()=>{if(!t){o(null);return}try{const l=await fe(t);if(!c)return;o(l),f(null)}catch(l){if(!c)return;f((l==null?void 0:l.message)||n("failed_fetch_metadata")),o(null)}})(),()=>{c=!1}},[t,n]),t?e.jsxs("div",{style:{padding:12},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600},children:t.split("/").pop()}),e.jsx("div",{className:"muted",style:{fontSize:12},children:t})]}),e.jsx("div",{children:e.jsx("a",{className:"link",href:`/api/file?path=${encodeURIComponent(t)}`,download:t.split("/").pop(),children:n("download")})})]}),e.jsxs("div",{style:{marginTop:12},children:[a?e.jsx("div",{className:"error",children:a}):null,s?e.jsx("table",{style:{width:"100%",borderCollapse:"collapse"},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{width:160,padding:6},className:"muted",children:n("full_path")}),e.jsx("td",{style:{padding:6},children:s.path||t})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"muted",style:{padding:6},children:n("mime")}),e.jsx("td",{style:{padding:6},children:s.mime||"unknown"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"muted",style:{padding:6},children:n("size")}),e.jsx("td",{style:{padding:6},children:s.size?ce(s.size):"n/a"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"muted",style:{padding:6},children:n("mode")}),e.jsx("td",{style:{padding:6},children:s.mode||"n/a"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"muted",style:{padding:6},children:n("last_modified")}),e.jsx("td",{style:{padding:6},children:s.modTime?new Date(s.modTime).toLocaleString():"n/a"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"muted",style:{padding:6},children:n("is_dir")}),e.jsx("td",{style:{padding:6},children:s.isDir?n("yes"):n("no")})]})]})}):e.jsx("div",{className:"muted",children:n("loading_metadata")})]})]}):e.jsx("div",{style:{padding:12},className:"muted",children:n("no_file_selected")})}function En({path:t}){const{t:n}=te(),[s,o]=r.useState(null),[a,f]=r.useState(null);return r.useEffect(()=>{let c=!0;return(async()=>{if(!t){o(null);return}try{const l=await fe(t);if(!c)return;o(l),f(null)}catch(l){if(!c)return;f((l==null?void 0:l.message)||n("failed_fetch_metadata")),o(null)}})(),()=>{c=!1}},[t,n]),t?e.jsxs("div",{style:{padding:24,maxWidth:600,margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16,marginBottom:32},children:[e.jsx("div",{style:{fontSize:48,opacity:.8},children:e.jsx(z,{name:me(t.split(".").pop()||"")||"icon-file",size:48})}),e.jsx("div",{style:{textAlign:"center"},children:e.jsx("h2",{style:{margin:0,wordBreak:"break-all"},children:t.split("/").pop()})}),e.jsx("div",{style:{display:"flex",gap:12},children:e.jsxs("a",{className:"btn primary",href:we(`/api/file?path=${encodeURIComponent(t)}`),download:t.split("/").pop(),children:[e.jsx("span",{style:{marginRight:6,display:"inline-flex"},children:e.jsx(z,{name:"icon-download",size:16})}),n("download")]})})]}),e.jsxs("div",{className:"panel",style:{padding:16,borderRadius:8,background:"var(--bg-subtle)"},children:[e.jsx("h3",{style:{marginTop:0,marginBottom:16,borderBottom:"1px solid var(--border)",paddingBottom:8},children:n("properties","Properties")}),a?e.jsx("div",{className:"error",children:a}):null,s?e.jsx("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:13},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{width:120,padding:"8px 0",color:"var(--text-muted)"},children:n("path","Path")}),e.jsx("td",{style:{padding:"8px 0",wordBreak:"break-all"},children:t})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{width:120,padding:"8px 0",color:"var(--text-muted)"},children:n("type")}),e.jsx("td",{style:{padding:"8px 0"},children:s.mime||"unknown"})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"8px 0",color:"var(--text-muted)"},children:n("size")}),e.jsx("td",{style:{padding:"8px 0"},children:s.size?ce(s.size):"0 B"})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"8px 0",color:"var(--text-muted)"},children:n("mode")}),e.jsx("td",{style:{padding:"8px 0"},children:e.jsx("span",{style:{fontFamily:"monospace",background:"var(--bg)",padding:"2px 4px",borderRadius:4},children:s.mode||"n/a"})})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"8px 0",color:"var(--text-muted)"},children:n("last_modified")}),e.jsx("td",{style:{padding:"8px 0"},children:s.modTime?new Date(s.modTime).toLocaleString():"n/a"})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"8px 0",color:"var(--text-muted)"},children:n("is_dir")}),e.jsx("td",{style:{padding:"8px 0"},children:s.isDir?n("yes"):n("no")})]})]})}):e.jsxs("div",{className:"muted",children:[n("loading"),"..."]})]})]}):e.jsx("div",{style:{padding:24,textAlign:"center"},className:"muted",children:n("no_file_selected")})}function Ln({openFiles:t,active:n,onActivate:s,onClose:o,onCloseOthers:a,onCloseLeft:f,titles:c,fullPaths:l,types:u,evictedTabs:m=[],onRestoreEvicted:j}){const{t:S}=te(),[C,x]=r.useState(null),w=r.useRef(null),R=r.useRef(null),[D,b]=r.useState(!1),[$,P]=r.useState(!1),[G,O]=r.useState(!1),[pe,oe]=r.useState(null),ie=()=>{const g=R.current;if(!g){b(!1),P(!1);return}b(g.scrollLeft>0),P(g.scrollWidth>g.clientWidth+g.scrollLeft+1)},de=g=>{const M=R.current;M&&(M.scrollBy({left:g,behavior:"smooth"}),setTimeout(ie,220))};return r.useEffect(()=>{function g(v){w.current&&(v.target instanceof Node&&w.current.contains(v.target)||x(null))}function M(v){v.key==="Escape"&&x(null)}return document.addEventListener("click",g),document.addEventListener("keydown",M),()=>{document.removeEventListener("click",g),document.removeEventListener("keydown",M)}},[]),r.useEffect(()=>{ie();function g(){ie()}window.addEventListener("resize",g);function M(){const v=R.current,H=140;if(!v){oe(null);return}const I=v.clientWidth,N=Math.max(1,Math.floor(I/H));oe(N)}return window.addEventListener("resize",M),M(),()=>{window.removeEventListener("resize",g),window.removeEventListener("resize",M)}},[t]),e.jsxs("div",{className:"tabbar",ref:w,children:[(()=>{const M=R.current?R.current.clientWidth:600,v=pe??Math.max(1,Math.floor(M/140)),H=t.length>v?t.slice(0,t.length-v):[];return H.length===0?null:e.jsxs("div",{className:"tab-evicted-dropdown",style:{display:"flex",alignItems:"center",marginRight:8,position:"relative"},children:[e.jsx("button",{className:"btn",onClick:()=>O(I=>!I),children:"â‹¯"}),G&&e.jsx("div",{style:{position:"absolute",left:0,top:"100%",background:"var(--bg)",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",padding:8,zIndex:50},children:H.map(I=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,padding:"4px 8px"},children:[e.jsx("button",{className:"link",onClick:()=>{j&&j(I),O(!1)},style:{flex:1,textAlign:"left"},children:c&&c[I]||I.split("/").pop()}),e.jsxs("div",{style:{display:"flex",gap:6},children:[e.jsx("button",{className:"btn btn-small",title:S("restore"),onClick:()=>{j&&j(I),O(!1)},children:"â†º"}),e.jsx("button",{className:"btn btn-small",title:S("close"),onClick:()=>{o&&o(I),O(!1)},children:"âœ•"}),e.jsx("button",{className:"btn btn-small",title:S("close_others"),onClick:()=>{H.filter(N=>N!==I).forEach(N=>o&&o(N)),O(!1)},children:"â‹¯"})]})]},I))})]})})(),D&&e.jsx("button",{className:"tab-scroll tab-scroll-left","aria-label":S("scroll_left"),onClick:()=>de(-200),children:"â—€"}),e.jsx("div",{className:"tab-scroll-area",ref:R,onScroll:ie,children:t.map((g,M)=>e.jsx("div",{className:"tab-item",style:{display:"flex",alignItems:"center",gap:8,padding:"4px 8px"},children:e.jsxs("button",{className:g===n?"btn":"link",onClick:()=>s(g),onContextMenu:v=>{v.preventDefault(),x(M)},style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{className:"tab-icon",children:(()=>{if((u&&u[g])==="shell")return e.jsx(z,{name:U("terminal")});if((u&&u[g])==="dir")return e.jsx(z,{name:U("folder")});const v=(g.split(".").pop()||"").toLowerCase(),H=me(v);return e.jsx(z,{name:H})})()},`${(u==null?void 0:u[g])||"file"}-${g}`),(()=>{const v=c&&c[g]||g.split("/").pop()||g,H=v.length>10?v.slice(0,10)+"â€¦":v,I=c&&c[g]&&c[g].startsWith("*")?"tab-title tab-unsaved":"tab-title";return e.jsx("span",{title:(l==null?void 0:l[g])||v,className:I,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:120},children:H})})()]})},g))}),C!==null&&(()=>{const g=t[C];if(!g)return null;const M=w.current,v=R.current;let H={position:"absolute",right:8,top:40,padding:8,display:"flex",flexDirection:"column",gap:6};try{const I=v==null?void 0:v.querySelectorAll(".tab-item"),N=I?I[C]:null;if(N&&M){const V=M.getBoundingClientRect(),Q=N.getBoundingClientRect();H={position:"absolute",left:Q.left-V.left,top:Q.bottom-V.top+6,padding:8,display:"flex",flexDirection:"column",gap:6}}}catch{}return e.jsxs("div",{className:"dropdown",style:H,children:[e.jsx("button",{ref:I=>{I&&I.focus()},className:"link",onClick:()=>{o==null||o(g),x(null)},children:S("close")}),e.jsx("button",{className:"link",onClick:()=>{a==null||a(g),x(null)},children:S("close_others")}),e.jsx("button",{className:"link",onClick:()=>{f==null||f(g),x(null)},children:S("close_left")})]})})(),$&&e.jsx("button",{className:"tab-scroll tab-scroll-right","aria-label":S("scroll_right"),onClick:()=>de(200),children:"â–¶"})]})}function Cn({visible:t=!0,onClose:n}){const{t:s}=te(),[,o]=r.useState(0);if(r.useEffect(()=>Ut(()=>o(l=>l+1)),[]),!t)return null;const a=At().slice(0,100);function f(c){const l=[],u=/([\w\/\.\-]+:\d+)/g;let m=0,j;for(;(j=u.exec(c))!==null;)j.index>m&&l.push({text:c.slice(m,j.index)}),l.push({text:j[0],cls:"log-path"}),m=j.index+j[0].length;return m<c.length&&l.push({text:c.slice(m)}),l.map((S,C)=>S.cls?e.jsx("span",{className:S.cls,children:S.text},C):e.jsx("span",{children:S.text},C))}return e.jsxs("div",{className:"log-overlay",children:[e.jsxs("div",{className:"log-header",children:[e.jsx("strong",{children:s("logs")}),e.jsxs("div",{children:[e.jsx("button",{className:"btn",onClick:()=>Ht(),children:s("clear")}),e.jsx("button",{className:"btn",onClick:()=>n&&n(),style:{marginLeft:8},children:s("close")})]})]}),e.jsx("div",{children:a.map((c,l)=>e.jsxs("div",{className:`log-entry log-level-${(c.level||"").toLowerCase()}`,children:[e.jsxs("div",{className:"log-meta",children:[c.ts," ",e.jsx("span",{className:"log-level",children:c.level})]}),e.jsx("div",{className:"log-message",children:f(c.msg)})]},l))})]})}async function Nn(t,n="mlcremote-screenshot.png"){const s=await Mt(t,{backgroundColor:null,scale:2});return new Promise(o=>{s.toBlob(a=>{if(!a){o();return}const f=URL.createObjectURL(a),c=document.createElement("a");c.href=f,c.download=n,document.body.appendChild(c),c.click(),c.remove(),URL.revokeObjectURL(f),o()},"image/png")})}class Tn{constructor(n=""){lt(this,"prefix");this.prefix=n}key(n){return`${this.prefix}${n}`}get(n,s,o=null){try{const a=localStorage.getItem(this.key(n)),f=s.read(a);return f===null?o:f}catch{return o}}getOrDefault(n,s,o){const a=this.get(n,s,null);return a===null?o:a}set(n,s,o){try{localStorage.setItem(this.key(n),o.write(s))}catch{}}remove(n){try{localStorage.removeItem(this.key(n))}catch{}}}const ht={read:t=>t===null?null:t,write:t=>String(t)},ft={read:t=>t===null?null:t==="1"||t==="true",write:t=>t?"1":"0"},Te=new Tn("mlc:");function zn({title:t,message:n,onClose:s}){const{t:o}=te();return r.useEffect(()=>{const a=f=>{f.key==="Escape"&&s()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[s]),e.jsx("div",{className:"login-overlay",onClick:s,children:e.jsxs("div",{className:"login-box",onClick:a=>a.stopPropagation(),style:{minWidth:350,maxWidth:500},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[e.jsx("h3",{style:{margin:0,fontSize:18},children:t}),e.jsx("button",{className:"link icon-btn",onClick:s,"aria-label":o("close"),children:e.jsx(z,{name:U("close"),size:16})})]}),e.jsx("div",{style:{marginBottom:24,fontSize:14,lineHeight:"1.5",color:"var(--text-muted)"},children:n}),e.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:e.jsx("button",{className:"btn",onClick:s,children:o("close")})})]})})}function Rn({health:t,isOnline:n,hideMemoryUsage:s,lastHealthAt:o}){const{t:a}=te(),[f,c]=r.useState(new Date);return r.useEffect(()=>{const l=window.setInterval(()=>c(new Date),1e3);return()=>window.clearInterval(l)},[]),e.jsxs("div",{className:"status-bar",style:{height:24,background:"var(--bg-alt)",borderTop:"1px solid var(--border)",display:"flex",alignItems:"center",padding:"0 8px",fontSize:12,color:"var(--text-muted)",justifyContent:"space-between",userSelect:"none"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},title:o?`${a("last_checked","Last checked")}: ${new Date(o).toLocaleTimeString()}`:"",children:[e.jsx("span",{style:{width:8,height:8,borderRadius:4,background:t&&t.host?"#10b981":n?"#f59e0b":"#ef4444"}}),e.jsx("span",{children:t&&t.host?t.host:n?a("connecting"):a("offline","Offline")})]}),e.jsxs("span",{className:n?"ok":"err",title:a(n?"status_connected":"disconnected"),children:[e.jsx(z,{name:"icon-circle-filled",size:10})," ",n?a("online","Online"):a("offline","Offline")]}),t&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"sep"}),e.jsxs("span",{title:`PID: ${t.pid}`,children:["Host: ",t.host||"localhost"]}),t.os&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"sep"}),e.jsx("span",{title:`OS: ${t.os} ${t.distro||""}`,children:t.distro||t.os})]}),e.jsx("span",{className:"sep"}),e.jsx("span",{title:a("server_time","Server Time"),children:t.server_time?new Date(t.server_time).toLocaleTimeString():""})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:16},children:[!s&&t&&t.sys_mem_total_bytes?(()=>{const l=t.sys_mem_total_bytes||1,u=t.sys_mem_free_bytes||0,m=l-u,j=Math.round(m/l*100);return e.jsx("div",{style:{display:"flex",alignItems:"center",gap:6},title:`System Memory: ${ce(m)} / ${ce(l)} (${j}%)`,children:e.jsxs("div",{style:{width:32,height:14,background:"var(--bg-panel)",border:"1px solid var(--border)",borderRadius:3,position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{width:`${j}%`,height:"100%",background:j>85?"#ef4444":j>60?"#f59e0b":"#3b82f6",transition:"width 0.5s ease"}}),e.jsxs("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",fontSize:9,fontWeight:700,color:"var(--text)",textShadow:"0 0 2px var(--bg)"},children:[j,"%"]})]})})})():null,e.jsx("div",{title:f.toLocaleDateString(),children:new Intl.DateTimeFormat(void 0,{hour:"numeric",minute:"numeric",second:"numeric"}).format(f)})]})]})}function Dn({direction:t="vertical",initialSize:n=50,minSize:s=10,onResize:o,children:a,className:f}){const[c,l]=X.useState(n);X.useEffect(()=>{l(n)},[n]);const u=X.useRef(null),m=X.useRef(!1),j=X.useRef(n),S=t==="vertical",C=R=>{R.preventDefault(),m.current=!0,j.current=c,document.addEventListener("mousemove",x),document.addEventListener("mouseup",w),document.body.style.cursor=S?"col-resize":"row-resize",document.body.style.userSelect="none";const D=document.createElement("div");D.id="split-drag-overlay",D.style.position="fixed",D.style.top="0",D.style.left="0",D.style.width="100%",D.style.height="100%",D.style.zIndex="9999",D.style.cursor=S?"col-resize":"row-resize",document.body.appendChild(D)},x=R=>{if(!m.current||!u.current)return;const D=u.current.getBoundingClientRect();let b=0;S?b=(R.clientX-D.left)/D.width*100:b=(R.clientY-D.top)/D.height*100,b=Math.max(s,Math.min(100-s,b)),l(b),j.current=b},w=()=>{m.current=!1,document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",w),document.body.style.cursor="",document.body.style.userSelect="";const R=document.getElementById("split-drag-overlay");R&&R.remove(),o&&o(j.current)};return e.jsxs("div",{ref:u,className:`split-pane-container ${t} ${f||""}`,style:{display:"flex",flexDirection:S?"row":"column",width:"100%",height:"100%",overflow:"hidden"},children:[e.jsx("div",{style:{flexBasis:`${c}%`,flexGrow:0,flexShrink:0,overflow:"hidden",position:"relative"},children:a[0]}),e.jsx("div",{className:"split-resizer",style:{flexBasis:"4px",cursor:S?"col-resize":"row-resize",background:"var(--border-color, #444)",zIndex:100,transition:"background 0.2s",position:"relative",alignSelf:"stretch"},onMouseDown:C,children:e.jsx("div",{style:{position:"absolute",top:S?0:-4,bottom:S?0:-4,left:S?-4:0,right:S?-4:0,zIndex:10}})}),e.jsx("div",{style:{flex:1,overflow:"hidden",position:"relative"},children:a[1]})]})}const In=r.lazy(()=>ze(()=>import("./TerminalTab-DFvuj4VI.js"),__vite__mapDeps([11,1,2,3,4,6,7,5,8,9]),import.meta.url));function Mn(){var rt,it;const{t,i18n:n}=te(),{health:s,isOnline:o,lastHealthAt:a,refreshHealth:f,login:c,setToken:l,logout:u,showLogin:m,setShowLogin:j,showTokenInput:S,setShowTokenInput:C,showAuthChooser:x,setShowAuthChooser:w}=Zt(),[R,D]=r.useState(0),b=r.useRef(null);r.useEffect(()=>{!b.current&&s&&D(Date.now()),b.current=s},[s]);const[$,P]=r.useState(""),[G,O]=r.useState(""),pe=r.useCallback(i=>O(i),[]),[oe,ie]=r.useState(0),[de,g]=r.useState(!0),[M,v]=r.useState({root:{id:"root",files:[],activeFile:null}}),[H,I]=r.useState({type:"leaf",paneId:"root"}),[N,V]=r.useState("root"),Q=((rt=M[N])==null?void 0:rt.files)||[],J=((it=M[N])==null?void 0:it.activeFile)||"",he=i=>{v(p=>{const h=p[N];if(!h)return p;const L=i(h.files);return{...p,[N]:{...h,files:L}}})},Z=i=>{v(p=>{const h=p[N];return h?{...p,[N]:{...h,activeFile:i}}:p})},[Re,be]=r.useState([]),[d,k]=r.useState(null),[W,q]=r.useState(!0),ee=i=>{q(i),ye({autoOpen:i}).catch(console.error)},ge=8;function ae(i){he(p=>{if(p.includes(i))return p;const h=[...p,i];if(h.length<=ge)return h;const L=h[0];try{be(y=>y.includes(L)?y:[...y,L])}catch{}return h.slice(1)}),Z(i),fe(i).then(p=>{nt(h=>({...h,[i]:p}))}).catch(()=>{})}const[xe,De]=r.useState({}),[E,T]=r.useState(!1),ne=i=>{T(i),ye({showHidden:i}).catch(console.error)},[ue,_e]=r.useState(!1),[je,$e]=r.useState(!1),[wt,Ie]=r.useState(!1),[bt,Ge]=r.useState(!1),[Xe,Ye]=r.useState(!1),[ll,cl]=r.useState(!1),[Me,Je]=r.useState(null),[Ze,jt]=r.useState(300),[Ne,Qe]=r.useState("dark"),[$t,et]=r.useState(0),[dl,St]=r.useState(new Date),[Pe,tt]=r.useState(null),[kt,ul]=r.useState({}),[Et,Lt]=r.useState({}),[hl,nt]=r.useState({}),Ct=r.useCallback((i,p)=>{Lt(h=>({...h,[i]:p}))},[]),Fe=r.useCallback(async()=>{await f()},[f]);r.useEffect(()=>{const i=window.setInterval(()=>St(new Date),1e3);return()=>window.clearInterval(i)},[]),r.useEffect(()=>{Yt().then(h=>{Je({allowDelete:h.allowDelete,defaultShell:h.defaultShell}),typeof h.allowDelete<"u"&&_e(!!h.allowDelete),h.theme&&Qe(h.theme),typeof h.autoOpen<"u"&&q(h.autoOpen),typeof h.showHidden<"u"&&T(h.showHidden),typeof h.showLogs<"u"&&$e(h.showLogs),typeof h.hideMemoryUsage<"u"&&Ye(h.hideMemoryUsage),h.maxEditorSize&&(et(h.maxEditorSize),localStorage.setItem("mlc_max_editor_size",h.maxEditorSize.toString()));const L=new URLSearchParams(window.location.search),y=L.get("lng")||L.get("lang");y&&y!==h.language?(console.log(`[i18n] Syncing language from Desktop (${y}) -> Server`),ye({language:y}).catch(console.error),n.language!==y&&n.changeLanguage(y)):h.language&&n.language!==h.language&&n.changeLanguage(h.language)}).catch(()=>Je({allowDelete:!1,defaultShell:"bash"}));const p=new URLSearchParams(window.location.search).get("profileId");if(p){console.log("Restoring state for profile:",p);try{const h=localStorage.getItem(`workspace_state_${p}`);if(h){const L=JSON.parse(h);L.panes&&v(L.panes),L.layout&&I(L.layout),L.activePaneId&&V(L.activePaneId)}}catch(h){console.error("Failed to restore workspace state",h)}}},[]),r.useEffect(()=>{const p=new URLSearchParams(window.location.search).get("profileId");if(p){const h={panes:M,layout:H,activePaneId:N};localStorage.setItem(`workspace_state_${p}`,JSON.stringify(h))}},[M,H,N]),r.useEffect(()=>{Ne==="light"?document.documentElement.classList.add("theme-light"):document.documentElement.classList.remove("theme-light")},[Ne]);const st=i=>{const p=`pane-${Date.now()}`,h=M[N],L=h==null?void 0:h.activeFile;v(y=>({...y,[p]:{id:p,files:L?[L]:[],activeFile:L||null}})),I(y=>{const A=K=>K.type==="leaf"?K.paneId===N?{type:"branch",direction:i,size:50,children:[K,{type:"leaf",paneId:p}]}:K:{...K,children:[A(K.children[0]),A(K.children[1])]};return A(y)}),V(p)},ot=i=>{i==="root"&&H.type==="leaf"||(I(p=>{const h=y=>{if(y.type==="leaf")return y.paneId===i?null:y;const A=h(y.children[0]),K=h(y.children[1]);return!A&&!K?null:A?K?{...y,children:[A,K]}:A:K};return h(p)||{type:"leaf",paneId:"root"}}),v(p=>{const h={...p};return delete h[i],h}),N===i&&V("root"))},Nt=(i,p)=>{I(h=>{const L=y=>y===i?{...y,size:p}:y.type==="branch"?{...y,children:[L(y.children[0]),L(y.children[1])]}:y;return L(h)})},Be=i=>i.type==="leaf"?Tt(i.paneId):e.jsxs(Dn,{direction:i.direction,initialSize:i.size,onResize:p=>Nt(i,p),children:[Be(i.children[0]),Be(i.children[1])]}),Tt=i=>{const p=M[i];if(!p)return e.jsx("div",{className:"muted",children:"Pane not found"});const h=p.files,L=p.activeFile||"",y=_=>{if(V(i),v(F=>{const B=F[i];return B?(_&&!_.startsWith("shell-")&&_.includes("."),{...F,[i]:{...B,activeFile:_}}):F}),_&&!_.startsWith("shell-")&&_!=="metadata"){const F=_.split("/").filter(Boolean);F.pop(),F.length&&`${F.join("/")}`}_!=="metadata"&&P(_),ie(Date.now())},A=_=>{v(F=>{const B=F[i];if(!B)return F;const re=B.files.filter(Se=>Se!==_);let le=B.activeFile;return B.activeFile===_&&(le=re[0]||null),{...F,[i]:{...B,files:re,activeFile:le}}})},K={};for(const _ of h)if(_.startsWith("shell-")){const B=(xe[_]||""||"/").split("/").filter(Boolean);let re="/";if(B.length){const le=B[B.length-1];le.includes(".")&&B.length>1?re=B[B.length-2]:re=le}K[_]=re}else if(_==="metadata")K[_]=t("file_details","File Details");else{const F=_.split("/").pop()||_;K[_]=Et[_]?`*${F}`:F}const Oe={},Ae={};for(const _ of h)_.startsWith("shell-")?(Oe[_]="shell",Ae[_]=xe[_]||"/"):(Oe[_]="file",Ae[_]=_);const at=i===N;return e.jsxs("div",{className:"pane-content",style:{height:"100%",display:"flex",flexDirection:"column",position:"relative"},onClick:()=>{at||V(i)},children:[at&&e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:2,background:"var(--accent)",zIndex:10}}),h.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{onContextMenu:_=>{_.preventDefault()},children:e.jsx(r.Suspense,{fallback:null,children:e.jsx(Ln,{openFiles:h,active:L,titles:K,fullPaths:Ae,types:Oe,onRestoreEvicted:()=>{},onActivate:y,onClose:A,onCloseOthers:_=>{v(F=>{const B=F[i];if(!B)return F;const re=B.files.filter(le=>le===_);return{...F,[i]:{...B,files:re,activeFile:_}}})},onCloseLeft:_=>{v(F=>{const B=F[i];if(!B)return F;const re=B.files.indexOf(_);if(re<=0)return F;const le=B.files.slice(re);let Se=B.activeFile;return le.includes(Se||"")||(Se=_),{...F,[i]:{...B,files:le,activeFile:Se}}})}})})}),e.jsx("div",{style:{flex:1,position:"relative"},children:h.map(_=>e.jsx("div",{style:{display:_===L?"block":"none",height:"100%"},children:_.startsWith("shell-")?e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"muted",children:t("loading")}),children:e.jsx(In,{shell:Me&&Me.defaultShell||"bash",path:xe[_]||"",onExit:()=>A(_)},_)}):_==="trash"?e.jsx(sn,{}):_==="metadata"?e.jsx(En,{path:$}):_==="binary"?e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"muted",children:"Loadingâ€¦"}),children:e.jsx(kn,{path:d||void 0})}):e.jsx(Sn,{path:_,settings:Me||void 0,onSaved:()=>{},reloadTrigger:kt[_]||0,onUnsavedChange:Ct,onMeta:F=>{F&&F.path&&nt(B=>({...B,[_]:F}))}})},_))})]}):e.jsxs("div",{className:"welcome-message",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",color:"var(--text-muted)"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"10px",opacity:.2},children:e.jsx(z,{name:U("folder"),size:48})}),e.jsx("div",{style:{opacity:.5},children:t("no_files")}),i!=="root"&&e.jsxs("button",{className:"btn link",onClick:()=>ot(i),children:[t("close")," Pane"]})]})]})};return e.jsxs("div",{className:"app",children:[e.jsxs("header",{className:"app-header",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("img",{src:"/logo.png",alt:"MLCRemote logo",style:{height:28,display:"block"},onLoad:()=>g(!0),onError:()=>g(!1)}),!de&&e.jsx("h1",{style:{margin:0},children:"MLCRemote"})]}),e.jsxs("div",{className:"status",children:[e.jsx("button",{className:"link icon-btn",onClick:async()=>{var L;let i=$||"";try{if(i){const y=await fe(i);if(!y.isDir&&y.path){const A=y.path.split("/").filter(Boolean);A.pop(),i=A.length?`/${A.join("/")}`:""}}else if(J&&!J.startsWith("shell-"))try{const y=await fe(J);if(y.isDir)i=y.path||J;else if(y.path){const A=y.path.split("/").filter(Boolean);A.pop(),i=A.length?`/${A.join("/")}`:""}}catch{const A=J.split("/").filter(Boolean);A.pop(),i=A.length?`/${A.join("/")}`:""}}catch{}const p=`shell-${Date.now()}`;let h=i||"";if(h&&((L=h.split("/").pop())!=null&&L.includes("."))){const y=h.split("/").filter(Boolean);y.pop(),h=y.length?`/${y.join("/")}`:"/"}De(y=>({...y,[p]:h})),ae(p)},title:t("terminal"),"aria-label":t("terminal"),children:e.jsx(z,{name:U("terminal"),title:t("terminal"),size:16})}),e.jsx("button",{className:"link icon-btn","aria-label":"Toggle theme",onClick:()=>{const i=Ne==="dark"?"light":"dark";Qe(i),Te.set("theme",i,ht),i==="light"?document.documentElement.classList.add("theme-light"):document.documentElement.classList.remove("theme-light")},children:Ne==="dark"?e.jsx(z,{name:U("moon"),title:t("theme"),size:16}):e.jsx(z,{name:U("sun"),title:t("theme"),size:16})}),e.jsx("button",{className:"link icon-btn",title:t("about"),"aria-label":t("about"),onClick:()=>Ie(!0),children:e.jsx(z,{name:U("info"),title:t("about"),size:16})}),e.jsx("button",{className:"link icon-btn",title:"Screenshot","aria-label":"Screenshot",onClick:async()=>{const i=document.querySelector(".app");if(i)try{await Nn(i,"mlcremote-screenshot.png")}catch(p){console.error("Screenshot failed",p)}},children:e.jsx(z,{name:U("screenshot"),title:"Screenshot",size:16})}),e.jsx("button",{className:"link icon-btn",title:"Trash","aria-label":"Trash",onClick:()=>{Q.includes("trash")||ae("trash"),Z("trash")},children:e.jsx(z,{name:"icon-trash",title:"Trash",size:16})}),e.jsx("button",{className:"link icon-btn",title:"Split Right","aria-label":"Split Right",onClick:()=>st("vertical"),children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",style:{display:"block"},children:[e.jsx("path",{fillRule:"evenodd",d:"M14 3H2a1 1 0 00-1 1v8a1 1 0 001 1h12a1 1 0 001-1V4a1 1 0 00-1-1zM2 2a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V4a2 2 0 00-2-2H2z",clipRule:"evenodd"}),e.jsx("path",{d:"M8 4v8H7V4h1z"})]})}),e.jsx("button",{className:"link icon-btn",title:"Split Down","aria-label":"Split Down",onClick:()=>st("horizontal"),children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",style:{display:"block"},children:[e.jsx("path",{fillRule:"evenodd",d:"M14 3H2a1 1 0 00-1 1v8a1 1 0 001 1h12a1 1 0 001-1V4a1 1 0 00-1-1zM2 2a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V4a2 2 0 00-2-2H2z",clipRule:"evenodd"}),e.jsx("path",{d:"M2 8h12v1H2V8z"})]})}),H.type!=="leaf"&&e.jsx("button",{className:"link icon-btn",title:"Close Active Pane","aria-label":"Close Active Pane",onClick:()=>ot(N),style:{marginLeft:4},children:e.jsx(z,{name:U("close"),size:16})}),e.jsx("button",{className:"link icon-btn","aria-label":t("settings"),title:t("settings"),onClick:()=>Ge(i=>!i),children:e.jsx(z,{name:U("settings"),title:t("settings"),size:16})})]}),bt&&e.jsx(nn,{autoOpen:W,showHidden:E,onToggleAutoOpen:i=>ee(i),onToggleShowHidden:i=>ne(i),showLogs:je,onToggleLogs:i=>{$e(i),ye({showLogs:i}).catch(console.error)},hideMemoryUsage:Xe,onToggleHideMemoryUsage:i=>{Ye(i),ye({hideMemoryUsage:i}).catch(console.error)},onClose:()=>Ge(!1),onLanguageChange:i=>{i!==n.language&&(n.changeLanguage(i),ye({language:i}).catch(console.error))},maxEditorSize:$t,onMaxFileSizeChange:i=>{et(i),ye({maxEditorSize:i}).catch(console.error)}})]}),e.jsxs("div",{className:"app-body",style:{alignItems:"stretch"},children:[e.jsx("aside",{className:"sidebar",style:{width:Ze},children:e.jsx(tn,{showHidden:E,autoOpen:W,onToggleHidden:i=>ne(i),selectedPath:$,activeDir:G,onDirChange:pe,focusRequest:oe,reloadSignal:R,onSelect:(i,p)=>{if(P(i),p){Z(i);return}(async()=>{try{const h=await fe(i),L=We({path:i,meta:h});if(L.name==="Binary"||L.name==="Unsupported"){Q.includes("binary")||ae("binary"),k(i),Z("binary");return}}catch(h){tt({title:"Broken Link",message:`Cannot open file: ${h.message||"stat failed"}`});return}W?ae(i):Q.includes(i)&&Z(i)})(),Fe()},onView:i=>{Q.includes(i)?Z(i):ae(i),i!=="metadata"&&P(i),Fe()},onBackendActive:Fe,onChangeRoot:async()=>{if(!ue){alert("Changing root is not permitted by the server settings");return}const i=window.prompt("Enter the server directory path to use as new root (e.g. /home/user/project):",$||"/");if(!i)return;const p=i.trim();try{if(!(await fe(p)).isDir){alert("Selected path is not a directory");return}P(p);try{Te.set("lastRoot",p,ht)}catch{}try{const L=Te.getOrDefault("showHidden",ft,!1);Te.set("showHidden",L,ft)}catch{}}catch(h){alert("Cannot access selected path: "+((h==null?void 0:h.message)||h))}}})}),e.jsx("div",{className:"resizer",onMouseDown:i=>{const p=i.clientX,h=Ze;function L(A){const K=A.clientX-p;jt(Math.max(160,Math.min(800,h+K)))}function y(){window.removeEventListener("mousemove",L),window.removeEventListener("mouseup",y)}window.addEventListener("mousemove",L),window.addEventListener("mouseup",y)},children:e.jsx("div",{className:"bar"})}),e.jsx("main",{className:"main",children:e.jsxs("div",{className:"main-content",children:[x&&e.jsx("div",{className:"login-overlay",children:e.jsxs("div",{className:"login-box",children:[e.jsx("h3",{children:"Not Authenticated"}),e.jsx("p",{children:"You need to sign in or provide an access key to continue."}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[e.jsxs("button",{className:"btn",onClick:()=>{w(!1),j(!0)},children:[t("open")," (password)"]}),e.jsx("button",{className:"btn",onClick:()=>{w(!1),C(!0)},children:"I have an access key"})]})]})}),m&&e.jsx("div",{className:"login-overlay",children:e.jsxs("div",{className:"login-box",children:[e.jsx("h3",{children:"Sign in"}),e.jsx("p",{children:"Please enter the server password to obtain an access token."}),e.jsx("input",{id:"mlc-login-pwd",type:"password",placeholder:"Password"}),e.jsx("div",{style:{marginTop:8},children:e.jsx("button",{className:"btn",onClick:async()=>{const i=document.getElementById("mlc-login-pwd");if(i)try{await c(i.value)}catch(p){alert("Login failed: "+((p==null?void 0:p.message)||p))}},children:t("open")})})]})}),S&&e.jsx("div",{className:"login-overlay",children:e.jsxs("div",{className:"login-box",children:[e.jsx("h3",{children:"Enter Access Token"}),e.jsx("p",{children:"The server requires an access token. Paste it here to continue."}),e.jsx("input",{id:"mlc-token-input",type:"text",placeholder:"token"}),e.jsx("div",{style:{marginTop:8},children:e.jsx("button",{className:"btn",onClick:async()=>{const i=document.getElementById("mlc-token-input");if(i)try{l(i.value.trim())}catch(p){alert("Failed to store token: "+((p==null?void 0:p.message)||p))}},children:"Use token"})})]})}),Pe&&e.jsx(zn,{title:Pe.title,message:Pe.message,onClose:()=>tt(null)}),Be(H)]})})]}),e.jsx(Rn,{health:s,isOnline:o,hideMemoryUsage:Xe,lastHealthAt:a}),e.jsx(Cn,{visible:je,onClose:()=>$e(!1)}),wt&&e.jsx("div",{className:"about-backdrop",onClick:()=>Ie(!1),children:e.jsxs("div",{className:"about-modal",onClick:i=>i.stopPropagation(),children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h3",{style:{margin:0},children:"MLCRemote"}),e.jsx("button",{"aria-label":t("close"),title:t("close"),onClick:()=>Ie(!1),style:{background:"transparent",border:"none",cursor:"pointer"},children:e.jsx(z,{name:"icon-close",size:16})})]}),e.jsxs("div",{style:{marginBottom:8},children:["Copyright Â© ",new Date().getFullYear()," Michael Lechner"]}),e.jsxs("div",{style:{marginBottom:8},children:["Version: ",s?`${s.status}@${s.version}`:"unknown"]}),s&&e.jsxs("div",{style:{maxHeight:"40vh",overflow:"auto",background:"#0b0b0b",color:"white",padding:12,borderRadius:6},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Host:"})," ",s.host]}),e.jsxs("div",{children:[e.jsx("strong",{children:"PID:"})," ",s.pid]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Version:"})," ",s.version]}),e.jsxs("div",{children:[e.jsx("strong",{children:"App Memory:"})," ",ce(s.go_alloc_bytes)," (alloc) / ",ce(s.go_sys_bytes)," (sys)"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"System Memory:"})," ",ce((s.sys_mem_total_bytes||0)-(s.sys_mem_free_bytes||0))," / ",ce(s.sys_mem_total_bytes||0)," used"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"CPU:"})," ",Math.round((s.cpu_percent||0)*10)/10,"%"]}),e.jsxs("div",{style:{marginTop:8},children:[e.jsx("strong",{children:"Server time:"})," ",s.server_time]}),e.jsxs("div",{style:{marginTop:4},children:[e.jsx("strong",{children:"Timezone:"})," ",s.timezone]}),e.jsxs("div",{className:"muted",style:{marginTop:8,fontSize:12},children:["Last refresh: ",a?new Date(a).toLocaleString():"n/a"]})]})]})})]})}const Pn="MLCRemote IDE",Fn="Files",Bn="Terminal",On="Settings",An="Search",Un="New File",Hn="New Folder",Wn="Rename",Vn="Save",qn="Cancel",Kn="Theme",Gn="Language",Xn="Editor",Yn="Run",Jn="Debug",Zn="Close",Qn="Open",es="Loading...",ts="No files open",ns="Switch to Remote View",ss="Disconnected from server",os="Refresh",rs="Change Root",is="Upload",as="Download",ls="Copy Full Path",cs="Copy Relative Path",ds="Copy Name",us="Are you sure you want to delete {{path}}?",hs="Auto open files",fs="Show hidden files",ms="Show server logs",ps="Hide memory usage gauge",gs="About MLCRemote",xs="Version",ys="Copyright",_s="Drop to upload",vs="View file",ws="Loading trash...",bs="Trash is empty",js="Original path",$s="Trash path",Ss="Undo (coming)",ks="Connected to shell session: {{id}}",Es="Connected to ephemeral shell",Ls="Copy",Cs="Paste",Ns="Paste text here",Ts="Logs",zs="Clear",Rs="Loading PDF support...",Ds="Loading PDF...",Is="Prev",Ms="Next",Ps="No preview",Fs="No file selected",Bs="Full path",Os="MIME",As="Size",Us="Mode",Hs="Last Modified",Ws="Is Dir",Vs="Yes",qs="No",Ks="Loading metadata...",Gs="Open or create a file to edit",Xs="Close Others",Ys="Close Left",Js="Restore",Zs="scroll left",Qs="scroll right",eo="Editor Settings",to="Max File Size (MB)",no="Files larger than this will open in read-only mode.",so={app_title:Pn,files:Fn,terminal:Bn,settings:On,search:An,new_file:Un,new_folder:Hn,rename:Wn,delete:"Delete",save:Vn,cancel:qn,theme:Kn,language:Gn,editor:Xn,run:Yn,debug:Jn,close:Zn,open:Qn,loading:es,no_files:ts,switch_to_remote:ns,disconnected:ss,refresh:os,change_root:rs,upload:is,download:as,copy_full_path:ls,copy_relative_path:cs,copy_name:ds,delete_confirm:us,auto_open_files:hs,show_hidden_files:fs,show_server_logs:ms,hide_memory_usage:ps,about:gs,version:xs,copyright:ys,drop_to_upload:_s,view_file:vs,loading_trash:ws,trash_empty:bs,original_path:js,trash_path:$s,undo_coming:Ss,terminal_connected_session:ks,terminal_connected_ephemeral:Es,copy:Ls,paste:Cs,paste_text_here:Ns,logs:Ts,clear:zs,loading_pdf_support:Rs,loading_pdf:Ds,previous:Is,next:Ms,no_preview:Ps,no_file_selected:Fs,full_path:Bs,mime:Os,size:As,mode:Us,last_modified:Hs,is_dir:Ws,yes:Vs,no:qs,loading_metadata:Ks,open_or_create_file:Gs,close_others:Xs,close_left:Ys,restore:Js,scroll_left:Zs,scroll_right:Qs,editor_settings:eo,max_file_size:to,max_file_size_tooltip:no},oo="MLCRemote IDE",ro="Dateien",io="Terminal",ao="Einstellungen",lo="Suchen",co="Neue Datei",uo="Neuer Ordner",ho="Umbenennen",fo="Speichern",mo="Abbrechen",po="Design",go="Sprache",xo="Editor",yo="AusfÃ¼hren",_o="Debuggen",vo="SchlieÃŸen",wo="Ã–ffnen",bo="Laden...",jo="Keine Dateien geÃ¶ffnet",$o="Zur Remote-Ansicht wechseln",So="Vom Server getrennt",ko="Aktualisieren",Eo="Wurzelverzeichnis Ã¤ndern",Lo="Hochladen",Co="Herunterladen",No="VollstÃ¤ndigen Pfad kopieren",To="Relativen Pfad kopieren",zo="Namen kopieren",Ro="Sind Sie sicher, dass Sie {{path}} lÃ¶schen mÃ¶chten?",Do="Dateien automatisch Ã¶ffnen",Io="Versteckte Dateien anzeigen",Mo="Server-Logs anzeigen",Po="Speicherauslastung ausblenden",Fo="Ãœber MLCRemote",Bo="Version",Oo="Urheberrecht",Ao="Zum Hochladen hier ablegen",Uo="Datei anzeigen",Ho="Papierkorb wird geladen...",Wo="Papierkorb ist leer",Vo="UrsprÃ¼nglicher Pfad",qo="Papierkorb-Pfad",Ko="RÃ¼ckgÃ¤ngig (demnÃ¤chst)",Go="Verbunden mit Shell-Sitzung: {{id}}",Xo="Verbunden mit temporÃ¤rer Shell",Yo="Kopieren",Jo="EinfÃ¼gen",Zo="Text hier einfÃ¼gen",Qo="Protokolle",er="LÃ¶schen",tr="PDF-UnterstÃ¼tzung wird geladen...",nr="PDF wird geladen...",sr="ZurÃ¼ck",or="Weiter",rr="Keine Vorschau",ir="Keine Datei ausgewÃ¤hlt",ar="VollstÃ¤ndiger Pfad",lr="MIME-Typ",cr="GrÃ¶ÃŸe",dr="Modus",ur="Zuletzt geÃ¤ndert",hr="Ist Verzeichnis",fr="Ja",mr="Nein",pr="Metadaten werden geladen...",gr="Ã–ffnen oder erstellen Sie eine Datei zum Bearbeiten",xr="Andere schlieÃŸen",yr="Links schlieÃŸen",_r="Wiederherstellen",vr="nach links scrollen",wr="nach rechts scrollen",br="Editor-Einstellungen",jr="Max. DateigrÃ¶ÃŸe (MB)",$r="Dateien, die grÃ¶ÃŸer sind, werden schreibgeschÃ¼tzt geÃ¶ffnet.",Sr={app_title:oo,files:ro,terminal:io,settings:ao,search:lo,new_file:co,new_folder:uo,rename:ho,delete:"LÃ¶schen",save:fo,cancel:mo,theme:po,language:go,editor:xo,run:yo,debug:_o,close:vo,open:wo,loading:bo,no_files:jo,switch_to_remote:$o,disconnected:So,refresh:ko,change_root:Eo,upload:Lo,download:Co,copy_full_path:No,copy_relative_path:To,copy_name:zo,delete_confirm:Ro,auto_open_files:Do,show_hidden_files:Io,show_server_logs:Mo,hide_memory_usage:Po,about:Fo,version:Bo,copyright:Oo,drop_to_upload:Ao,view_file:Uo,loading_trash:Ho,trash_empty:Wo,original_path:Vo,trash_path:qo,undo_coming:Ko,terminal_connected_session:Go,terminal_connected_ephemeral:Xo,copy:Yo,paste:Jo,paste_text_here:Zo,logs:Qo,clear:er,loading_pdf_support:tr,loading_pdf:nr,previous:sr,next:or,no_preview:rr,no_file_selected:ir,full_path:ar,mime:lr,size:cr,mode:dr,last_modified:ur,is_dir:hr,yes:fr,no:mr,loading_metadata:pr,open_or_create_file:gr,close_others:xr,close_left:yr,restore:_r,scroll_left:vr,scroll_right:wr,editor_settings:br,max_file_size:jr,max_file_size_tooltip:$r},kr="MLCRemote IDE",Er="Archivos",Lr="Terminal",Cr="ConfiguraciÃ³n",Nr="Buscar",Tr="Nuevo Archivo",zr="Nueva Carpeta",Rr="Renombrar",Dr="Guardar",Ir="Cancelar",Mr="Tema",Pr="Idioma",Fr="Editor",Br="Ejecutar",Or="Depurar",Ar="Cerrar",Ur="Abrir",Hr="Cargando...",Wr="No hay archivos abiertos",Vr="Cambiar a vista remota",qr="Desconectado del servidor",Kr="Actualizar",Gr="Cambiar raÃ­z",Xr="Subir",Yr="Descargar",Jr="Copiar ruta completa",Zr="Copiar ruta relativa",Qr="Copiar nombre",ei="Â¿EstÃ¡s seguro de que deseas eliminar {{path}}?",ti="Abrir archivos automÃ¡ticamente",ni="Mostrar archivos ocultos",si="Mostrar logs del servidor",oi="Ocultar uso de memoria",ri="Acerca de MLCRemote",ii="VersiÃ³n",ai="Derechos de autor",li="Soltar para subir",ci="Ver archivo",di="Cargando papelera...",ui="La papelera estÃ¡ vacÃ­a",hi="Ruta original",fi="Ruta de la papelera",mi="Deshacer (prÃ³ximamente)",pi="Conectado a la sesiÃ³n de shell: {{id}}",gi="Conectado a la shell efÃ­mera",xi="Copiar",yi="Pegar",_i="Pegar texto aquÃ­",vi="Registros",wi="Limpiar",bi="Cargando soporte PDF...",ji="Cargando PDF...",$i="Ant",Si="Sig",ki="Sin vista previa",Ei="NingÃºn archivo seleccionado",Li="Ruta completa",Ci="MIME",Ni="TamaÃ±o",Ti="Modo",zi="Ãšltima modificaciÃ³n",Ri="Es directorio",Di="SÃ­",Ii="No",Mi="Cargando metadatos...",Pi="Abrir o crear un archivo para editar",Fi="Cerrar otros",Bi="Cerrar izquierda",Oi="Restaurar",Ai="desplazarse a la izquierda",Ui="desplazarse a la derecha",Hi={app_title:kr,files:Er,terminal:Lr,settings:Cr,search:Nr,new_file:Tr,new_folder:zr,rename:Rr,delete:"Eliminar",save:Dr,cancel:Ir,theme:Mr,language:Pr,editor:Fr,run:Br,debug:Or,close:Ar,open:Ur,loading:Hr,no_files:Wr,switch_to_remote:Vr,disconnected:qr,refresh:Kr,change_root:Gr,upload:Xr,download:Yr,copy_full_path:Jr,copy_relative_path:Zr,copy_name:Qr,delete_confirm:ei,auto_open_files:ti,show_hidden_files:ni,show_server_logs:si,hide_memory_usage:oi,about:ri,version:ii,copyright:ai,drop_to_upload:li,view_file:ci,loading_trash:di,trash_empty:ui,original_path:hi,trash_path:fi,undo_coming:mi,terminal_connected_session:pi,terminal_connected_ephemeral:gi,copy:xi,paste:yi,paste_text_here:_i,logs:vi,clear:wi,loading_pdf_support:bi,loading_pdf:ji,previous:$i,next:Si,no_preview:ki,no_file_selected:Ei,full_path:Li,mime:Ci,size:Ni,mode:Ti,last_modified:zi,is_dir:Ri,yes:Di,no:Ii,loading_metadata:Mi,open_or_create_file:Pi,close_others:Fi,close_left:Bi,restore:Oi,scroll_left:Ai,scroll_right:Ui},Wi="MLCRemote IDE",Vi="Fichiers",qi="Terminal",Ki="ParamÃ¨tres",Gi="Rechercher",Xi="Nouveau Fichier",Yi="Nouveau Dossier",Ji="Renommer",Zi="Enregistrer",Qi="Annuler",ea="ThÃ¨me",ta="Langue",na="Ã‰diteur",sa="ExÃ©cuter",oa="DÃ©boguer",ra="Fermer",ia="Ouvrir",aa="Chargement...",la="Aucun fichier ouvert",ca="Passer Ã  la vue distante",da="DÃ©connectÃ© du serveur",ua="Actualiser",ha="Changer la racine",fa="TÃ©lÃ©verser",ma="TÃ©lÃ©charger",pa="Copier le chemin complet",ga="Copiar le chemin relatif",xa="Copier le nom",ya="ÃŠtes-vous sÃ»r de vouloir supprimer {{path}} ?",_a="Ouvrir les fichiers automatiquement",va="Afficher les fichiers cachÃ©s",wa="Afficher les logs du serveur",ba="Masquer l'utilisation de la mÃ©moire",ja="Ã€ propos de MLCRemote",$a="Version",Sa="Copyright",ka="DÃ©poser pour tÃ©lÃ©verser",Ea="Voir le fichier",La="Chargement de la corbeille...",Ca="La corbeille est vide",Na="Chemin d'origine",Ta="Chemin de la corbeille",za="Annuler (prochainement)",Ra="ConnectÃ© Ã  la session shell : {{id}}",Da="ConnectÃ© au shell Ã©phÃ©mÃ¨re",Ia="Copier",Ma="Coller",Pa="Coller le texte ici",Fa="Journaux",Ba="Effacer",Oa="Chargement du support PDF...",Aa="Chargement du PDF...",Ua="PrÃ©c",Ha="Suiv",Wa="Pas d'aperÃ§u",Va="Aucun fichier sÃ©lectionnÃ©",qa="Chemin complet",Ka="MIME",Ga="Taille",Xa="Mode",Ya="DerniÃ¨re modification",Ja="Est un rÃ©pertoire",Za="Oui",Qa="Non",el="Chargement des mÃ©tadatos...",tl="Ouvrir ou crÃ©er un fichier Ã  Ã©diter",nl="Fermer les autres",sl="Fermer Ã  gauche",ol="Restaurer",rl="faire dÃ©filer vers la gauche",il="faire dÃ©filer vers la droite",al={app_title:Wi,files:Vi,terminal:qi,settings:Ki,search:Gi,new_file:Xi,new_folder:Yi,rename:Ji,delete:"Supprimer",save:Zi,cancel:Qi,theme:ea,language:ta,editor:na,run:sa,debug:oa,close:ra,open:ia,loading:aa,no_files:la,switch_to_remote:ca,disconnected:da,refresh:ua,change_root:ha,upload:fa,download:ma,copy_full_path:pa,copy_relative_path:ga,copy_name:xa,delete_confirm:ya,auto_open_files:_a,show_hidden_files:va,show_server_logs:wa,hide_memory_usage:ba,about:ja,version:$a,copyright:Sa,drop_to_upload:ka,view_file:Ea,loading_trash:La,trash_empty:Ca,original_path:Na,trash_path:Ta,undo_coming:za,terminal_connected_session:Ra,terminal_connected_ephemeral:Da,copy:Ia,paste:Ma,paste_text_here:Pa,logs:Fa,clear:Ba,loading_pdf_support:Oa,loading_pdf:Aa,previous:Ua,next:Ha,no_preview:Wa,no_file_selected:Va,full_path:qa,mime:Ka,size:Ga,mode:Xa,last_modified:Ya,is_dir:Ja,yes:Za,no:Qa,loading_metadata:el,open_or_create_file:tl,close_others:nl,close_left:sl,restore:ol,scroll_left:rl,scroll_right:il};mt.use(Pt).use(Dt).init({resources:{en:{translation:so},de:{translation:Sr},es:{translation:Hi},fr:{translation:al}},fallbackLng:"en",interpolation:{escapeValue:!1}});console.log("MLCRemote: captureTokenFromURL type:",typeof He);try{const n=new URLSearchParams(window.location.search).get("api");if(n)try{const o=new URL(n).searchParams.get("lang");o&&(console.log("MLCRemote: Setting language to",o),mt.changeLanguage(o))}catch(s){console.error("Failed to parse api url for lang",s)}typeof He=="function"?He():console.error("MLCRemote: captureTokenFromURL is not a function!")}catch(t){console.error("MLCRemote: Initialization error",t)}window.addEventListener("dragover",t=>t.preventDefault());window.addEventListener("drop",t=>t.preventDefault());(async()=>{try{const t=await ze(()=>import("./icons-sprite-CPT79syg.js"),[],import.meta.url),n=t&&(t.default||t);if(n&&typeof document<"u"){const s=document.createElement("div");s.style.width="0",s.style.height="0",s.style.position="absolute",s.style.visibility="hidden",s.innerHTML=n,document.body.insertBefore(s,document.body.firstChild)}}catch(t){alert("Failed to load icon sprite: "+((t==null?void 0:t.message)||t))}})();It(document.getElementById("root")).render(e.jsx(Jt,{children:e.jsx(Mn,{})}));export{ze as _,se as a,wl as g,we as m,fe as s};
