/* Handcrafted minimal styles */
:root { --bg: #0f1115; --panel: #171a21; --text: #e6edf3; --muted: #9aa5b1; --accent: #3b82f6; --danger: #ef4444; --border: #2a2f3a; }

/* Light theme overrides */
.theme-light {
	/* Slightly muted light background to reduce glare */
	--bg: #f3f4f6; /* softer than pure white */
	--panel: #ffffff; /* keep panels white but rely on subtle borders */
	--text: #0f1724; /* a touch darker for better readability */
	--muted: #4b5563; /* darker muted text for readability */
	--accent: #2563eb;
	--danger: #991b1b; /* slightly less saturated danger */
	--border: #e9eef6; /* subtle border */
}
* { box-sizing: border-box; }
html, body, #root { height: 100%; }
body { margin: 0; background: var(--bg); color: var(--text); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji"; overflow: hidden; }

.app { display: flex; flex-direction: column; height: 100%; }
.app-header { display: flex; align-items: center; justify-content: space-between; padding: 12px 16px; border-bottom: 1px solid var(--border); background: var(--panel); }
.app-header { position: relative; z-index: 2000; }
.app-header h1 { margin: 0; font-size: 18px; }
.status { display: flex; align-items: center; gap: 12px; }
.badge { padding: 4px 8px; border-radius: 999px; font-size: 12px; }
.badge-ok { background: rgba(59, 130, 246, 0.15); color: var(--text); border: 1px solid var(--accent); }
.badge-error { background: rgba(239, 68, 68, 0.15); color: var(--text); border: 1px solid var(--danger); }
.link { color: var(--accent); background: none; border: none; cursor: pointer; padding: 0; font: inherit; }
.link:hover { text-decoration: underline; }

.app-body { display: flex; flex: 1; min-height: 0; }
.sidebar { width: 300px; border-right: 1px solid var(--border); background: var(--panel); padding: 8px; display: flex; flex-direction: column; min-height: 0; }
.main { flex: 1; padding: 8px; display: flex; flex-direction: column; min-height: 0; }

.main-content { flex: 1; display: flex; flex-direction: column; min-height: 0; overflow: auto; }

/* Ensure large images or other content don't cause the outer page to scroll; they should scroll inside the main area */
.main-content img, .editor-body img, .terminal-body img { max-width: 100%; height: auto; display: block; }

/* allow interactive content inside main to scroll without affecting the body */
.main, .editor-body, .terminal-body, .explorer-body { -webkit-overflow-scrolling: touch; }

/* resizer between sidebar and main */
.resizer { width: 8px; cursor: col-resize; background: transparent; display: flex; align-items: center; justify-content: center; }
.resizer:hover { background: rgba(15,20,30,0.03); }
.resizer .bar { width: 2px; height: 40%; background: rgba(15,20,30,0.06); border-radius: 2px; }

.explorer-header { display: flex; align-items: center; gap: 8px; padding: 8px; border-bottom: 1px solid var(--border); }
.breadcrumbs { font-size: 12px; color: var(--muted); }
.explorer-body { padding: 8px; flex: 1; overflow: auto; min-height: 0; }
.entry-list { list-style: none; padding: 0; margin: 0; }
.entry { display: flex; align-items: center; width: 100%; text-align: left; gap: 8px; padding: 6px 8px; background: transparent; border: 1px solid transparent; border-radius: 6px; color: var(--text); cursor: pointer; }
.entry:hover { border-color: var(--border); background: rgba(15,20,30,0.03); }
.icon { width: 18px; }

.editor { height: 100%; display: flex; flex-direction: column; }
.editor-header { display: flex; flex-wrap: wrap; align-items: center; gap: 8px; padding: 8px; border-bottom: 1px solid var(--border); background: var(--panel); }
.actions { margin-left: auto; display: flex; gap: 8px; }
.btn { padding: 6px 10px; border-radius: 6px; border: 1px solid var(--border); background: rgba(15,20,30,0.02); color: var(--text); cursor: pointer; }
.btn:hover { border-color: var(--accent); }
.btn[download], .btn.download { padding: 4px 8px; font-size: 12px; }
.btn-danger { border-color: var(--danger); }
.muted { color: var(--muted); font-size: 12px; }
.editor-body { flex: 1; padding: 8px; overflow: auto; min-height: 0; }
.editor-edit-area { position: relative; height: 100%; }
.editor-body .highlight-wrap { position: absolute; inset: 0; overflow: auto; margin: 0; z-index: 1; pointer-events: none; opacity: 1; box-sizing: border-box; }
.editor-body pre { margin: 0; padding: 10px; white-space: pre; word-break: normal; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: 13px; line-height: 18px; }
.editor-body code { display: block; }
.textarea { width: 100%; height: 100%; resize: none; padding: 10px; border-radius: 8px; border: none; background: transparent; color: transparent; caret-color: var(--text); font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; font-size: 13px; line-height: 18px; overflow: auto; box-sizing: border-box; position: relative; z-index: 2; }
.textarea::selection { background: rgba(255,255,255,0.06); }
.textarea:focus { outline: none; }

/* About modal */
.about-backdrop { position: fixed; left: 0; right: 0; top: 0; bottom: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 9999; }
.about-modal { background: var(--panel); padding: 20px; border-radius: 8px; color: var(--text); min-width: 320px; z-index: 10000; }

/* Header: ensure contrast in light mode */
.theme-light .app-header { background: var(--panel); border-bottom-color: var(--border); }
.theme-light .status .link { color: var(--accent) }

/* Light-mode adjustments for log overlay and buttons */
.theme-light .log-overlay {
	background: rgba(255,255,255,0.98);
	color: var(--text);
	border: 1px solid var(--border);
}
.theme-light .log-meta { color: var(--muted); }
.theme-light .log-level { color: var(--accent); }
.theme-light .btn { background: transparent; border: 1px solid var(--border); color: var(--text); }
.theme-light .icon-btn { color: var(--text); background: rgba(0,0,0,0.06); border: 1px solid var(--border); }
.theme-light .icon-btn:hover { background: rgba(0,0,0,0.08); }

/* Terminal header styles */
.terminal-root { height: 100%; display: flex; flex-direction: column; }
.terminal-header { padding: 6px; border-bottom: 1px solid rgba(255,255,255,0.03); background: var(--panel); display: flex; align-items: center; gap: 8px; }
.terminal-controls { margin-left: auto; display: flex; gap: 8px; }
.terminal-body { flex: 1; background: #000; overflow: auto; min-height: 0; }

.theme-light .terminal-header { background: var(--panel); border-bottom-color: var(--border); }
.theme-light .terminal-body { background: #f8fafc; }
.theme-light .terminal-header .btn { background: rgba(0,0,0,0.02); border: 1px solid var(--border); color: var(--text); }
.theme-light .terminal-header .btn:hover { background: rgba(0,0,0,0.04); }

/* Editor code background adjustments per theme */
.editor-body pre { background: transparent; }
.theme-light .editor-body pre { background: #f3f4f6; color: var(--text); }

/* TabBar styles */
.tabbar { display: flex; gap: 8px; padding: 8px; border-bottom: 1px solid rgba(0,0,0,0.06); background: var(--panel); }

/* Dropdown used by TabBar; themed for light/dark */
.dropdown {
	min-width: 140px;
	background: var(--panel);
	color: var(--text);
	border: 1px solid var(--border);
	border-radius: 6px;
	padding: 6px;
	z-index: 5000;
}
.dropdown .link { display: block; width: 100%; text-align: left; padding: 6px 8px; border-radius: 4px; }
.dropdown .link:hover { background: rgba(15,20,30,0.03); }

/* Prism token color overrides for light theme to improve contrast */
.theme-light .token.comment { color: #374151 }
.theme-light .token.keyword { color: #92400e }
.theme-light .token.string { color: #065f46 }
.theme-light .token.function { color: #1e40af }
.theme-light .token.punctuation { color: #374151 }
.theme-light .token.operator { color: #374151 }
.theme-light .token.constant { color: #b91c1c }
.theme-light .token.selector { color: #7c3aed }

/* Remove top black header block when in light theme */
.theme-light .editor-header { background: var(--panel); border-bottom: 1px solid var(--border); }
.theme-light .tabbar { background: var(--panel); }

/* Icon button for header actions */
.icon-btn { display: inline-flex; align-items: center; justify-content: center; width: 32px; height: 28px; border-radius: 6px; border: none; background: transparent; color: var(--accent); cursor: pointer; }
.icon-btn svg { display: block; }
.icon-btn:hover { background: rgba(0,0,0,0.04); }
.theme-light .icon-btn { color: var(--accent); }

/* Log overlay styles (ensure top z-index so controls are clickable) */
.log-overlay {
	position: fixed;
	right: 12px;
	bottom: 12px;
	width: 520px;
	max-height: 40vh;
	overflow: auto;
	background: rgba(10,12,16,0.92);
	border: 1px solid rgba(255,255,255,0.03);
	padding: 8px;
	border-radius: 8px;
	color: var(--text);
	font-size: 12px;
	z-index: 11000;
}
.log-header { display: flex; justify-content: space-between; margin-bottom: 6px; }
.log-entry { margin-bottom: 6px; }
.log-meta { color: #94a3b8; }
.log-level { color: #7c3aed; margin-left: 6px; }
